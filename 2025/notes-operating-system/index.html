<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://images.kisechan.space/icon.jpg"><link rel="icon" href="https://images.kisechan.space/icon.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#004e66"><meta name="author" content="Kisechan"><meta name="keywords" content=""><meta name="description" content="操作系统概述 操作系统概念  地位: 操作系统位于硬件抽象层（HAL）之上，所有其他软件层之下。它是连接硬件和应用程序的桥梁。 作用:  管理系统中的软硬件资源，包括CPU、内存、设备和文件。 为用户（应用程序）提供良好的服务和界面，例如API、GUI、命令行和JCL (Job Control Language)。   定义: 操作系统是位于硬件层之上、所有其他软件层之下的系统软件，是管理系统中各"><meta property="og:type" content="article"><meta property="og:title" content="操作系统复习"><meta property="og:url" content="https://blog.kisechan.space/2025/notes-operating-system/index.html"><meta property="og:site_name" content="Kisechan&#39;s Blog"><meta property="og:description" content="操作系统概述 操作系统概念  地位: 操作系统位于硬件抽象层（HAL）之上，所有其他软件层之下。它是连接硬件和应用程序的桥梁。 作用:  管理系统中的软硬件资源，包括CPU、内存、设备和文件。 为用户（应用程序）提供良好的服务和界面，例如API、GUI、命令行和JCL (Job Control Language)。   定义: 操作系统是位于硬件层之上、所有其他软件层之下的系统软件，是管理系统中各"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://images.kisechan.space/355b6175fe26d1ea421f4dbfcaa7ea86_720.jpg"><meta property="article:published_time" content="2025-05-23T14:08:13.000Z"><meta property="article:modified_time" content="2025-05-24T07:29:21.315Z"><meta property="article:author" content="Kisechan"><meta property="article:tag" content="操作系统"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://images.kisechan.space/355b6175fe26d1ea421f4dbfcaa7ea86_720.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><title>操作系统复习 - Kisechan&#39;s Blog</title><link rel="stylesheet" type="text/css" href="/css/loading.css"><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4890189_5ms3yf4n747.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/cursor.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"blog.kisechan.space",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:["home"]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"#"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!0,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4",collapseDepth:4},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("busuanzi_value_site_uv"),t=document.getElementById("busuanzi_value_site_pv"),n=new MutationObserver(e=>{for(let t of e)if("childList"===t.type){n.disconnect(),t.target.innerHTML=parseInt(t.target.innerHTML)+3837;break}}),i=new MutationObserver(e=>{for(let t of e)if("childList"===t.type){i.disconnect(),t.target.innerHTML=parseInt(t.target.innerHTML)+6136;break}}),r={childList:!0};n.observe(e,r),i.observe(t,r)});</script><meta name="generator" content="Hexo 7.2.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="Kisechan's Blog" type="application/atom+xml"></head><body><div><div class="real_mask" style="background-color:rgba(0,0,0,.3);width:100%;height:100%;position:fixed;z-index:-777"></div><div id="banner_video_insert"></div><div id="vvd_banner_img"></div></div><div id="banner"></div><div id="loader-box"><div class="loader-wrapper"><div class="loader"></div><div class="loader-text"><div>L</div><div>O</div><div>A</div><div>D</div><div>I</div><div>N</div><div>G</div><div></div><div></div><div></div></div></div><script>var endLoading=function(){document.body.style.overflow="auto",document.getElementById("loader-box").remove()};window.addEventListener("load",endLoading)</script></div><header><div class="header-inner" style="height:80vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>KISECHAN</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/" target="_self"><i class="iconfont icon-Homehomepagemenu"></i> <span>主站</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-newstextarticle"></i> <span>文章</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-categories"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-user"></i> <span>个人</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="https://www.kisechan.space/" target="_self"><i class="iconfont icon-info-fill"></i> <span>关于</span> </a><a class="dropdown-item" href="/playlist/" target="_self"><i class="iconfont icon-music"></i> <span>歌单</span> </a><a class="dropdown-item" href="https://github.com/Kisechan/Kisechan.github.io" target="_self"><i class="iconfont icon-git"></i> <span>仓库</span> </a><a class="dropdown-item" href="/atom.xml" target="_self"><i class="iconfont icon-rss"></i> <span>RSS订阅</span></a></div></li><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/tools/" target="_self"><i class="iconfont icon-tool-fill"></i> <span>工具</span></a></li><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/links" target="_self"><i class="iconfont icon-link"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://images.kisechan.space/202502042159748.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">操作系统复习</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Kisechan </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-05-23 22:08" pubdate>2025年5月23日 晚上</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 6.1k 字 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></div><script type="text/javascript" src="/vvd_js/jquery.js"></script><div class="banner" id="banner"><div class="full-bg-img"></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="课程笔记" id="heading-311a46cfdaa3afda544e9285644f70d7" role="tab" data-toggle="collapse" href="#collapse-311a46cfdaa3afda544e9285644f70d7" aria-expanded="true">课程笔记 <span class="list-group-count">(8)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-311a46cfdaa3afda544e9285644f70d7" role="tabpanel" aria-labelledby="heading-311a46cfdaa3afda544e9285644f70d7"><div class="category-post-list"><a href="/2024/oop/" title="面向对象程序设计课程笔记" class="list-group-item list-group-item-action"><span class="category-post">面向对象程序设计课程笔记</span> </a><a href="/2024/linux-note/" title="Linux课程笔记" class="list-group-item list-group-item-action"><span class="category-post">Linux课程笔记</span> </a><a href="/2024/ds/" title="数据结构课程板子合集&amp;笔记" class="list-group-item list-group-item-action"><span class="category-post">数据结构课程板子合集&amp;笔记</span> </a><a href="/2025/notes-algorithm-analysis/" title="算法设计与分析 课程笔记" class="list-group-item list-group-item-action"><span class="category-post">算法设计与分析 课程笔记</span> </a><a href="/2025/notes-database-1/" title="数据库原理 课程笔记 (1)" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (1)</span> </a><a href="/2025/notes-database-2/" title="数据库原理 课程笔记 (2)" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (2)</span> </a><a href="/2025/notes-database-3/" title="数据库原理 课程笔记 (3)" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (3)</span> </a><a href="/2025/notes-operating-system/" title="操作系统复习" class="list-group-item list-group-item-action active"><span class="category-post">操作系统复习</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">操作系统复习</h1><p id="updated-time" class="note note-info" style="display:none">本文最后更新于 2025-05-24T15:29:21+08:00</p><div class="markdown-body"><h2 id="操作系统概述">操作系统概述</h2><h3 id="操作系统概念">操作系统概念</h3><ul><li><strong>地位</strong>: 操作系统位于硬件抽象层（HAL）之上，所有其他软件层之下。它是连接硬件和应用程序的桥梁。</li><li><strong>作用</strong>:<ul><li>管理系统中的软硬件资源，包括CPU、内存、设备和文件。</li><li>为用户（应用程序）提供良好的服务和界面，例如API、GUI、命令行和JCL (Job Control Language)。</li></ul></li><li><strong>定义</strong>: 操作系统是位于硬件层之上、所有其他软件层之下的系统软件，是管理系统中各种软硬件资源、方便用户使用计算机系统的程序集合。</li></ul><h3 id="操作系统的历史">操作系统的历史</h3><ul><li><p><strong>操作系统的产生</strong>:</p><ul><li><p><strong>手工操作阶段</strong> (20世纪40年代): 没有操作系统。作业处理步骤繁琐，包括穿孔、光电输入、控制台启动、输出等。主要缺点是资源独占和手工操作耗时。</p></li><li><p><strong>批处理<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote">&lt;span class=“hint–top hint–rounded” aria-label="“批处理”是指将多个作业或程序</a></sup></strong><a href="#fn:1" rel="footnote">组织成一批**，然后由计算机系统自动连续地执行这批作业，而无需人工干预每个作业的执行过程。</a></p><a href="#fn:1" rel="footnote"></a></li><a href="#fn:1" rel="footnote"><li><p><strong>执行系统阶段</strong> (20世纪60年代初期): 通道和中断技术出现，通道作为专门用于控制I/O设备的处理器，可以与主CPU并行工作，提高了I/O效率。SPOOLing（Simultaneous Peripheral Operation On-Line）技术也随之产生。</p></li></a></ul><a href="#fn:1" rel="footnote"></a></li><a href="#fn:1" rel="footnote"><li><p><strong>操作系统的完善</strong>:</p><ul><li><strong>多道批处理系统</strong> (60年代初期): 主机中同时运行多个作业，最大限度地提高了资源利用率。标志着操作系统走向成熟，但也带来了互斥、同步、通讯、死锁、饥饿等问题。</li><li><strong>分时系统</strong> (60年代初、中期): 满足程序员联机操作的需求，一台主机连接多个终端，实现交互式工作。</li><li><strong>实时处理系统</strong> (60年代中期): 针对工业控制、医疗控制、航班订票等领域，要求满足时间约束条件。</li><li><strong>通用操作系统</strong> (60年代后期): 结合了多道批处理、分时和实时系统的功能。</li></ul></li></a><li><a href="#fn:1" rel="footnote"></a><p><a href="#fn:1" rel="footnote"><strong>操作系统的发展</strong>: 随着计算机体系结构的发展，出现了网络操作系统、分布式操作系统、多处理机操作系统、单用户操作系统、面向对象操作系统、嵌入式操作系统和智能卡操作系统等。"&gt;[1]</a>阶段** (20世纪50年代): 出现了操作系统的雏形。<br>* <strong>联机批处理</strong>: 在这种模式下，输入设备（如读卡机）直接连接到主计算机。作业通过读卡机直接输入到计算机中进行处理，然后结果可以直接输出。优点是摆脱了人工干预，缺点是I/O操作慢，主机等待时间长。<br>* <strong>脱机批处理</strong>: 在这种模式下，不再是输入设备直接连接主计算机，而是通过一台“卫星机”（通常是小型计算机）预先将作业从慢速的输入设备（如读卡机）读取出来，并存储到高速的存储介质（如磁带）上，形成“输入磁带”。然后，主计算机从这些高速存储介质上读取作业进行处理。输出同理。优点是减少了主机等待I/O操作时间，缺点是需要人工搬运磁带和额外的卫星机。</p></li></ul><h3 id="操作系统特性">操作系统特性</h3><ul><li><strong>并发性</strong>: 多个程序在宏观上同时向前推进，包括用户程序与用户程序并发、用户程序与OS并发、OS与OS并发。</li><li><strong>共享性</strong>: 多个程序在操作系统的协调和控制下共用系统中的各种软硬件资源 。</li><li><strong>异步性</strong>（随机性）: 多个程序以不可预知的速度向前推进。</li><li><strong>虚拟性</strong>: 将物理资源（如CPU、内存、独占设备）改造为多个虚拟资源（如多个虚拟CPU、虚拟存储、虚拟设备）。</li></ul><h3 id="操作系统类型">操作系统类型</h3><ul><li><strong>多道批处理操作系统</strong>: 同时容纳多个作业，分批进入系统，通过输入井和输出井进行缓冲和作业调度，目标是提高资源利用率和吞吐量。</li><li><strong>分时操作系统</strong>: 一个主机连接多个终端，具有多路性、交互性和独占性（每个用户仿佛拥有一台虚拟机）的特点。典型系统有CTSS、Multics和UNIX。</li><li><strong>实时操作系统</strong>: 响应及时、可靠性高，应用于实时控制（如工业控制）和实时信息处理（如航班订票）。</li><li><strong>通用操作系统</strong>: 兼具分时、实时和批处理功能，目标是提高处理能力和扩展应用领域，常见模式是分时（前台）+批处理（后台）或实时（前台）+批处理（后台）。</li><li><strong>单用户操作系统</strong>: 同一时刻只有一个用户使用，但支持多进程、多线程，主要应用于台式机和笔记本。</li><li><strong>网络操作系统 (NOS)</strong>: 建立在宿主操作系统之上，提供网络通讯、网络资源共享和网络服务（如数据库服务器、FTP服务器、电子邮件服务器等），但没有透明视图。</li><li><strong>分布式操作系统 (DOS)</strong>:<ul><li><strong>紧耦合</strong>: 由多机系统发展而来（多CPU），有公共内存，如多处理机操作系统。</li><li><strong>松散耦合</strong>: 由计算机网络发展而来（多Host），无公共内存和公共时钟。</li><li>特征包括统一的操作系统、资源的进一步共享（内存、CPU）、高可靠性和透明性。</li><li>目标是进一步共享资源，实现负载均衡和计算加速，通过作业迁移和进程迁移来实现。</li></ul></li><li><strong>多处理机操作系统</strong>: 管理和使用多个CPU，在具有公共内存的多CPU系统（如对称多处理机系统SMP）中运行，复杂性在于有多个主动体（CPUs），例如UNIX, Linux, Windows。</li><li><strong>嵌入式操作系统</strong>: 嵌入在掌上电脑、通讯设备、车载系统、信息家电等非计算机类设施上，特点是微内核结构，核心小，适应范围广，可靠性高，但效率可能较低。</li><li><strong>多媒体操作系统</strong>: 具有一般操作系统功能，并具有多媒体底层扩充模块，支持多媒体信息的采集、编辑、播放和传输。它不是一种独立的操作系统类型，而是现代操作系统的一种特性。</li><li><strong>智能卡操作系统 (SC-OS)</strong>: 支持多个applet并发执行，提供必要的资源管理，应用于带有CPU芯片和ROM的智能卡，有的智能卡支持Java applet的下载和执行。</li></ul><h3 id="操作系统运行环境">操作系统运行环境</h3><ul><li><strong>定时装置</strong>: 包括绝对时钟（记载实际时间）和间隔时钟（定时发生中断，是实现多道程序的基础）。</li><li><strong>系统栈</strong>: 用于保存中断现场、函数调用返回点、参数、局部变量、返回值等。</li><li><strong>特权指令与非特权指令</strong>: 特权指令只能在管态下执行（影响系统状态，如关中断、IO等），非特权指令所有程序可用（不影响系统状态，如取数、四则运算等）。</li><li><strong>处理机状态及状态转换</strong>: 处理机有系统态（管态、核态）和用户态（目态、常态）。状态转换包括管态到目态（特权指令）和目态到管态（中断、trap）。</li><li><strong>地址映射机构</strong>: 将逻辑地址（程序中产生的地址）转换为物理地址（存储器地址），地址映射由硬件高效完成。</li><li><strong>存储保护设施</strong>: 防止应用程序侵犯操作系统空间或其它用户空间，通过地址检查（越界检查、越权检查）实现。</li><li><strong>中断装置</strong>: 发现并响应中断的硬件机构，保存当前现场，并根据中断向量加载新的程序状态字和程序计数器。</li><li><strong>通道与DMA</strong>: 通道是负责I/O操作的处理机，有自己的指令系统和运控部件，可与主CPU并行；DMA（直接存储器访问）没有独立指令系统，主要用于简单块传输。</li><li><strong>I/O保护</strong>: 将所有I/O指令定义为特权指令，以方便使用并防止冲突。</li></ul><h3 id="操作系统界面形式">操作系统界面形式</h3><ul><li><strong>交互终端命令</strong> (Command Language): 如UNIX shell。</li><li><strong>图形界面</strong> (GUI—Graphic User Interface)</li><li><strong>作业控制语言</strong> (Job Control Language, JCL): 用于描述作业、作业步和资源需求。</li><li><strong>系统调用命令</strong> (OS API): 提供高级语言或汇编语言形式的接口，供应用程序调用操作系统服务。</li></ul><h3 id="操作系统的运行机理">操作系统的运行机理</h3><p>主要通过中断处理、程序切换、保存和恢复现场等机制，实现多个程序在硬件上的运行和OS对程序的控制。</p><h3 id="研究操作系统的几种观点">研究操作系统的几种观点</h3><ul><li><strong>进程观点</strong>: 操作系统支持进程及其之间的协同（互斥、同步、通讯）。</li><li><strong>资源管理观点</strong>: 操作系统作为资源管理者，负责方便使用和防止冲突。</li><li><strong>虚拟机观点</strong>: 操作系统是对硬件的第一次扩充，提供虚拟资源，如将一个实的CPU虚拟为多个虚拟CPU、内存+外存虚拟为虚拟存储、独占设备+共享虚拟为虚拟设备。</li></ul><h3 id="系统举例">系统举例</h3><ul><li><strong>Linux系统</strong>:<ul><li><strong>历史</strong>: 从1991年的0.01版发展到1996年的2.0版，支持多种平台、对称多处理、核心级线程、模块动态连接等。</li><li><strong>特点</strong>: 源代码开放、免费、稳定可靠、速度快、效率高、内核模块化好、功能完善、网络支持优势、标准化好。</li></ul></li><li><strong>Windows 10系统</strong>:<ul><li>基于NT技术构建，面向个人计算机平台，本质上是单用户系统，但可以组网并提供网络服务。</li><li><strong>特点</strong>: 具有多任务（包括多进程、多线程）管理功能，支持对称多处理，支持客户/服务器计算模式，设计上大量采用面向对象思想，提供友好的图形操作界面，但不是“纯”微内核结构。</li></ul></li></ul><h2 id="进程、线程与作业">进程、线程与作业</h2><h3 id="多道程序设计">多道程序设计</h3><ul><li><strong>目的</strong>：提高处理机、设备、内存等各种资源的利用率，从而提高系统效率。</li><li><strong>单道程序设计的缺点</strong>：处理机、设备和内存利用率低。</li><li><strong>多道程序设计提出</strong>：通过增加同时运行程序的道数来提高资源利用率和系统效率。</li><li><strong>问题</strong>：处理机资源管理（程序数多于处理机数时的分配）、存储资源管理（地址空间的独立性、共享性、内外存分配）和设备资源管理（分配策略、I/O控制）。</li><li><strong>平衡</strong>：道数过少导致资源利用率低；道数过多则系统开销增大，程序响应速度下降。</li></ul><h3 id="进程的引入">进程的引入</h3><h4 id="进程的概念">进程的概念</h4><ul><li><strong>定义</strong>：可参与并发执行的程序称为进程；进程是具有一定独立功能的程序关于一个数据集合的一次运行活动。</li><li><strong>强调</strong>：动态性（执行中的程序）和并发性（可与其他进程同时执行）。</li><li><strong>并发和并行</strong>：<ul><li><strong>并发</strong>：宏观上同时进行，“交替执行”，不要求多个CPU。</li><li><strong>并行</strong>：微观上同时进行，要求多个CPU。</li></ul></li></ul><h4 id="进程状态及状态转换">进程状态及状态转换</h4><ul><li><strong>基本状态</strong>：<ul><li><strong>运行态</strong>：占有CPU正在向前推进。</li><li><strong>就绪态</strong>：可以运行，但未得到CPU。</li><li><strong>等待态</strong>：等待某一事件发生（如申请资源未得到、启动I/O）。</li></ul></li><li><strong>状态转换</strong>：<ul><li>就绪 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">⇒</span></span></span></span> 运行：获得处理机。</li><li>运行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">⇒</span></span></span></span> 就绪：被剥夺处理机。</li><li>运行 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">⇒</span></span></span></span> 等待：申请资源未得到或启动I/O。</li><li>等待 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇒</mo></mrow><annotation encoding="application/x-tex">\Rightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">⇒</span></span></span></span> 就绪：得到资源或I/O中断完成。</li></ul></li><li><strong>特性</strong>：进程状态转换由操作系统完成，对用户透明；进程在其生存期内经过多次状态转换，体现了动态性和并发性。</li></ul><h4 id="进程控制块-PCB">进程控制块 (PCB)</h4><ul><li><strong>定义</strong>：标志进程存在的数据结构，保存系统管理进程所需的所有信息。</li><li><strong>内容</strong>：进程标识 (pid)、进程状态、现场信息、调度参数、所属用户 (uid)、家族联系、地址信息、打开文件、消息指针、队列指针等。</li></ul><h4 id="进程的组成与上下文">进程的组成与上下文</h4><ul><li><strong>进程的组成</strong>：<ul><li><strong>进程控制块 (PCB)</strong>：建立/撤销PCB对应进程的建立/撤销。</li><li><strong>程序</strong>：包括代码 (code)、数据 (data) 和堆栈 (stack+heap)。栈用于保存返回点、参数、返回值和局部变量；堆用于动态变量。</li></ul></li><li><strong>进程影像</strong>：进程的程序（代码和数据）。</li><li><strong>进程上下文</strong>：进程的物理实体与支持进程运行的物理环境的总称，包括PCB和程序。系统环境包括地址空间、系统栈、打开文件表等。</li><li><strong>上下文切换</strong>：从一个进程的上下文转换到另一个进程的上下文。</li><li><strong>系统开销</strong> (System Overhead)：运行操作系统程序完成系统管理工作所花费的时间和空间。</li></ul><h4 id="进程的队列">进程的队列</h4><ul><li>PCB构成队列，可以是FIFO或其他调度算法决定的队列（单向或双向）。</li><li><strong>类型</strong>：就绪队列（一个或若干个）、等待队列（每个等待事件一个）、运行指示字（每个处理机一个）。</li></ul><h4 id="进程的类型与特征">进程的类型与特征</h4><ul><li><strong>进程类型</strong>：<ul><li><strong>系统进程</strong>：运行操作系统程序，完成系统管理（服务）功能（如UNIX中的sched、init）。</li><li><strong>用户进程</strong>：运行用户（应用）程序，为用户服务（如UNIX中的vi、shell、cc）。</li></ul></li><li><strong>进程特征</strong>：<ul><li><strong>并发性</strong>：可以与其他进程一道向前推进 。</li><li><strong>动态性</strong>：动态产生、消亡，生存期内状态动态变化。</li><li><strong>独立性</strong>：一个进程是可调度的基本单位。</li><li><strong>交往性</strong>：同时运行的进程可能发生相互作用。</li><li><strong>异步性</strong>：进程以各自独立、不可预知的速度向前推进。</li><li><strong>结构性</strong>：每个进程有一个PCB。</li></ul></li></ul><h4 id="进程间相互联系与相互作用">进程间相互联系与相互作用</h4><ul><li><strong>相互联系</strong>：<ul><li><strong>相关进程</strong>：同一家族的进程，可以共享文件，需要相互通讯，协调推进速度；父进程可以监视子进程，子进程完成父进程交给的任务。</li><li><strong>无关进程</strong>：没有逻辑关系但同时执行的进程，可能存在资源竞争关系，导致互斥、死锁、饿死。</li></ul></li><li><strong>相互作用</strong>：<ul><li><strong>直接相互作用</strong>：发生在相关进程之间（如同步、发送/接收消息）。</li><li><strong>间接相互作用</strong>：发生在任何进程之间（如资源竞争导致的保持-等待状态）。</li></ul></li></ul><h4 id="进程的创建与撤销">进程的创建与撤销</h4><ul><li><strong>进程的创建</strong>：建立PCB，分配内存，加载程序，入就绪队列。UNIX中通过<code>fork()</code>创建子进程，<code>exec()</code>加载并执行新程序。</li><li><strong>进程的撤销</strong>：释放资源，撤销PCB，通知父进程。UNIX中通过<code>exit()</code>自我结束，<code>kill()</code>结束其他进程。</li><li><strong>父子进程关系</strong>：除初始进程外，其他进程由父进程创建，形成进程家族。</li></ul><h4 id="进程与程序的联系与差别">进程与程序的联系与差别</h4><ul><li><strong>联系</strong>：进程包括一个程序，进程存在的目的就是执行这个程序。</li><li><strong>差别</strong>：<ul><li>程序是静态的，进程是动态的。</li><li>程序可长期保存，进程有生存期。</li><li>一个程序可对应多个进程，一个进程只能执行一个程序。</li></ul></li></ul><h4 id="UNIX进程组成-映像">UNIX进程组成 (映像)</h4><ul><li><strong>组成</strong>：包括系统空间（Proc结构、Text结构、User结构、系统栈）和用户空间（进程堆栈、进程数据、进程代码）。</li><li><strong>Proc结构</strong>：保存进程无论在内存还是外存时都需要的信息。</li><li><strong>User结构</strong>：保存仅当进程在内存时才需要的信息，可随进程程序一起移到外存。</li><li><strong>Text结构</strong>：描述代码段的信息。</li></ul><h4 id="UNIX进程的创建与撤销">UNIX进程的创建与撤销</h4><ul><li><strong><code>fork()</code></strong>：创建子进程，子进程是父进程的复制品（复制地址空间和控制结构）。父进程返回子进程pid，子进程返回0。</li><li><strong><code>execl()</code></strong>：加载并执行新程序，覆盖原有程序，从第一条指令开始执行。</li><li><strong><code>exit(status)</code></strong>：进程自我结束，通知父进程。</li><li><strong><code>wait(&amp;status)</code></strong>：父进程等待子进程终止，返回终止子进程编号和状态。</li><li><strong><code>vfork()</code> 和 <code>fork()</code></strong>：<ul><li><strong><code>fork()</code></strong>：复制地址空间和控制结构，父子进程有独立的数据拷贝，开销大，不适合加载新程序或数据共享。</li><li><strong><code>vfork()</code></strong>：只复制控制结构，不复制地址空间，父子进程共享地址空间。适用于子进程立即调用<code>execve()</code>改变其虚拟地址空间的情况。</li></ul></li></ul><h3 id="线程与轻进程">线程与轻进程</h3><h4 id="线程的引入">线程的引入</h4><ul><li><strong>问题</strong>：进程切换开销大（上下文涉及PCB、程序、系统环境等），相关进程耦合关系差。</li><li><strong>解决方案</strong>：引入多线程，在同一进程中包含多个线程。</li><li><strong>优点</strong>：上下文切换只涉及寄存器和用户栈，速度快；相关线程之间通讯方便快捷。</li></ul><h4 id="线程的概念">线程的概念</h4><ul><li><strong>定义</strong>：进程中一个相对独立的执行流。</li><li><strong>进程 vs. 线程</strong>：进程是资源分配单位，线程是执行单位。</li><li><strong>多线程优点</strong>：切换速度快（地址空间不变），系统开销小，通讯容易（共享数据空间）。</li></ul><h4 id="线程结构">线程结构</h4><ul><li>多线程结构中，一个进程内包含多个线程，它们共享进程的代码段、数据段和堆，但每个线程有独立的程序计数器、栈和寄存器。</li></ul><h4 id="线程控制块-TCB">线程控制块 (TCB)</h4><ul><li><strong>定义</strong>：标志线程存在的数据结构，包含对线程管理所需的所有信息。</li><li><strong>内容</strong>：线程标识、线程状态、调度参数、现场（通用寄存器、PC、SP）、链接指针。</li><li><strong>存放位置</strong>：用户级线程的TCB在目态空间，核心级线程的TCB在系统空间。</li></ul><h4 id="线程的实现">线程的实现</h4><ul><li><strong>用户级别线程 (User-level thread)</strong>：<ul><li><strong>实现方法</strong>：基于库函数，系统不可见；线程创建、撤销、状态转换在目态完成；TCB在用户空间，每个进程一个系统栈。</li><li><strong>优点</strong>：不依赖于操作系统，调度灵活；同一进程内多线程切换速度快（不需进入操作系统）。</li><li><strong>缺点</strong>：同一进程中多个线程不能真正并行；一个线程进入系统受阻，进程中其他线程不能执行。</li></ul></li><li><strong>核心级别线程 (Kernel-level thread)</strong>：<ul><li><strong>实现方法</strong>：基于系统调用；创建、撤销、状态转换由操作系统完成。</li><li><strong>优点</strong>：同一进程内多线程可以并行执行；一线程进入核心等待，其他线程仍可执行。</li><li><strong>缺点</strong>：系统开销大，同一进程内多线程切换速度慢；调度算法不能灵活控制。</li></ul></li><li><strong>混合线程 (Hybrid approach)</strong>：<ul><li><strong>Solaris为例</strong>：结合了用户级线程、轻量级进程 (LWP) 和核心级线程。</li><li><strong>用户级线程</strong>：由库程序支持（创建、调度），可与LWP多对多。</li><li><strong>轻量级进程 (LWP)</strong>：由库程序支持，对操作系统可见，每个任务至少一个LWP。只有与LWP关联的用户线程才能向前推进。</li><li><strong>核心级线程</strong>：由内核支持，每个LWP与唯一的、对应的核心线程。核心线程可与CPU多对多或多对一。</li></ul></li></ul><h4 id="线程的应用">线程的应用</h4><ul><li><strong>内在多控制流，需要共享数据</strong>：如生产-消费问题，多线程优于多进程（快100倍）。</li><li><strong>提高处理机与设备的并行性</strong>：在多处理机环境下提高处理机利用率，加快进程推进速度。<ul><li><strong>例子</strong>：Word字处理（交互编辑、词法检查、定时保存使用不同线程）；HTTP服务器（对每个HTTP请求弹出一个线程）。</li></ul></li></ul><h4 id="Java线程">Java线程</h4><ul><li><strong>状态</strong>：新建 (New)、可运行 (Runnable)、封锁 (Blocked)、终止 (Dead)。</li><li><strong>转换</strong>：通过<code>start()</code>、<code>sleep()</code>、<code>suspend()</code>、I/O、<code>stop()</code>、<code>resume()</code>等方法进行状态转换。</li><li><strong>JVM与OS线程</strong>：Java线程由JVM支持，JVM位于操作系统之上；Java线程与操作系统线程的对应关系由JVM确定（如Windows NT的JVM为一对一，Solaris的JVM为多对多）。</li></ul><h3 id="作业-Job">作业 (Job)</h3><ul><li><strong>概念</strong>：用户要求计算机系统为其完成的计算任务集合。</li><li><strong>作业步 (Job Step)</strong>：作业处理过程中一个相对独立的步骤，通常一个作业步可由一个进程完成，某些作业步之间可以并行。</li><li><strong>作业分类</strong>：批处理作业和交互式作业。</li></ul><h4 id="批处理作业：">批处理作业：</h4><ul><li><strong>作业控制语言 (JCL)</strong>：描述批处理作业控制意图的语言，由JCL语句序列组成。</li><li><strong>作业控制程序</strong>：解释并处理作业说明书的程序。</li><li><strong>作业控制进程</strong>：执行作业控制程序的进程，负责读入作业内容、释放输入井空间、顺序取作业控制语句、执行作业步（可能创建子进程）、申请输出井空间、输出作业结果、进程自我终止。</li></ul><h4 id="交互式作业">交互式作业</h4><ul><li><strong>账户管理</strong>：通过<code>/etc/passwd</code>文件管理用户信息（用户名、口令、用户根目录、同组用户、余额等）。</li><li><strong>创建与撤销</strong>：由用户提供信息，系统操作员建立/删除用户目录和文件，并在<code>passwd</code>文件中增删条目。</li><li><strong>注册与注销</strong>：包括显式注销 (<code>logoff</code>) 和隐式注销（如长时间无输入命令）。</li><li><strong>命令解释程序</strong>：负责读取终端命令、分析、处理（内部命令、建立子进程、后台命令、等待子进程结束、输出子进程号、记账等）。</li></ul><div class="note note-primary"><p><strong>小结：作业、进程、线程</strong></p><ul><li><strong>作业与进程</strong>：作业进入内存后变为进程；一个作业通常与多个进程相对应。</li><li><strong>进程与线程</strong>：一个进程一般包含多个线程，至少包含一个线程；不支持多线程的系统可视为单线程进程。</li></ul></div><h4 id="Linux进程与线程">Linux进程与线程</h4><ul><li><strong>统一表示</strong>：进程与线程在系统内部具有统一的表示。</li><li><strong><code>clone()</code>系统调用</strong>：用于创建线程，与<code>fork()</code>不同，可通过<code>sharing_flag</code>参数控制共享资源（如CLONE_VM、CLONE_FILES、CLONE_SIGHAND、CLONE_PID）。</li></ul><h4 id="Windows-10-进程、线程与纤程">Windows 10 进程、线程与纤程</h4><ul><li><strong>进程创建</strong>：Win32应用执行<code>CreateProcess</code>调用，Win32子系统调用进程管理器创建进程对象和线程，然后返回句柄。</li><li><strong>进程对象属性</strong>：进程ID、访问令牌、基础优先级、默认亲和处理器、配额限制、执行时间、I/O计数器、异常/调试端口、退出状态等。</li><li><strong>线程对象属性</strong>：客户端ID、线程上下文、动态优先级、处理器亲和掩码、已执行时间、警觉状态、挂起计数、非角色令牌、终止端口、终止状态等。</li></ul><h2 id="参考和注解">参考和注解</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span>“批处理”是指将多个作业或程序<strong>组织成一批</strong>，然后由计算机系统自动连续地执行这批作业，而无需人工干预每个作业的执行过程。<pre><code class="hljs">* **执行系统阶段** (20世纪60年代初期): 通道和中断技术出现，通道作为专门用于控制I/O设备的处理器，可以与主CPU并行工作，提高了I/O效率。SPOOLing（Simultaneous Peripheral Operation On-Line）技术也随之产生。
</code></pre><ul><li><strong>操作系统的完善</strong>:<ul><li><strong>多道批处理系统</strong> (60年代初期): 主机中同时运行多个作业，最大限度地提高了资源利用率。标志着操作系统走向成熟，但也带来了互斥、同步、通讯、死锁、饥饿等问题。</li><li><strong>分时系统</strong> (60年代初、中期): 满足程序员联机操作的需求，一台主机连接多个终端，实现交互式工作。</li><li><strong>实时处理系统</strong> (60年代中期): 针对工业控制、医疗控制、航班订票等领域，要求满足时间约束条件。</li><li><strong>通用操作系统</strong> (60年代后期): 结合了多道批处理、分时和实时系统的功能。</li></ul></li><li><strong>操作系统的发展</strong>: 随着计算机体系结构的发展，出现了网络操作系统、分布式操作系统、多处理机操作系统、单用户操作系统、面向对象操作系统、嵌入式操作系统和智能卡操作系统等。</li></ul><a href="#fnref:1" rev="footnote" class="footnote-backref">↩</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" class="category-chain-item">课程笔记</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="print-no-link">#操作系统</a></div></div><div class="license-box my-3"><div class="license-title"><div>操作系统复习</div><div>https://blog.kisechan.space/2025/notes-operating-system/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Kisechan</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年5月23日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年5月24日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"></article><article class="post-next col-6"><a href="/2025/notes-database-3/" title="数据库原理 课程笔记 (3)"><span class="hidden-mobile">数据库原理 课程笔记 (3)</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="gitalk-container"></div><script type="text/javascript">Fluid.utils.loadComments("#gitalk-container",function(){Fluid.utils.createCssLink("/css/gitalk.css"),Fluid.utils.createScript("https://lib.baomitu.com/gitalk/1.8.0/gitalk.min.js",function(){var e=Object.assign({clientID:"Ov23liWYIiu2jxReIEhB",clientSecret:"d7b44817ae2553b2175fdecfde9718b582bdc653",repo:"Comment-Kisechan",owner:"Kisechan",admin:["Kisechan"],language:"zh-CN",labels:["Gitalk"],perPage:10,pagerDirection:"last",distractionFreeMode:!1,createIssueManually:!0,proxy:"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token",enabled:!0},{id:"a5d538e8aceb40b702a413e2cc3d29f8"});new Gitalk(e).render("gitalk-container")})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js",function(){mermaid.initialize({theme:"default"}),Fluid.utils.listenDOMLoaded(function(){Fluid.events.registerRefreshCallback(function(){"mermaid"in window&&mermaid.init()})})})</script><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><div><span>Frame by </span><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <span>| Theme </span><a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div style="font-size:.85rem"><span id="timeStart">本站自 2024 年 4 月 26 日 20 : 46 : 17 起</span> <span><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></span><span><span><br>本站总访问量&nbsp<span id="busuanzi_value_site_pv"></span>&nbsp次</span> <span>总访客数&nbsp<span id="busuanzi_value_site_uv"></span>&nbsp人 &nbsp<br></span></span><span>&copy; 2024 - 2025 By <a href="https://github.com/Kisechan" target="_blank" rel="nofollow noopener"><strong>Kisechan</strong></a><br></span><span>今天也很喜欢你！</span><br><a href="https://icp.gov.moe/?keyword=20251453" target="_blank">萌ICP备20251453号</a></div></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!0,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>var relativeDate=function(){var t,e,i,n,m=document.getElementById("updated-time");m&&(e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/,(i=(t=m.textContent).match(e))&&(n=moment(i[0]).fromNow(),m.textContent=t.replace(e,n)),m.style.display="")};Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/moment.min.js",function(){"zh-cn".startsWith("en")?relativeDate():Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js",function(){relativeDate()})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/cursor.js"></script><script src="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="/js/boot.js"></script><script type="text/javascript">var originalTitle=document.title;window.onblur=function(){document.title="等你回来哦"},window.onfocus=function(){document.title=originalTitle}</script><div id="tooltip-rightmenu" class="tooltip-rightmenu">如果需要使用原始右键菜单请按下 <strong>Ctrl+右键</strong></div><div id="tooltip-clipboard" class="tooltip-rightmenu">链接复制成功！</div><div id="rightmenu-wrapper"><ul class="list-v rightmenu" id="rightmenu-content"><li class="navigation menuNavigation-Content"><a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fa fa-arrow-left rightmenu-icon"></i></a> <a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fa fa-arrow-right rightmenu-icon"></i></a> <a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fa fa-refresh rightmenu-icon"></i></a> <a aria-label="TOP" href="#" role="button"><i class="fa fa-arrow-up rightmenu-icon"></i></a></li><hr class="menuLoad-Content" style="display:block"><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><span><i class="fa fa-search rightmenu-icon"></i> 站内搜索</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="toggleFullScreen()"><span><i class="fa fa-arrows-alt rightmenu-icon"></i> 切换全屏</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="copyPageUrl()"><span><i class="fa fa-clipboard rightmenu-icon"></i> 复制链接</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="scrollToComments()"><span><i class="fa fa-commenting rightmenu-icon"></i> 立即评论</span></a></li><hr class="menuLoad-Content" style="display:block"><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" target="_blank" rel="noopener" href="https://www.kisechan.space/" data-group="link"><span><i class="fa fa-info-circle rightmenu-icon"></i> 关于本站</span></a></li></ul></div><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link href="/css/custom_right_menu_icons.css" type="text/css" rel="stylesheet"><script src="/js/right_menu.js" type="text/javascript"></script><link href="/css/right_menu.css" type="text/css" rel="stylesheet"><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1})</script></body></html>