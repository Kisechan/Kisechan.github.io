<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://images.kisechan.space/icon.jpg"><link rel="icon" href="https://images.kisechan.space/icon.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#004e66"><meta name="author" content="Kisechan"><meta name="keywords" content=""><meta name="description" content="关于 数据库管理系统（ DBMS ）是：  一组相关数据的集合 一组用于访问这些数据的程序的集合  数据库则是相关数据的集合，是存放数据的地方。 数据库的发明是为了填补原有文件系统的缺陷。 文件系统的缺陷  数据的冗余和冲突   多个人创建不同的文件包含相同的文件。 一个数据的不同副本不一致。   数据访问困难   不同的人建立的文件格式五花八门 缺乏标准化   数据孤岛   数据分散在不同格式的"><meta property="og:type" content="article"><meta property="og:title" content="数据库原理 课程笔记 (1)"><meta property="og:url" content="https://blog.kisechan.space/2025/notes-database-1/index.html"><meta property="og:site_name" content="Kisechan&#39;s Blog"><meta property="og:description" content="关于 数据库管理系统（ DBMS ）是：  一组相关数据的集合 一组用于访问这些数据的程序的集合  数据库则是相关数据的集合，是存放数据的地方。 数据库的发明是为了填补原有文件系统的缺陷。 文件系统的缺陷  数据的冗余和冲突   多个人创建不同的文件包含相同的文件。 一个数据的不同副本不一致。   数据访问困难   不同的人建立的文件格式五花八门 缺乏标准化   数据孤岛   数据分散在不同格式的"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://images.kisechan.space/notes-database-index.jpg"><meta property="article:published_time" content="2025-03-19T01:11:47.000Z"><meta property="article:modified_time" content="2025-04-29T06:43:29.415Z"><meta property="article:author" content="Kisechan"><meta property="article:tag" content="数据库"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://images.kisechan.space/notes-database-index.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><title>数据库原理 课程笔记 (1) - Kisechan&#39;s Blog</title><link rel="stylesheet" type="text/css" href="/css/loading.css"><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4890189_5ms3yf4n747.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/cursor.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"blog.kisechan.space",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:["home"]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"#"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!0,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4",collapseDepth:4},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("busuanzi_value_site_uv"),t=document.getElementById("busuanzi_value_site_pv"),n=new MutationObserver(e=>{for(let t of e)if("childList"===t.type){n.disconnect(),t.target.innerHTML=parseInt(t.target.innerHTML)+3837;break}}),i=new MutationObserver(e=>{for(let t of e)if("childList"===t.type){i.disconnect(),t.target.innerHTML=parseInt(t.target.innerHTML)+6136;break}}),r={childList:!0};n.observe(e,r),i.observe(t,r)});</script><meta name="generator" content="Hexo 7.2.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="Kisechan's Blog" type="application/atom+xml"></head><body><div><div class="real_mask" style="background-color:rgba(0,0,0,.3);width:100%;height:100%;position:fixed;z-index:-777"></div><div id="banner_video_insert"></div><div id="vvd_banner_img"></div></div><div id="banner"></div><div id="loader-box"><div class="loader-wrapper"><div class="loader"></div><div class="loader-text"><div>L</div><div>O</div><div>A</div><div>D</div><div>I</div><div>N</div><div>G</div><div></div><div></div><div></div></div></div><script>var endLoading=function(){document.body.style.overflow="auto",document.getElementById("loader-box").remove()};window.addEventListener("load",endLoading)</script></div><header><div class="header-inner" style="height:80vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>KISECHAN</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/" target="_self"><i class="iconfont icon-Homehomepagemenu"></i> <span>主站</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-newstextarticle"></i> <span>文章</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-categories"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-user"></i> <span>个人</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="https://www.kisechan.space/" target="_self"><i class="iconfont icon-info-fill"></i> <span>关于</span> </a><a class="dropdown-item" href="/playlist/" target="_self"><i class="iconfont icon-music"></i> <span>歌单</span> </a><a class="dropdown-item" href="https://github.com/Kisechan/Kisechan.github.io" target="_self"><i class="iconfont icon-git"></i> <span>仓库</span> </a><a class="dropdown-item" href="/atom.xml" target="_self"><i class="iconfont icon-rss"></i> <span>RSS订阅</span></a></div></li><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/tools/" target="_self"><i class="iconfont icon-tool-fill"></i> <span>工具</span></a></li><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/links" target="_self"><i class="iconfont icon-link"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://images.kisechan.space/202502042159748.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">数据库原理 课程笔记 (1)</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Kisechan </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-03-19 09:11" pubdate>2025年3月19日 上午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.8k 字 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></div><script type="text/javascript" src="/vvd_js/jquery.js"></script><div class="banner" id="banner"><div class="full-bg-img"></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="课程笔记" id="heading-311a46cfdaa3afda544e9285644f70d7" role="tab" data-toggle="collapse" href="#collapse-311a46cfdaa3afda544e9285644f70d7" aria-expanded="true">课程笔记 <span class="list-group-count">(6)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-311a46cfdaa3afda544e9285644f70d7" role="tabpanel" aria-labelledby="heading-311a46cfdaa3afda544e9285644f70d7"><div class="category-post-list"><a href="/2024/oop/" title="面向对象程序设计课程笔记" class="list-group-item list-group-item-action"><span class="category-post">面向对象程序设计课程笔记</span> </a><a href="/2024/linux-note/" title="Linux课程笔记" class="list-group-item list-group-item-action"><span class="category-post">Linux课程笔记</span> </a><a href="/2024/ds/" title="数据结构课程板子合集&amp;笔记" class="list-group-item list-group-item-action"><span class="category-post">数据结构课程板子合集&amp;笔记</span> </a><a href="/2025/notes-algorithm-analysis/" title="算法设计与分析 课程笔记" class="list-group-item list-group-item-action"><span class="category-post">算法设计与分析 课程笔记</span> </a><a href="/2025/notes-database-1/" title="数据库原理 课程笔记 (1)" class="list-group-item list-group-item-action active"><span class="category-post">数据库原理 课程笔记 (1)</span> </a><a href="/2025/notes-database-2/" title="数据库原理 课程笔记 (2)" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (2)</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">数据库原理 课程笔记 (1)</h1><p id="updated-time" class="note note-info" style="display:none">本文最后更新于 2025-04-29T14:43:29+08:00</p><div class="markdown-body"><h2 id="关于">关于</h2><p><strong>数据库管理系统</strong>（ DBMS ）是：</p><ul><li>一组相关数据的集合</li><li>一组用于访问这些数据的<strong>程序的集合</strong></li></ul><p><strong>数据库</strong>则是相关<strong>数据的集合</strong>，是存放数据的地方。</p><p>数据库的发明是为了填补原有文件系统的缺陷。</p><h3 id="文件系统的缺陷">文件系统的缺陷</h3><ol><li><strong>数据的冗余和冲突</strong></li></ol><ul><li>多个人创建不同的文件包含相同的文件。</li><li>一个数据的不同副本不一致。</li></ul><ol start="2"><li><strong>数据访问困难</strong></li></ol><ul><li>不同的人建立的文件格式五花八门</li><li>缺乏标准化</li></ul><ol start="3"><li><strong>数据孤岛</strong></li></ol><ul><li>数据分散在不同格式的文件中</li><li>难以编写检索程序，因为数据是割裂的</li></ul><ol start="4"><li><strong>完整性问题</strong></li></ol><ul><li>不能维护一致性约束——不能存在统一的机制让数据合法</li></ul><ol start="5"><li><strong>原子性问题</strong></li></ol><ul><li>传统文件系统不能保证事务的完整性，容易造成半成品数据</li></ul><ol start="6"><li><strong>并发访问</strong></li></ol><ul><li>传统文件系统不能协调并发访问，只能让程序员自己加锁</li></ul><ol start="7"><li><strong>安全性问题</strong><ul><li>不能精细管理谁能看哪些数据，修改哪些数据</li></ul></li></ol><h3 id="数据视角">数据视角</h3><p>数据视角就是<strong>从不同的角度去看待和管理数据</strong>。数据本身是一样的，但不同的人 / 层次看它的重点不同。</p><table><thead><tr><th style="text-align:center">视角</th><th style="text-align:center">关注点</th><th style="text-align:center">例如</th></tr></thead><tbody><tr><td style="text-align:center">物理视角</td><td style="text-align:center">数据<strong>怎么存在磁盘上</strong>，存储细节</td><td style="text-align:center">文件组织、索引结构、磁盘块管理</td></tr><tr><td style="text-align:center">逻辑视角</td><td style="text-align:center">数据<strong>怎么组织、联系</strong>，结构化表示</td><td style="text-align:center">表、列、外键</td></tr><tr><td style="text-align:center">用户视角</td><td style="text-align:center"><strong>用户需要看到什么数据</strong>，怎样屏蔽不相关的信息</td><td style="text-align:center">只显示学生姓名和成绩，不显示学号</td></tr></tbody></table><h4 id="数据抽象">数据抽象</h4><p>数据抽象就是<strong>数据视角的不同表达方式</strong>，也是指通过不同层次的抽象来隐藏数据的存储和实现细节，<strong>仅向用户展示必要的信息</strong>，从而简化数据库的设计、使用和维护。</p><p>数据抽象使得用户可以在不同层次上操作数据，<strong>而不必关心底层的物理存储结构或复杂的逻辑关系</strong>。</p><p>数据抽象有三层（ ANSI/SPARC 架构）：</p><ul><li><strong>物理层</strong><ul><li>数据在物理存储介质上的组织架构，涉及文件组织、索引、存储结构（ B+ 树等），优化存储效率和访问速度。</li></ul></li><li><strong>逻辑层</strong><ul><li>描述数据的完整组织逻辑，如表、关系、约束等。</li></ul></li><li><strong>视图层</strong><ul><li>针对用户，屏蔽掉一部分数据细节的层，例如规定哪些人可以看什么，哪些人不能看什么。</li></ul></li></ul><h4 id="数据模型">数据模型</h4><p>数据模型是描述数据、数据联系、数据意义、一致性约束的工具。</p><p>数据模型有<strong>数据结构</strong>（数据实体和它们的关系）、<strong>数据操作</strong>（ CURD ）、<strong>数据约束</strong>三部分。</p><p>数据模型主要有：</p><table><thead><tr><th style="text-align:center">数据模型</th><th style="text-align:center">解释</th></tr></thead><tbody><tr><td style="text-align:center">关系模型</td><td style="text-align:center">数据存在表格里（行和列），比如 MySQL、PostgreSQL</td></tr><tr><td style="text-align:center">实体-联系模型</td><td style="text-align:center">画图表示实体和它们之间的关系，常用于数据库设计阶段</td></tr><tr><td style="text-align:center">基于对象的数据模型</td><td style="text-align:center">数据看成对象（有属性、有方法），比如面向对象数据库</td></tr><tr><td style="text-align:center">半结构化数据模型</td><td style="text-align:center">数据不是固定表格的，比如JSON、XML这种</td></tr><tr><td style="text-align:center">网状数据模型</td><td style="text-align:center">数据通过复杂指针联系在一起，很像网络图</td></tr><tr><td style="text-align:center">层次数据模型</td><td style="text-align:center">数据是树状层级，比如父-子结构（早期的IBM IMS数据库用的）</td></tr></tbody></table><h4 id="实例和模式">实例和模式</h4><ul><li><p><strong>实例</strong>指的是<strong>存储的数据的集合</strong>，也叫快照。</p></li><li><p><strong>模式</strong>指的是数据库中<strong>存储和描述数据的格式</strong>，分为物理模式和逻辑模式两类，对应物理层和逻辑层。</p><ul><li>物理数据具有<strong>独立性</strong>，修改物理模式不会影响逻辑模式。例如把原本顺序存储的表，改成了用 B+ 树索引存储，但是上层应用（比如写 SQL 查学生表）完全不用改。</li></ul></li></ul><table><thead><tr><th style="text-align:center">概念</th><th style="text-align:center">解释</th></tr></thead><tbody><tr><td style="text-align:center">模式</td><td style="text-align:center"><strong>数据库的结构设计图</strong>。比如有哪些表、字段是什么类型、外键怎么关联（是“固定的结构”）。</td></tr><tr><td style="text-align:center">实例</td><td style="text-align:center"><strong>某一时刻数据库里实际存放的数据内容</strong>（是“活的数据”）。</td></tr></tbody></table><h3 id="数据库语言">数据库语言</h3><p>数据库语言是用来<strong>与数据库系统进行交流的语言</strong>，主要作用有两个：</p><ol><li>定义数据结构（表、字段、约束等）</li><li>操作数据内容（CURD）</li></ol><p>数据库语言由 DDL 和 DML 组成。</p><p>SQL 是使用最广泛的数据库语言，既包括 DDL，也包括 DML。</p><h4 id="DDL">DDL</h4><p>DDL 指的是 Data Definition Language ，<strong>数据定义语言</strong>。用于定义数据模式，规定一致性约束，授权用户。</p><h4 id="DML">DML</h4><p>DML 指的是 Data Manipulation Language ， <strong>数据操纵语言</strong>，用于数据的 CURD 。</p><h3 id="用户和管理员（-DBA-Database-Administrator）">用户和管理员（ DBA, Database Administrator）</h3><p><img src="https://images.kisechan.space/image-20250329152731147.png" srcset="/img/loading.gif" lazyload alt="用户和管理员"></p><p>数据库用户不负责建结构、配置系统，他们主要分为：</p><table><thead><tr><th style="text-align:center">类型</th><th style="text-align:center">说明</th><th style="text-align:center">举例</th></tr></thead><tbody><tr><td style="text-align:center">无经验用户</td><td style="text-align:center">不懂数据库，靠界面操作</td><td style="text-align:center">电商APP用户、取款机客户</td></tr><tr><td style="text-align:center">应用程序员</td><td style="text-align:center">编写应用程序与数据库交互</td><td style="text-align:center">开发银行软件、ERP系统的工程师</td></tr><tr><td style="text-align:center">富有经验用户</td><td style="text-align:center">会写 SQL，直接用 DML 做复杂查询</td><td style="text-align:center">数据分析师、科研人员</td></tr><tr><td style="text-align:center">专业用户</td><td style="text-align:center">设计特殊用途的数据库系统</td><td style="text-align:center">机器学习、图数据库、CAD 系统开发者</td></tr></tbody></table><p>数据库管理员（DBA）是数据库的“管家”，负责整体管理、优化、维护、安全性等<strong>系统性任务</strong>：</p><table><thead><tr><th style="text-align:center">DBA职责</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">定义模式</td><td style="text-align:center">创建数据库结构（表、字段、关系）</td></tr><tr><td style="text-align:center">定义存储结构</td><td style="text-align:center">决定用什么索引、分区、压缩策略等</td></tr><tr><td style="text-align:center">修改模式和物理组织</td><td style="text-align:center">随业务变化调整数据库结构</td></tr><tr><td style="text-align:center">设置访问权限</td><td style="text-align:center">决定谁能访问什么数据，保证数据安全</td></tr><tr><td style="text-align:center">监控性能和空间</td><td style="text-align:center">优化查询速度，防止磁盘爆满</td></tr><tr><td style="text-align:center">数据备份与恢复</td><td style="text-align:center">防止意外丢失数据，支持灾难恢复</td></tr></tbody></table><p>区分用户系统是为了防止危险操作、权责分明。</p><h2 id="关系模型">关系模型</h2><p><strong>数据</strong>是对客观事物的归纳，是记录或鉴别事物的符号，为事实或观测结果：</p><ul><li>归纳出<strong>共性</strong></li><li>抽象出<strong>个性</strong></li></ul><p>数据的基本结构有：</p><ul><li><strong>属性</strong>（ Attribute ）<ul><li>名字</li><li>取值域（ Domain ）</li><li>空值（ Null ）</li><li>原子性（ Atomic ）</li></ul></li><li><strong>关系</strong> （ Relation ）<ul><li>一个关系是若干<strong>属性域</strong>的<strong>笛卡尔积的子集</strong>。</li></ul></li></ul><h3 id="关系数据库的结构">关系数据库的结构</h3><h4 id="表">表</h4><p>关系数据库用“表”的形式来存储数据，每一个“表”就是一个“<strong>关系（Relation）</strong>”。</p><p>表是存储数据的二维结构，由<strong>表头（Schema）</strong>，列名和数据类型和<strong>表体（Instance）</strong>，具体的数据行组成。</p><h4 id="关系模式">关系模式</h4><p>关系模式是表的结构定义，包括：</p><ul><li>表名</li><li>属性名和数据结构</li><li>完整性约束</li></ul><h4 id="关系实例">关系实例</h4><p>是某一时刻表中的具体数据，是表的快照。</p><hr><table><thead><tr><th style="text-align:center">概念</th><th style="text-align:center">含义</th><th style="text-align:center">举例</th></tr></thead><tbody><tr><td style="text-align:center">关系</td><td style="text-align:center">一个<strong>二维表</strong></td><td style="text-align:center">学生表、员工表</td></tr><tr><td style="text-align:center">关系模式</td><td style="text-align:center">表的<strong>结构定义</strong>（字段名、数据类型、约束）</td><td style="text-align:center">学生(学号, 姓名, 年龄)</td></tr><tr><td style="text-align:center">关系实例</td><td style="text-align:center">表中某个时间点的<strong>数据内容</strong>（若干行）</td><td style="text-align:center">某一时刻，学生表中有 5 条记录</td></tr><tr><td style="text-align:center">表</td><td style="text-align:center"><strong>实际存储数据的结构</strong>；就是“关系”的表现形式</td><td style="text-align:center"><code>Student</code> 表</td></tr><tr><td style="text-align:center">关系数据库</td><td style="text-align:center"><strong>一组相关的表组成的</strong>数据库系统</td><td style="text-align:center">有学生表、课程表、选课表等</td></tr></tbody></table><h4 id="码">码</h4><p>码是用于<strong>唯一标识或建立关系的属性</strong>（列），主要有：</p><ul><li><strong>超码</strong><ul><li>一个或多个属性的集合，其中可能包含冗余属性</li><li>可在一个关系中唯一标识一个元组</li></ul></li><li><strong>候选码</strong><ul><li>标识一个元组的最小属性集合</li><li>一个表可以有多个候选码</li></ul></li><li><strong>主码</strong><ul><li>候选码中选出的唯一标识符</li><li>不能为 <code>NULL</code> ，且值唯一</li></ul></li><li><strong>外码</strong><ul><li>本关系/表中的某个属性恰好是另外一个关系里的主码</li><li>建立表间关系</li></ul></li></ul><hr><table><thead><tr><th style="text-align:center">名称</th><th style="text-align:center">定义</th><th style="text-align:center">说明</th></tr></thead><tbody><tr><td style="text-align:center">超码</td><td style="text-align:center">能唯一标识元组的属性<strong>集合</strong></td><td style="text-align:center">可以是多个字段组成</td></tr><tr><td style="text-align:center">候选码</td><td style="text-align:center"><strong>最小的超码</strong>，不能去掉字段</td><td style="text-align:center">可能有多个</td></tr><tr><td style="text-align:center">主码</td><td style="text-align:center">从候选码中选出的“主键”</td><td style="text-align:center">唯一、非空、不变</td></tr><tr><td style="text-align:center">外码</td><td style="text-align:center">指向另一个关系主码的属性</td><td style="text-align:center">用于建立表与表之间的联系</td></tr></tbody></table><pre><code class="mermaid">graph TD
    A[超码] --&gt; B[候选码]
    B --&gt; C[主码]
    D[外码] -. 是另一个表的主码 .-&gt; C

    B --&gt; F[其他候选码]

</code></pre><h4 id="模式图">模式图</h4><p>模式图是一个 <strong>图形化工具</strong>，表示一个关系数据库中各个关系（表）之间的结构与联系。</p><p>要素包括：</p><ul><li>每个矩形代表一个关系（表）；</li><li>每个矩形中列出该表的<strong>属性</strong>（字段）；<ul><li>主码一般加下划线；</li><li>外码一般用箭头指向它所引用的主码；</li></ul></li><li>箭头用于表示外码 → 主码的<strong>引用关系</strong>。</li></ul><p><img src="https://images.kisechan.space/schema-diagram.png" srcset="/img/loading.gif" lazyload alt="模式图（Schema Diagram）"></p><h3 id="关系代数">关系代数</h3><p>数据库查询语言是<strong>描述和访问数据库的功能</strong>。分为：</p><ul><li><strong>非过程化语言/描述式语言</strong><ul><li>只需要声明想要的结果，不需要过程。</li><li>用户只需要描述所需要的数据，查询系统会根据系统的优化器自动选择执行策略。</li><li><strong>SQL</strong> 是最典型的<strong>非过程化语言</strong>，你只需要描述你想要查询的数据，数据库系统会负责如何执行这个查询。</li></ul></li><li><strong>过程化语言</strong><ul><li>需要精确控制操作。</li><li><strong>关系代数</strong> 就是<strong>过程化语言</strong>的一种。你需要通过一系列操作来获取数据，比如选择、投影、联接等。</li></ul></li></ul><p>关系代数有六种基本运算和一些附加运算：</p><table><thead><tr><th style="text-align:center">运算</th><th style="text-align:center">符号</th><th style="text-align:center">描述</th><th style="text-align:center">示例</th><th style="text-align:center">功能说明</th></tr></thead><tbody><tr><td style="text-align:center">选择</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>σ</mi></mrow><annotation encoding="application/x-tex">\sigma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal" style="margin-right:.03588em">σ</span></span></span></span></td><td style="text-align:center">从关系中选出满足条件的元组（行）</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mrow><mtext>age</mtext><mo>&gt;</mo><mn>30</mn></mrow></msub><mo stretchy="false">(</mo><mtext>Employee</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sigma_{\text{age} &gt; 30}(\text{Employee})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0359em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">age</span></span><span class="mrel mtight">&gt;</span><span class="mord mtight">30</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">Employee</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">选出年龄大于30的员工</td></tr><tr><td style="text-align:center">投影</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi></mrow><annotation encoding="application/x-tex">\pi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal" style="margin-right:.03588em">π</span></span></span></span></td><td style="text-align:center">从关系中选出特定的属性（列）（去重）</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mtext>name,&nbsp;salary</mtext></msub><mo stretchy="false">(</mo><mtext>Employee</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi_{\text{name, salary}}(\text{Employee})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:-.0359em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">name,&nbsp;salary</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">Employee</span></span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">只显示姓名和薪水字段</td></tr><tr><td style="text-align:center">并集</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∪</mo></mrow><annotation encoding="application/x-tex">\cup</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5556em"></span><span class="mord">∪</span></span></span></span></td><td style="text-align:center">取两个关系中所有的元组（去重合并）</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>R</mtext><mo>∪</mo><mtext>S</mtext></mrow><annotation encoding="application/x-tex">\text{R} \cup \text{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">R</span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">S</span></span></span></span></span></td><td style="text-align:center">合并两个结构相同的关系</td></tr><tr><td style="text-align:center">差集</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo></mrow><annotation encoding="application/x-tex">-</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord">−</span></span></span></span></td><td style="text-align:center">得到只属于第一个关系的元组</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>R</mtext><mo>−</mo><mtext>S</mtext></mrow><annotation encoding="application/x-tex">\text{R} - \text{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord text"><span class="mord">R</span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">S</span></span></span></span></span></td><td style="text-align:center">从<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span>中去除所有也属于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>的元组</td></tr><tr><td style="text-align:center">乘积</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord">×</span></span></span></span></td><td style="text-align:center">将两个关系的元组两两组合</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>R</mtext><mo>×</mo><mtext>S</mtext></mrow><annotation encoding="application/x-tex">\text{R} \times \text{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord text"><span class="mord">R</span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">S</span></span></span></span></span></td><td style="text-align:center">用于构造连接</td></tr><tr><td style="text-align:center">换名</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span></td><td style="text-align:center">给关系或属性重新命名</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ρ</mi><mrow><mi>S</mi><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>R</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho_{S(a, b)}(R)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-.3552em"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.5198em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">a</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">b</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.3552em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="mclose">)</span></span></span></span></td><td style="text-align:center">将关系<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span>重命名为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>，属性改为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal">b</span></span></span></span></td></tr></tbody></table><h4 id="选择">选择</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>σ</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext>且</mtext><mi>p</mi><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mtext>成立</mtext><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\sigma_p(r)=\{t|t\in r且p(t)成立\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0359em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord cjk_fallback">且</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord cjk_fallback">成立</span><span class="mclose">}</span></span></span></span></span></p><p>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span></span></span></span> 为查询条件，由<strong>项目</strong>及项目之间的逻辑运算组成。其中，项目指的是：属性大于、小于（等）属性或常数。</p><h4 id="投影">投影</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>k</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi_{A_1,A_2,...,A_k}(r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3488em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.1512em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mclose">)</span></span></span></span></span></p><p>其中， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 为属性名。它的结果是：</p><ul><li>只包含给出的属性的一张 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span> 列的表</li><li>去掉了重复行</li></ul><h4 id="并集">并集</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>∪</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext>或</mtext><mi>t</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\cup s=\{t|t \in r或t\in s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5556em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7224em;vertical-align:-.0391em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord cjk_fallback">或</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></span></p><p>要求：</p><ul><li>属性个数相同</li><li>属性域兼容（也就是得对应，数据对数据字符串对字符串）</li></ul><p><img src="https://images.kisechan.space/image-20250329161423557.png" srcset="/img/loading.gif" lazyload alt="并集"></p><h4 id="差集">差集</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>−</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext>且</mtext><mi>t</mi><mo mathvariant="normal">∉</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r-s=\{t|t \in r且t\notin s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord cjk_fallback">且</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel"><span class="mord"><span class="mrel">∈</span></span><span class="mord vbox"><span class="thinbox"><span class="llap"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="inner"><span class="mord"><span class="mord">/</span><span class="mspace" style="margin-right:.0556em"></span></span></span><span class="fix"></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></span></p><p>要求同并集。</p><h4 id="笛卡尔积">笛卡尔积</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>×</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi>q</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext>且</mtext><mi>q</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\times s=\{tq|t\in r且q\in s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal" style="margin-right:.03588em">tq</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8778em;vertical-align:-.1944em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord cjk_fallback">且</span><span class="mord mathnormal" style="margin-right:.03588em">q</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></span></p><p>要求：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>∩</mo><mi>s</mi><mo>=</mo><mi mathvariant="normal">∅</mi></mrow><annotation encoding="application/x-tex">r\cap s=\emptyset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5556em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8056em;vertical-align:-.0556em"></span><span class="mord">∅</span></span></span></span></li><li>否则就要把交叉共有的那个属性换名</li></ul><p><img src="https://images.kisechan.space/image-20250329161858069.png" srcset="/img/loading.gif" lazyload alt="笛卡尔积"></p><h4 id="换名">换名</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>ρ</mi><mrow><mi>x</mi><mo stretchy="false">(</mo><msub><mi>A</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>A</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>A</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\rho_{x(A_1,A_2,...,A_n)}(E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-.3552em"></span><span class="mord"><span class="mord mathnormal">ρ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.5198em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight">...</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1645em"><span style="top:-2.357em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.3552em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.05764em">E</span><span class="mclose">)</span></span></span></span></span></p><p>将结果的名字换为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">x</span></span></span></span> ，且各个属性换名为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 。</p><hr><p>以下是补充运算：</p><h4 id="交集">交集</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>∩</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><mi>r</mi><mtext>且</mtext><mi>t</mi><mo>∈</mo><mi>s</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\cap s=\{t|t \in r且t\in s\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5556em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∩</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7224em;vertical-align:-.0391em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mord cjk_fallback">且</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">s</span><span class="mclose">}</span></span></span></span></span></p><p>要求同并集。</p><h4 id="自然连接">自然连接</h4><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: eqnarray at position 7: \begin{̲e̲q̲n̲a̲r̲r̲a̲y̲}̲
r\Join s&amp;=&amp;\{t…">\begin{eqnarray} r\Join s&amp;=&amp;\{tq|t\in r且q\in s且t[R\cap S]=s[R\cap S] \}\nonumber \\ ~&amp;=&amp; \Pi_{R\cup S}(\sigma_{\sum r.A_i=s.A_i}(r\times s)) \end{eqnarray}</p><p>其中， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span> 、 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span> 为关系模式。</p><p>就是自动合并两张列属性<strong>完全相同</strong>的表。</p><blockquote><p>对于两张表：</p><ul><li>Employee（员工）</li></ul><table><thead><tr><th style="text-align:center">emp_id</th><th style="text-align:center">name</th><th style="text-align:center">dept_id</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Alice</td><td style="text-align:center">10</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Bob</td><td style="text-align:center">20</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">Carol</td><td style="text-align:center">10</td></tr></tbody></table><ul><li>Department（部门）</li></ul><table><thead><tr><th style="text-align:center">dept_id</th><th style="text-align:center">dept_name</th></tr></thead><tbody><tr><td style="text-align:center">10</td><td style="text-align:center">Sales</td></tr><tr><td style="text-align:center">20</td><td style="text-align:center">HR</td></tr><tr><td style="text-align:center">30</td><td style="text-align:center">IT</td></tr></tbody></table><p>使用自然连接操作：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Employee⨝Department</mtext></mrow><annotation encoding="application/x-tex">\text{Employee} ⨝ \text{Department}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord text"><span class="mord">Employee</span></span><span class="mord">⨝</span><span class="mord text"><span class="mord">Department</span></span></span></span></span></span></p><p>合并的结果是：</p><table><thead><tr><th style="text-align:center">emp_id</th><th style="text-align:center">name</th><th style="text-align:center">dept_id</th><th style="text-align:center">dept_name</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Alice</td><td style="text-align:center">10</td><td style="text-align:center">Sales</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Bob</td><td style="text-align:center">20</td><td style="text-align:center">HR</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">Carol</td><td style="text-align:center">10</td><td style="text-align:center">Sales</td></tr></tbody></table></blockquote><h4 id="theta-连接"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02778em">θ</span></span></span></span> 连接</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><msub><mo>⋈</mo><mi>θ</mi></msub><mi>s</mi><mo>=</mo><msub><mi>σ</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><mi>r</mi><mo>×</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r\Join_\theta s=\sigma_\theta (r\times s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.655em;vertical-align:-.15em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:-.0359em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span></p><p>按照给出的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02778em">θ</span></span></span></span> 条件将两张表合并。</p><blockquote><p>延续上面的例子，如果对两张表采用操作：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Employee</mtext><msub><mtext>⨝</mtext><mrow><mtext>Employee</mtext><mi mathvariant="normal">.</mi><msub><mtext>dept</mtext><mtext>id</mtext></msub><mo mathvariant="normal">≠</mo><mtext>Department</mtext><mi mathvariant="normal">.</mi><msub><mtext>dept</mtext><mtext>id</mtext></msub></mrow></msub><mtext>Department</mtext></mrow><annotation encoding="application/x-tex">\text{Employee} ⨝_{\text{Employee}.\text{dept}_\text{id} \ne \text{Department}.\text{dept}_\text{id}} \text{Department}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0305em;vertical-align:-.3361em"></span><span class="mord text"><span class="mord">Employee</span></span><span class="mord"><span class="mord">⨝</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">Employee</span></span><span class="mord mtight">.</span><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">dept</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2302em"><span style="top:-2.2341em;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord text mtight"><span class="mord mtight">id</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2659em"><span></span></span></span></span></span></span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord text mtight"><span class="mord mtight">Department</span></span><span class="mord mtight">.</span><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">dept</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2302em"><span style="top:-2.2341em;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord text mtight"><span class="mord mtight">id</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2659em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.3361em"><span></span></span></span></span></span></span><span class="mord text"><span class="mord">Department</span></span></span></span></span></span></p><p>这个操作即<strong>找出所有员工和部门编号不一样的组合</strong>（而不是一样），并将它们合并。</p><p>结果是：</p><table><thead><tr><th style="text-align:center">emp_id</th><th style="text-align:center">name</th><th style="text-align:center">dept_id (Employee)</th><th style="text-align:center">dept_id (Department)</th><th style="text-align:center">dept_name</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">Alice</td><td style="text-align:center">10</td><td style="text-align:center">20</td><td style="text-align:center">HR</td></tr><tr><td style="text-align:center">1</td><td style="text-align:center">Alice</td><td style="text-align:center">10</td><td style="text-align:center">30</td><td style="text-align:center">IT</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Bob</td><td style="text-align:center">20</td><td style="text-align:center">10</td><td style="text-align:center">Sales</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">Bob</td><td style="text-align:center">20</td><td style="text-align:center">30</td><td style="text-align:center">IT</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">Carol</td><td style="text-align:center">10</td><td style="text-align:center">20</td><td style="text-align:center">HR</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">Carol</td><td style="text-align:center">10</td><td style="text-align:center">30</td><td style="text-align:center">IT</td></tr></tbody></table><p>可以注意到它并没有将相同的列名合并。</p></blockquote><hr><table><thead><tr><th style="text-align:center"></th><th style="text-align:center">自然连接</th><th style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02778em">θ</span></span></span></span> 连接</th></tr></thead><tbody><tr><td style="text-align:center">连接条件</td><td style="text-align:center"><strong>自动</strong>基于<strong>相同名字的属性</strong>进行匹配</td><td style="text-align:center">人工<strong>指定任意条件</strong></td></tr><tr><td style="text-align:center">结果</td><td style="text-align:center">合并两表相同列，避免重复显示</td><td style="text-align:center">直接按指定条件连接，两表列通常全保留</td></tr><tr><td style="text-align:center">典型符号</td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⋈</mo></mrow><annotation encoding="application/x-tex">\bowtie</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.51em;vertical-align:-.005em"></span><span class="mrel">⋈</span></span></span></span></td><td style="text-align:center"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>⋈</mo><mi>θ</mi></msub></mrow><annotation encoding="application/x-tex">\bowtie_{\theta}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.655em;vertical-align:-.15em"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">θ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span></td></tr><tr><td style="text-align:center">简单理解</td><td style="text-align:center">自动对相同字段合并</td><td style="text-align:center">手动指定如何连接</td></tr></tbody></table><h4 id="赋值">赋值</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>←</mo></mrow><annotation encoding="application/x-tex">\gets</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">←</span></span></span></span></span></p><p>字面意思。</p><h4 id="除">除</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>÷</mo><mi>s</mi><mo>=</mo><mo stretchy="false">{</mo><mi>t</mi><mi mathvariant="normal">∣</mi><mi>t</mi><mo>∈</mo><msub><mi mathvariant="normal">Π</mi><mrow><mi>R</mi><mo>−</mo><mi>S</mi></mrow></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo><mtext>且</mtext><mi mathvariant="normal">∀</mi><mi>u</mi><mo>∈</mo><mi>s</mi><mo separator="true">,</mo><mi>t</mi><mi>u</mi><mo>∈</mo><mi>r</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">r\div s=\{t|t\in \Pi_{R-S} (r)且\forall u\in s,tu\in r \}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal">t</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.00773em">R</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2083em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mclose">)</span><span class="mord cjk_fallback">且</span><span class="mord">∀</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8095em;vertical-align:-.1944em"></span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mclose">}</span></span></span></span></span></p><p>就是找出所有 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span></span></span></span> 中满足 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">s</span></span></span></span> 的部分。</p><p><img src="https://images.kisechan.space/image-20250329163725274.png" srcset="/img/loading.gif" lazyload alt="除"></p><h4 id="广义投影">广义投影</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><msub><mi>F</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>F</mi><mn>2</mn></msub><mo separator="true">,</mo><mo>⋯</mo><mtext> </mtext><mo separator="true">,</mo><msub><mi>F</mi><mi>n</mi></msub></mrow></msub><mo stretchy="false">(</mo><mi>E</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi_{F_1,F_2,\cdots,F_n}(E)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:-.1389em;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3173em"><span style="top:-2.357em;margin-left:-.1389em;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span><span class="mspace mtight" style="margin-right:.1952em"></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1645em"><span style="top:-2.357em;margin-left:-.1389em;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.143em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.05764em">E</span><span class="mclose">)</span></span></span></span></span></p><p>其中， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>F</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">F_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3117em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 指的是符合这个条件的算术表达式。</p><blockquote><p>[例] 信用卡能透支多少钱：</p><p><img src="https://images.kisechan.space/image-20250429143756037.png" srcset="/img/loading.gif" lazyload alt="credit_info 表"></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mrow><mtext>customer_name</mtext><mo separator="true">,</mo><mtext>limit</mtext><mo>−</mo><mtext>credit_balance</mtext></mrow></msub><mo stretchy="false">(</mo><mtext>credit_info</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi_{\text{customer\_name}, \text{limit} - \text{credit\_balance}}(\text{credit\_info})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.117em;vertical-align:-.367em"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">customer_name</span></span><span class="mpunct mtight">,</span><span class="mord text mtight"><span class="mord mtight">limit</span></span><span class="mbin mtight">−</span><span class="mord text mtight"><span class="mord mtight">credit_balance</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.367em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord text"><span class="mord">credit_info</span></span><span class="mclose">)</span></span></span></span></span></p><p><img src="https://images.kisechan.space/image-20250429144117501.png" srcset="/img/loading.gif" lazyload alt="运算结果"></p></blockquote><h4 id="聚集运算">聚集运算</h4><h4 id="空值-null">空值 <code>null</code></h4><ul><li><p>所有包含 <code>null</code> 的运算结果都是 <code>null</code> 。</p></li><li><p>聚集函数忽略 <code>null</code> 。</p></li><li><p><code>null</code> 在比较运算的结果都是 <code>unknown</code> 。</p></li><li><p>在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>σ</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">\sigma_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7167em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0359em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span> 中，如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span></span></span></span> 是 <code>unknown</code> ，则等同于 <code>false</code> 。</p></li><li><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>⋈</mo><mi>θ</mi></msub></mrow><annotation encoding="application/x-tex">\Join_\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.655em;vertical-align:-.15em"></span><span class="mrel"><span class="mrel">⋈</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3361em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">θ</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 中， <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02778em">θ</span></span></span></span> 属性为 <code>null</code> 的元组不参与匹配。</p></li><li><p>交并、投影中的去重均将 <code>null</code> 看做相等。</p></li><li><p>聚集运算中， <code>null</code> 的分组属性被视为相等，聚集属性则忽略。</p></li></ul><h3 id="修改数据库内容">修改数据库内容</h3><h4 id="插入">插入</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>←</mo><mi>r</mi><mo>∪</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">r \gets r\cup E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">←</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.5556em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">∪</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">E</span></span></span></span></span></p><h4 id="删除">删除</h4><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>r</mi><mo>←</mo><mi>r</mi><mo>−</mo><mi>E</mi></mrow><annotation encoding="application/x-tex">r \gets r-E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">←</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">E</span></span></span></span></span></p><h4 id="更改">更改</h4><p class="katex-block katex-error" title="ParseError: KaTeX parse error: No such environment: eqnarray at position 7: \begin{̲e̲q̲n̲a̲r̲r̲a̲y̲}̲
r &amp;\gets&amp; \Pi_…">\begin{eqnarray} r &amp;\gets&amp; \Pi_{F_1,F_2,...,F_n}(r) \nonumber \\ ~ &amp;\gets&amp;\Pi_{F_1,F_2,...,F_n}(\sigma_p(r)\cup(r-\sigma_p(r))) \end{eqnarray}</p><h2 id="SQL">SQL</h2><p>SQL, Structed Query Language 是应用最广泛的数据库语言。功能构成有：</p><ul><li><strong>数据定义语言</strong></li><li><strong>数据操纵语言</strong></li><li><strong>完整性定义</strong></li><li><strong>视图定义</strong></li><li><strong>事务控制</strong></li><li><strong>嵌入式和动态 SQL</strong></li><li><strong>授权</strong></li></ul><h3 id="数据定义">数据定义</h3><h4 id="职能">职能</h4><p>用于定义：</p><ul><li><strong>关系模式</strong></li><li><strong>属性值域</strong></li><li><strong>完整性约束</strong></li><li><strong>索引</strong></li><li><strong>安全性</strong></li><li><strong>物理组织</strong></li></ul><h4 id="基本类型">基本类型</h4><p>数据类型规定了值的取值范围、精度和运算。</p><ul><li><code>char(n)</code></li><li><code>varchar(n)</code></li><li><code>int</code></li><li><code>smallint</code></li><li><code>numeric(p,d)</code></li><li><code>real</code>, <code>double precision</code></li><li><code>float(n)</code></li></ul><h4 id="基本模式定义">基本模式定义</h4><ol><li>创建关系模式：</li></ol><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> r (a1 d1, a2 d2, ...<br>               yakusoku1,<br>               yakusoku2,<br>          <span class="hljs-comment">-- 完整性约束</span><br>               ...)<br></code></pre></td></tr></tbody></table></figure><blockquote><p>表的一致性约束有：</p><ul><li><code>not null</code></li><li><code>primary key</code></li></ul></blockquote><ol start="2"><li>删除关系模式</li></ol><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">table</span> r<br></code></pre></td></tr></tbody></table></figure><ol start="3"><li>修改关系模式</li></ol><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> r <span class="hljs-keyword">add</span> A D<br><span class="hljs-comment">-- 添加一个名为 A 类型为 D 的字段</span><br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> r <span class="hljs-keyword">drop</span> A<br><span class="hljs-comment">-- 删除字段 A</span><br></code></pre></td></tr></tbody></table></figure><h3 id="查询">查询</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> A <span class="hljs-keyword">from</span> r <span class="hljs-keyword">where</span> p<br></code></pre></td></tr></tbody></table></figure><p>等价于</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi mathvariant="normal">Π</mi><mi>A</mi></msub><mo stretchy="false">(</mo><msub><mi>σ</mi><mi>p</mi></msub><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\Pi_A(\sigma_p(r))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord">Π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.0359em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mclose">))</span></span></span></span></span></p><h4 id="select-子句"><code>select</code> 子句</h4><p>可以在语句中的 <code>select</code> 后使用 <code>distinct</code> 和 <code>all</code> 查找出去重后和去重前的数据。</p><h4 id="where-子句"><code>where</code> 子句</h4><p>可以使用 <code>and</code>, <code>or</code>, <code>not</code> 以及比较运算。</p><h3 id="更名">更名</h3><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">旧名字 <span class="hljs-keyword">as</span> 新名字<br></code></pre></td></tr></tbody></table></figure><h3 id="元组变量">元组变量</h3><p>表示关系中的一行或表的别名。</p><p>例如：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- 列出贷款账户、顾客名字和贷款金额</span><br><span class="hljs-keyword">select</span> customer name,T.loan number,amount<br><span class="hljs-keyword">from</span> borrower <span class="hljs-keyword">as</span> T,loan <span class="hljs-keyword">as</span> S<br><span class="hljs-keyword">where</span> T.loan number <span class="hljs-operator">=</span>S.loan number<br></code></pre></td></tr></tbody></table></figure><h3 id="字符串运算">字符串运算</h3><p>字符串常量用单引号扩起。字符串中包含单引号时需双写单引号。</p><h4><code>%</code></h4><p>匹配任意子串。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> customer name<br><span class="hljs-keyword">from</span> customer<br><span class="hljs-keyword">where</span> customer street <span class="hljs-keyword">like</span> <span class="hljs-string">'%Main%</span><br></code></pre></td></tr></tbody></table></figure><h4 id="-2"><code>_</code></h4><p>匹配任意一个字符。</p><h4 id="escape"><code>escape</code></h4><p>定义转义字符。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">like</span> <span class="hljs-string">'ab %cd%'</span><span class="hljs-keyword">escape</span><span class="hljs-string">'</span><br></code></pre></td></tr></tbody></table></figure><h4 id="-3"><code>||</code></h4><p>用于字符串拼接。</p><h4 id="大小写转换">大小写转换</h4><p><code>upper()</code> 和 <code>lower()</code> 。</p><h3 id="按序输出">按序输出</h3><p><code>order by</code>子句。</p><ul><li><p>默认或<code>asc</code>为升序。</p></li><li><p><code>desc</code>为降序。</p></li><li><p>在多个属性上排序的优先级是从左向右</p></li></ul><blockquote><p>[例]按字母序输出 <em>Perryridge</em> 银行的贷款顾客。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> customer name<br><span class="hljs-keyword">from</span> borrower <span class="hljs-keyword">as</span> T,loan <span class="hljs-keyword">as</span> S<br><span class="hljs-keyword">where</span> T.loan number <span class="hljs-operator">=</span>S.loan number <span class="hljs-keyword">and</span><br>branch name <span class="hljs-operator">=</span><span class="hljs-string">'Perryridge'</span><br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> customer name<br></code></pre></td></tr></tbody></table></figure></blockquote><blockquote><p>[例]按银行名称升序、贷款额度降序输出顾客。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> customer name,branch name,account<br><span class="hljs-keyword">from</span> borrower <span class="hljs-keyword">as</span> T,loan <span class="hljs-keyword">as</span> S<br><span class="hljs-keyword">where</span> T.loan number S.loan number<br><span class="hljs-keyword">order</span> <span class="hljs-keyword">by</span> branch name <span class="hljs-keyword">asc</span>,account <span class="hljs-keyword">desc</span><br></code></pre></td></tr></tbody></table></figure></blockquote><h3 id="数据重复">数据重复</h3><p>SQL 查询结果允许数据重复。<br>多重集(Multiset))<br>设n1和r2是多重集关系<br>·若1中元组t1有c1个副本，t1满足09，则在o中有c1个t1副本。<br>n中元组t1的每个副本，在4(m)中均有一个对应元组副本4(t1)。<br>其中，4(t1)为单个元组t1的投影。<br>若h1中元组t1有c1个副本，2中元组t2有c2个副本，则m1×2中<br>有c1*c2个t1t2元组的副本。<br>[例]关系n1和r2分别是模式(A,B)和©的多重集关系。<br>r1={(1,a),(2,a)}2={(2),(3),(3)}<br>Πε®={(a),(a)}<br>ΠB®×r2={(a,2),(a,2),(a,3),(a,3),(a,3),(a,3)}<br>select A1,A2,…,An<br>fr0mr1,r2,…,Ym<br>where P<br>与多重集版本AA2An(op(m×2×…×m)等<br>价</p><h3 id="集合运算">集合运算</h3><p>并集(<code>union</code>)、交集(<code>intersect</code>)、差集(<code>except</code>)运算都是去重的。保留重复必须用<code>all</code>。即<code>union all</code>、<code>intersect all</code>、<code>except all</code>。</p><h4 id="union"><code>union</code></h4><blockquote><p>[例]列出有存款、或有贷款、或兼而有之的用户。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-keyword">from</span> depositor)<br><span class="hljs-keyword">union</span><br>(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-keyword">from</span> borrower)<br></code></pre></td></tr></tbody></table></figure></blockquote><blockquote><p>[例]不去重的版本。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql">(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-keyword">from</span> depositor)<br><span class="hljs-keyword">union</span> <span class="hljs-keyword">all</span><br>(<span class="hljs-keyword">select</span> customer nair.e<br><span class="hljs-keyword">from</span> borrower)<br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="intersect"><code>intersect</code></h4><blockquote><p>[例]列出存款和贷款兼而有之的用户。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;</span>(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">from</span> depositor)<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">intersect</span><br><span class="hljs-operator">&gt;</span>(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">from</span> borrower)<br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="except"><code>except</code></h4><blockquote><p>[例]列出有存款无贷款的用户。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-operator">&gt;</span>(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">from</span> depositor)<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">except</span><br><span class="hljs-operator">&gt;</span>(<span class="hljs-keyword">select</span> customer name<br><span class="hljs-operator">&gt;</span><span class="hljs-keyword">from</span> borrower)<br></code></pre></td></tr></tbody></table></figure></blockquote><h3 id="聚集函数">聚集函数</h3><p>SQL 提供了 5 个聚集函数：</p><ul><li><p>平均值 <code>avg</code></p></li><li><p>最小值 <code>min</code></p></li><li><p>最大值 <code>max</code></p></li><li><p>总和 <code>sum</code></p></li><li><p>计数 <code>count</code></p><blockquote><p>[例]求 <em>Perryridge</em> 银行存款账户的平均余额。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">avg</span>(balance)<br><span class="hljs-keyword">from</span> account<br><span class="hljs-keyword">where</span> branch name <span class="hljs-operator">=</span>Perryridge<br></code></pre></td></tr></tbody></table></figure><p>[例]统计关系 <code>customer</code> 中元组的个数。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>)<br><span class="hljs-keyword">from</span> customer<br></code></pre></td></tr></tbody></table></figure></blockquote></li></ul><h4 id="group-by子句"><code>group by</code>子句</h4><p>让聚集函数作用在一组元组集上。</p><blockquote><p>[例]分别求各个银行存款账户的平均余额。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> branch name,<span class="hljs-built_in">avg</span>(balance)<br><span class="hljs-keyword">from</span> account<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> branch name<br></code></pre></td></tr></tbody></table></figure></blockquote><blockquote><p>[例]分别统计各个银行的储户数量。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> branch name,<span class="hljs-built_in">count</span>(<span class="hljs-keyword">distinct</span> customer name)<br><span class="hljs-keyword">from</span> depositor R,account S<br><span class="hljs-keyword">where</span> R.account number S.account number<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> branch name<br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="having子句"><code>having</code>子句</h4><p>分组后起作用的谓词条件。</p><blockquote><p>[例]查询储户平均余额超过1200美元的银行和平均余额。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> branch name,<span class="hljs-built_in">avg</span>(balance)<br><span class="hljs-keyword">from</span> account<br><span class="hljs-keyword">group</span> <span class="hljs-keyword">by</span> branch name<br><span class="hljs-keyword">having</span> <span class="hljs-built_in">avg</span>(balance )<span class="hljs-operator">&gt;</span><span class="hljs-number">1200</span><br></code></pre></td></tr></tbody></table></figure></blockquote><h3 id="空值">空值</h3><p>空值表示“不存在”或“不知道”。</p><ul><li><p>空值参与算数运算结果为 <code>null</code>。</p></li><li><p>空值参与比较运算结果为 <code>unknown</code>。</p></li><li><p>空值参与逻辑运算结果可能为 <code>unknown</code>。</p></li></ul><h4 id="判断">判断</h4><p>可以用<code>is null</code>和<code>is not null</code> / <code>unknown</code> 判断是否为空值或不知道。</p><h4 id="聚集函数-2">聚集函数</h4><p>除<code>count(*)</code>外均忽略输出集合中的空值</p><p>空集的<code>count</code>运算结果为<code>0</code>，其他聚集函数结果为<code>null</code></p><h3 id="嵌套子查询">嵌套子查询</h3><h4 id="集合成员判断">集合成员判断</h4><p>属于 <code>in</code>，和不属于 <code>not in</code> 。</p><blockquote><p>[例]列出有贷款却无存款的顾客名字。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> customer name<br><span class="hljs-keyword">from</span> borrower<br><span class="hljs-keyword">where</span> customer name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<span class="hljs-keyword">select</span> customer name<br><span class="hljs-keyword">from</span> depositor)<br></code></pre></td></tr></tbody></table></figure></blockquote><blockquote><p>[例]列出有贷款但名字既不是Smith也不是Jones的顾客。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> customer name<br><span class="hljs-keyword">from</span> borrower<br><span class="hljs-keyword">where</span> customer name <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> (<span class="hljs-string">'Smith'</span>,<span class="hljs-string">'Jones'</span>)<br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="集合比较">集合比较</h4><ul><li><code>some</code> ：某个集合成员满足条件即为真值。</li><li><code>all</code> ：所有集合成员均满足即为真值。</li></ul><p>用法：<code>&lt;&gt;some</code> 、 <code>&gt;=all</code> 等。</p><blockquote><p>[例]找出资产比 <em>Brooklyn</em> 任意家银行资产都高的银行。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> branch name<br><span class="hljs-keyword">from</span> branch<br><span class="hljs-keyword">where</span> assets <span class="hljs-operator">&gt;</span> <span class="hljs-keyword">all</span> (<span class="hljs-keyword">select</span> assets<br><span class="hljs-keyword">from</span> branch<br><span class="hljs-keyword">where</span> branch city<span class="hljs-operator">=</span><span class="hljs-string">'Brooklyn'</span>)<br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="判别空关系">判别空关系</h4><p><code>exists</code>和 <code>not exists</code> 。</p><blockquote><p>[例]列出既有存款又有贷款的顾客名字。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> <span class="hljs-keyword">distinct</span> customer name<br><span class="hljs-keyword">from</span> borrower R<br><span class="hljs-keyword">where</span> exsits (<span class="hljs-keyword">select</span> <span class="hljs-operator">*</span><br><span class="hljs-keyword">from</span> depositor S<br><span class="hljs-keyword">where</span> S.customer name <span class="hljs-operator">=</span>R.customer name)<br></code></pre></td></tr></tbody></table></figure></blockquote><h4 id="判断重复">判断重复</h4><p>查询结果中不包含重复元组时 <code>unique</code>返回 <code>true</code>。</p><blockquote><p>[例]找出在 <em>Perryridge</em> 银行只有一个存款账户的顾客。</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">select</span> T.customer name<br><span class="hljs-keyword">from</span> depositor <span class="hljs-keyword">as</span> T<br><span class="hljs-keyword">where</span> <span class="hljs-keyword">unique</span> (<span class="hljs-keyword">select</span> R.cuetomer_name<br><span class="hljs-keyword">from</span> account <span class="hljs-keyword">as</span> S,depositor <span class="hljs-keyword">as</span> R<br><span class="hljs-keyword">where</span> T.customer_name <span class="hljs-operator">=</span> R.customer_name <span class="hljs-keyword">and</span><br>R.account_number <span class="hljs-operator">=</span> S.account_number <span class="hljs-keyword">and</span><br>S.branch_name <span class="hljs-operator">=</span> <span class="hljs-string">'Perryridge'</span>)<br></code></pre></td></tr></tbody></table></figure></blockquote><h3 id="复杂查询">复杂查询</h3><h3 id="视图">视图</h3><blockquote><p>SQL剩下的内容之后补上。</p></blockquote></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" class="category-chain-item">课程笔记</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="print-no-link">#数据库</a></div></div><div class="license-box my-3"><div class="license-title"><div>数据库原理 课程笔记 (1)</div><div>https://blog.kisechan.space/2025/notes-database-1/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Kisechan</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年3月19日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年4月29日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2025/site-new-icon-css/" title="网站替换新的图标 CSS"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">网站替换新的图标 CSS</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2025/notes-algorithm-analysis/" title="算法设计与分析 课程笔记"><span class="hidden-mobile">算法设计与分析 课程笔记</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="gitalk-container"></div><script type="text/javascript">Fluid.utils.loadComments("#gitalk-container",function(){Fluid.utils.createCssLink("/css/gitalk.css"),Fluid.utils.createScript("https://lib.baomitu.com/gitalk/1.8.0/gitalk.min.js",function(){var e=Object.assign({clientID:"Ov23liWYIiu2jxReIEhB",clientSecret:"d7b44817ae2553b2175fdecfde9718b582bdc653",repo:"Comment-Kisechan",owner:"Kisechan",admin:["Kisechan"],language:"zh-CN",labels:["Gitalk"],perPage:10,pagerDirection:"last",distractionFreeMode:!1,createIssueManually:!0,proxy:"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token",enabled:!0},{id:"928ea269a50fa72e10cef3705102e8c3"});new Gitalk(e).render("gitalk-container")})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><script>Fluid.utils.createScript("https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js",function(){mermaid.initialize({theme:"default"}),Fluid.utils.listenDOMLoaded(function(){Fluid.events.registerRefreshCallback(function(){"mermaid"in window&&mermaid.init()})})})</script><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><div><span>Frame by </span><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <span>| Theme </span><a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div style="font-size:.85rem"><span id="timeStart">本站自 2024 年 4 月 26 日 20 : 46 : 17 起</span> <span><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></span><span><span><br>本站总访问量&nbsp<span id="busuanzi_value_site_pv"></span>&nbsp次</span> <span>总访客数&nbsp<span id="busuanzi_value_site_uv"></span>&nbsp人 &nbsp<br></span></span><span>&copy; 2024 - 2025 By <a href="https://github.com/Kisechan" target="_blank" rel="nofollow noopener"><strong>Kisechan</strong></a><br></span><span>今天也很喜欢你！</span><br><a href="https://icp.gov.moe/?keyword=20251453" target="_blank">萌ICP备20251453号</a></div></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!0,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>var relativeDate=function(){var t,e,i,n,m=document.getElementById("updated-time");m&&(e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/,(i=(t=m.textContent).match(e))&&(n=moment(i[0]).fromNow(),m.textContent=t.replace(e,n)),m.style.display="")};Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/moment.min.js",function(){"zh-cn".startsWith("en")?relativeDate():Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js",function(){relativeDate()})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/cursor.js"></script><script src="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="/js/boot.js"></script><script type="text/javascript">var originalTitle=document.title;window.onblur=function(){document.title="等你回来哦"},window.onfocus=function(){document.title=originalTitle}</script><div id="tooltip-rightmenu" class="tooltip-rightmenu">如果需要使用原始右键菜单请按下 <strong>Ctrl+右键</strong></div><div id="tooltip-clipboard" class="tooltip-rightmenu">链接复制成功！</div><div id="rightmenu-wrapper"><ul class="list-v rightmenu" id="rightmenu-content"><li class="navigation menuNavigation-Content"><a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fa fa-arrow-left rightmenu-icon"></i></a> <a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fa fa-arrow-right rightmenu-icon"></i></a> <a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fa fa-refresh rightmenu-icon"></i></a> <a aria-label="TOP" href="#" role="button"><i class="fa fa-arrow-up rightmenu-icon"></i></a></li><hr class="menuLoad-Content" style="display:block"><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><span><i class="fa fa-search rightmenu-icon"></i> 站内搜索</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="toggleFullScreen()"><span><i class="fa fa-arrows-alt rightmenu-icon"></i> 切换全屏</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="copyPageUrl()"><span><i class="fa fa-clipboard rightmenu-icon"></i> 复制链接</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="scrollToComments()"><span><i class="fa fa-commenting rightmenu-icon"></i> 立即评论</span></a></li><hr class="menuLoad-Content" style="display:block"><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" target="_blank" rel="noopener" href="https://www.kisechan.space/" data-group="link"><span><i class="fa fa-info-circle rightmenu-icon"></i> 关于本站</span></a></li></ul></div><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link href="/css/custom_right_menu_icons.css" type="text/css" rel="stylesheet"><script src="/js/right_menu.js" type="text/javascript"></script><link href="/css/right_menu.css" type="text/css" rel="stylesheet"><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":false},"log":false});</script></body></html>