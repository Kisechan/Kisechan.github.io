<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><link rel=manifest href=/manifest.json><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="https://images.kisechan.space/apple-touch-icon.png"><link rel="icon" href="https://images.kisechan.space/icon.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#004e66"><meta name="author" content="Kisechan"><meta name="keywords" content=""><meta name="description" content="概论 什么是网络 -&gt; 网络长什么样 -&gt; 网络怎么分类 -&gt; 怎么设计复杂的网络(分层) -&gt; 怎么衡量网络好坏。 计算机网络的组成与功能  定义：多个独立的计算机通过通信线路和设备互连，实现信息交换和资源共享的系统。 **三大功能 **  数据通信 (核心功能) 资源共享 (硬件、软件、数据) 分布式处理 (提高可靠性、负载均衡)   逻辑组成  通信子网 负责数据的传"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络课程笔记"><meta property="og:url" content="https://blog.kisechan.space/2025/notes-networks/index.html"><meta property="og:site_name" content="Kisechan&#39;s Blog"><meta property="og:description" content="概论 什么是网络 -&gt; 网络长什么样 -&gt; 网络怎么分类 -&gt; 怎么设计复杂的网络(分层) -&gt; 怎么衡量网络好坏。 计算机网络的组成与功能  定义：多个独立的计算机通过通信线路和设备互连，实现信息交换和资源共享的系统。 **三大功能 **  数据通信 (核心功能) 资源共享 (硬件、软件、数据) 分布式处理 (提高可靠性、负载均衡)   逻辑组成  通信子网 负责数据的传"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://images.kisechan.space/5962217293c02c6d5e05a242ed9b1fe3_720.jpg"><meta property="article:published_time" content="2025-09-27T08:31:27.000Z"><meta property="article:modified_time" content="2025-12-21T13:32:54.291Z"><meta property="article:author" content="Kisechan"><meta property="article:tag" content="计算机网络"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://images.kisechan.space/5962217293c02c6d5e05a242ed9b1fe3_720.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><title>计算机网络课程笔记 - Kisechan&#39;s Blog</title><link rel="stylesheet" type="text/css" href="/css/loading.css"><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_4890189_qp1nrr38tcm.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/cursor.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"blog.kisechan.space",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:["home"]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:"#"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!0,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4",collapseDepth:4},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:{measurement_id:null},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script>document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("busuanzi_value_site_uv"),t=document.getElementById("busuanzi_value_site_pv"),n=new MutationObserver(e=>{for(let t of e)if("childList"===t.type){n.disconnect(),t.target.innerHTML=parseInt(t.target.innerHTML)+3837;break}}),i=new MutationObserver(e=>{for(let t of e)if("childList"===t.type){i.disconnect(),t.target.innerHTML=parseInt(t.target.innerHTML)+6136;break}}),r={childList:!0};n.observe(e,r),i.observe(t,r)});</script><meta name="generator" content="Hexo 7.2.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="Kisechan's Blog" type="application/atom+xml">
</head><body><div><div class="real_mask" style="background-color:rgba(0,0,0,.3);width:100%;height:100%;position:fixed;z-index:-777"></div><div id="banner_video_insert"></div><div id="vvd_banner_img"></div></div><div id="banner"></div><div id="loader-box"><div class="loader-wrapper"><div class="loader"></div><div class="loader-text"><div>L</div><div>O</div><div>A</div><div>D</div><div>I</div><div>N</div><div>G</div><div></div><div></div><div></div></div></div><script>var endLoading=function(){document.body.style.overflow="auto",document.getElementById("loader-box").remove()};window.addEventListener("load",endLoading)</script></div><header><div class="header-inner" style="height:80vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>KISECHAN</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-Homehomepagemenu"></i> <span>博客</span></a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-newstextarticle"></i> <span>文章</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/archives/" target="_self"><i class="iconfont icon-archive"></i> <span>归档</span> </a><a class="dropdown-item" href="/categories/" target="_self"><i class="iconfont icon-categories"></i> <span>分类</span> </a><a class="dropdown-item" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></div></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-user"></i> <span>关于</span></a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/about/" target="_self"><i class="iconfont icon-info-fill"></i> <span>关于</span> </a><a class="dropdown-item" href="/playlist/" target="_self"><i class="iconfont icon-music"></i> <span>歌单</span> </a><a class="dropdown-item" href="https://github.com/Kisechan/Kisechan.github.io" target="_self"><i class="iconfont icon-git"></i> <span>仓库</span> </a><a class="dropdown-item" href="/atom.xml" target="_self"><i class="iconfont icon-rss"></i> <span>RSS</span></a></div></li><li class="nav-item"><a class="nav-link" href="https://www.kisechan.space/tools/" target="_self"><i class="iconfont icon-tool-fill"></i> <span>工具</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link"></i> <span>友链</span></a></li><li class="nav-item"><a class="nav-link" href="https://www.travellings.cn/go.html" target="_self"><i class="iconfont icon-train"></i> <span>开往</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(https://images.kisechan.space/202502042159748.png) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">计算机网络课程笔记</span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Kisechan </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-09-27 16:31" pubdate>2025年9月27日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 20k 字 </span><span id="busuanzi_container_page_pv" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="busuanzi_value_page_pv"></span> 次</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></div><script type="text/javascript" src="/vvd_js/jquery.js"></script><div class="banner" id="banner"><div class="full-bg-img"></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="课程笔记" id="heading-311a46cfdaa3afda544e9285644f70d7" role="tab" data-toggle="collapse" href="#collapse-311a46cfdaa3afda544e9285644f70d7" aria-expanded="true">课程笔记 <span class="list-group-count">(16)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-311a46cfdaa3afda544e9285644f70d7" role="tabpanel" aria-labelledby="heading-311a46cfdaa3afda544e9285644f70d7"><div class="category-post-list"><a href="/2024/oop/" title="面向对象程序设计课程笔记" class="list-group-item list-group-item-action"><span class="category-post">面向对象程序设计课程笔记</span> </a><a href="/2024/linux-note/" title="Linux课程笔记" class="list-group-item list-group-item-action"><span class="category-post">Linux课程笔记</span> </a><a href="/2024/ds/" title="数据结构课程板子合集 with 笔记" class="list-group-item list-group-item-action"><span class="category-post">数据结构课程板子合集 with 笔记</span> </a><a href="/2025/notes-algorithm-analysis/" title="算法设计与分析 课程笔记" class="list-group-item list-group-item-action"><span class="category-post">算法设计与分析 课程笔记</span> </a><a href="/2025/notes-database-1/" title="数据库原理 课程笔记 (1) 数据库、关系代数和 SQL" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (1) 数据库、关系代数和 SQL</span> </a><a href="/2025/notes-database-2/" title="数据库原理 课程笔记 (2) E-R 模型和关系模式" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (2) E-R 模型和关系模式</span> </a><a href="/2025/notes-database-3/" title="数据库原理 课程笔记 (3) 存储、索引、事务和并发" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (3) 存储、索引、事务和并发</span> </a><a href="/2025/notes-database-4/" title="数据库原理 课程笔记 (4) 杂项和题目整理" class="list-group-item list-group-item-action"><span class="category-post">数据库原理 课程笔记 (4) 杂项和题目整理</span> </a><a href="/2025/notes-os/" title="操作系统复习" class="list-group-item list-group-item-action"><span class="category-post">操作系统复习</span> </a><a href="/2025/notes-ptms/" title="概率论与数理统计" class="list-group-item list-group-item-action"><span class="category-post">概率论与数理统计</span> </a><a href="/2025/notes-java/" title="Java 程序设计" class="list-group-item list-group-item-action"><span class="category-post">Java 程序设计</span> </a><a href="/2025/notes-networks/" title="计算机网络课程笔记" class="list-group-item list-group-item-action active"><span class="category-post">计算机网络课程笔记</span> </a><a href="/2025/notes-design-pattern/" title="软件设计模式 课程笔记" class="list-group-item list-group-item-action"><span class="category-post">软件设计模式 课程笔记</span> </a><a href="/2025/notes-machine-learning/" title="机器学习 课程笔记" class="list-group-item list-group-item-action"><span class="category-post">机器学习 课程笔记</span> </a><a href="/2025/notes-software-engineering-summary/" title="软件工程课程部分内容归纳" class="list-group-item list-group-item-action"><span class="category-post">软件工程课程部分内容归纳</span> </a><a href="/2025/notes-networks-summary/" title="计算机网络总结归纳" class="list-group-item list-group-item-action"><span class="category-post">计算机网络总结归纳</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">计算机网络课程笔记</h1><p id="updated-time" class="note note-info" style="display:none">本文最后更新于 2025-12-21T21:32:54+08:00</p><div class="markdown-body"><h2 id="概论">概论</h2><p>什么是网络 -&gt; 网络长什么样 -&gt; 网络怎么分类 -&gt; 怎么设计复杂的网络(分层) -&gt; 怎么衡量网络好坏。</p><h3 id="计算机网络的组成与功能">计算机网络的组成与功能</h3><ul><li><strong>定义</strong>：多个独立的计算机通过通信线路和设备互连，实现<strong>信息交换</strong>和<strong>资源共享</strong>的系统。</li><li>**三大功能 **<ol><li><strong>数据通信</strong> (核心功能)</li><li><strong>资源共享</strong> (硬件、软件、数据)</li><li><strong>分布式处理</strong> (提高可靠性、负载均衡)</li></ol></li><li><strong>逻辑组成</strong><ul><li><strong>通信子网</strong> 负责数据的传输和转发。<ul><li>包括：通信节点（路由器、交换机）、通信链路。</li></ul></li><li><strong>资源子网</strong> 负责信息处理，向用户提供资源。<ul><li>包括：主机（Host）、终端、软件资源。</li></ul></li></ul></li></ul><h3 id="网络的拓扑结构">网络的拓扑结构</h3><p>各种拓扑的<strong>优缺点</strong>（常见选择题考点）：</p><ol><li><strong>网状</strong> 两两相连。<strong>可靠性高</strong>，但<strong>造价高、管理复杂</strong>。通常用于广域网核心。</li><li><strong>星状</strong> 有中央控制器（Hub/Switch）。<strong>结构简单、易管理</strong>，但<strong>中央节点是瓶颈</strong>（单点故障）。局域网最常用。</li><li><strong>总线型</strong> 一根线串联。<strong>结构简单、省线</strong>，但<strong>故障隔离困难</strong>（断一处全网瘫痪），且需解决冲突问题。</li><li><strong>环状</strong> 令牌环网。<strong>时延确定</strong>，但<strong>延时大</strong>。</li><li><strong>树状</strong> 星状的扩展，易于扩展范围。</li></ol><h3 id="网络的分类">网络的分类</h3><ul><li><strong>按覆盖范围</strong><ul><li><strong>PAN (个域网):</strong> 10米内 (蓝牙)。</li><li><strong>LAN (局域网):</strong> 1km内，高带宽，低延迟 (校园网、办公楼)。</li><li><strong>MAN (城域网):</strong> 城市范围。</li><li><strong>WAN (广域网):</strong> 几十到几千公里 (Internet的核心部分)。</li></ul></li><li><strong>按工作模式</strong><ul><li><strong>C/S (客户机/服务器):</strong> 也就是Client/Server。服务集中，从Server获取资源。</li><li><strong>P2P (对等网):</strong> 没有固定的服务器，每个节点既是Client也是Server（如下载软件BitTorrent）。</li></ul></li></ul><h3 id="网络分层体系结构">网络分层体系结构</h3><p>这是本章最重要的理论部分。</p><ul><li><strong>为什么分层？</strong> 化繁为简 (Divide and Conquer)。</li><li><strong>协议三要素</strong><ol><li><strong>语法</strong> 数据格式、电平结构（怎么写）。</li><li><strong>语义</strong> 做什么控制、动作（做什么）。</li><li><strong>时序</strong> 顺序、速度匹配（什么时候做）。</li></ol></li><li><strong>OSI 七层模型</strong><ol><li><strong>物理层 (Physical):</strong> 传输<strong>比特 (Bit)</strong>。涉及机械、电气特性。</li><li><strong>数据链路层 (Data Link):</strong> 传输<strong>帧 (Frame)</strong>。相邻节点可靠传输、差错控制、MAC地址。</li><li><strong>网络层 (Network):</strong> 传输<strong>分组/包 (Packet)</strong>。<strong>路由选择</strong>、拥塞控制、IP地址。</li><li><strong>传输层 (Transport):</strong> 传输<strong>报文 (Message/Segment)</strong>。<strong>端到端</strong>通信、进程间通信、流量控制 (TCP/UDP)。</li><li><strong>会话层 (Session):</strong> 建立维护会话。</li><li><strong>表示层 (Presentation):</strong> 数据格式转换、加密、压缩。</li><li><strong>应用层 (Application):</strong> 为用户提供服务。</li></ol></li><li><strong>TCP/IP 模型</strong>： 事实上的工业标准。通常分为4层（应用层、传输层、网络层、网络接口层）或5层（加上物理层）。</li><li><strong>数据封装与解封装</strong><ul><li><strong>PDU (协议数据单元) = SDU (服务数据单元) + PCI (协议控制信息/Header)</strong></li><li>发送方：层层<strong>加头</strong> (Encapsulation)。</li><li>接收方：层层<strong>去头</strong> (Decapsulation)。</li><li>数据每下一层，就包上一层信封（Header）；到了接收端，每上一层，就拆掉一层信封。</li></ul></li><li><strong>协议 &amp; 服务:</strong><ul><li><strong>协议 (Protocol):</strong> <strong>水平的</strong>。控制<strong>对等实体</strong>（如主机A的传输层和主机B的传输层）之间的通信规则。</li><li><strong>服务 (Service):</strong> <strong>垂直的</strong>。由<strong>下层向上层</strong>通过接口（SAP）提供。上层使用下层的服务，但不知道下层怎么实现的（透明性）。</li></ul></li></ul><h3 id="网络互连设备">网络互连设备</h3><p>不同层次对应的设备：</p><ul><li>物理层：<strong>中继器 (Repeater)</strong>、集线器 (Hub)。</li><li>数据链路层：<strong>网桥 (Bridge)</strong>、交换机 (Switch)。</li><li>网络层：<strong>路由器 (Router)</strong>。</li><li>高层：<strong>网关 (Gateway)</strong>。</li></ul><h3 id="网络性能指标与计算">网络性能指标与计算</h3><ul><li><p><strong>速率/带宽:</strong> 单位是 bps (bit per second)。注意：在存储中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>K</mi><mo>=</mo><msup><mn>2</mn><mn>10</mn></msup><mo>=</mo><mn>1024</mn></mrow><annotation encoding="application/x-tex">1K=2^{10}=1024</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1024</span></span></span></span>，但在<strong>通信速率</strong>中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>K</mi><mo>=</mo><msup><mn>10</mn><mn>3</mn></msup><mo>=</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">1K=10^3=1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1000</span></span></span></span>。</p></li><li><p><strong>时延的四个组成部分</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>总时延</mtext><mo>=</mo><mtext>发送时延</mtext><mo>+</mo><mtext>传播时延</mtext><mo>+</mo><mtext>排队时延</mtext><mo>+</mo><mtext>处理</mtext><mo stretchy="false">(</mo><mtext>访问</mtext><mo stretchy="false">)</mo><mtext>时延</mtext></mrow><annotation encoding="application/x-tex">总时延 = 发送时延 + 传播时延 + 排队时延 + 处理(访问)时延</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord cjk_fallback">总时延</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord cjk_fallback">发送时延</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord cjk_fallback">传播时延</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord cjk_fallback">排队时延</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord cjk_fallback">处理</span><span class="mopen">(</span><span class="mord cjk_fallback">访问</span><span class="mclose">)</span><span class="mord cjk_fallback">时延</span></span></span></span></span></p><ol><li><p><strong>发送时延</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>发送时延</mtext><mo>=</mo><mfrac><mrow><mtext>数据块长度</mtext><mo stretchy="false">(</mo><mtext>bit</mtext><mo stretchy="false">)</mo></mrow><mrow><mtext>发送速率</mtext><mo stretchy="false">(</mo><mtext>bit/s</mtext><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">发送时延 = \frac{数据块长度 (\text{bit})}{发送速率 (\text{bit/s})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord cjk_fallback">发送时延</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-.936em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord cjk_fallback">发送速率</span><span class="mopen">(</span><span class="mord text"><span class="mord">bit/s</span></span><span class="mclose">)</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord cjk_fallback">数据块长度</span><span class="mopen">(</span><span class="mord text"><span class="mord">bit</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>含义： 机器把数据推到线路上需要的时间。受网卡速度影响。</p></li><li><p><strong>传播时延</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>传播时延</mtext><mo>=</mo><mfrac><mrow><mtext>信道长度</mtext><mo stretchy="false">(</mo><mtext>m</mtext><mo stretchy="false">)</mo></mrow><mrow><mtext>电磁波在信道上的传播速率</mtext><mo stretchy="false">(</mo><mtext>m/s</mtext><mo stretchy="false">)</mo></mrow></mfrac></mrow><annotation encoding="application/x-tex">传播时延 = \frac{信道长度 (\text{m})}{电磁波在信道上的传播速率 (\text{m/s})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord cjk_fallback">传播时延</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-.936em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord cjk_fallback">电磁波在信道上的传播速率</span><span class="mopen">(</span><span class="mord text"><span class="mord">m/s</span></span><span class="mclose">)</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord cjk_fallback">信道长度</span><span class="mopen">(</span><span class="mord text"><span class="mord">m</span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>含义： 数据在线路上跑需要的时间。受距离和介质影响（光纤/铜线通常取 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>×</mo><msup><mn>10</mn><mn>8</mn></msup><mtext>m</mtext><mi mathvariant="normal">/</mi><mtext>s</mtext></mrow><annotation encoding="application/x-tex">2\times10^8 \text m/\text s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">2</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mord text"><span class="mord">m</span></span><span class="mord">/</span><span class="mord text"><span class="mord">s</span></span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200</mn><mtext>m</mtext><mi mathvariant="normal">/</mi><mi>μ</mi><mtext>s</mtext></mrow><annotation encoding="application/x-tex">200\text m/\mu\text s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">200</span><span class="mord text"><span class="mord">m</span></span><span class="mord">/</span><span class="mord mathnormal">μ</span><span class="mord text"><span class="mord">s</span></span></span></span></span>）。</p></li><li><p><strong>排队时延 &amp; 处理时延:</strong> 通常会直接给出，或者忽略不计。</p></li></ol></li><li><p><strong>例题</strong></p><ul><li><strong>题1:</strong> 100米距离，计算传播时延。<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Time</mtext><mo>=</mo><mfrac><mrow><mn>100</mn><mtext>m</mtext></mrow><mrow><mn>200</mn><mi>m</mi><mi mathvariant="normal">/</mi><mi>μ</mi><mtext>s</mtext></mrow></mfrac><mo>=</mo><mn>0.5</mn><mi>μ</mi><mtext>s</mtext></mrow><annotation encoding="application/x-tex">\text{Time} = \frac{100 \text m}{200m/\mu \text s} = 0.5 \mu \text s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">Time</span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.2574em;vertical-align:-.936em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">200</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord mathnormal">μ</span><span class="mord text"><span class="mord">s</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">100</span><span class="mord text"><span class="mord">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8389em;vertical-align:-.1944em"></span><span class="mord">0.5</span><span class="mord mathnormal">μ</span><span class="mord text"><span class="mord">s</span></span></span></span></span></span></p></li><li><strong>题2:</strong> 10Mbps速率，发送5000B (Bytes) 文件。<strong>注意单位换算！</strong> Byte 转 bit。<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Time</mtext><mo>=</mo><mfrac><mrow><mn>5000</mn><mo>×</mo><mn>8</mn><mtext>&nbsp;bits</mtext></mrow><mrow><mn>10</mn><mo>×</mo><msup><mn>10</mn><mn>6</mn></msup><mtext>&nbsp;bits/s</mtext></mrow></mfrac><mo>=</mo><mfrac><mn>40000</mn><mn>10000000</mn></mfrac><mo>=</mo><mn>0.004</mn><mtext>s</mtext><mo>=</mo><mn>4</mn><mtext>ms</mtext></mrow><annotation encoding="application/x-tex">\text{Time} = \frac{5000 \times 8 \text{ bits}}{10 \times 10^6 \text{ bits/s}} = \frac{40000}{10000000} = 0.004\text s = 4\text{ms}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">Time</span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.3074em;vertical-align:-.936em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">10</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.7401em"><span style="top:-2.989em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">6</span></span></span></span></span></span></span></span><span class="mord text"><span class="mord">&nbsp;bits/s</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">5000</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord">8</span><span class="mord text"><span class="mord">&nbsp;bits</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.936em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">10000000</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">40000</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">0.004</span><span class="mord text"><span class="mord">s</span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">4</span><span class="mord text"><span class="mord">ms</span></span></span></span></span></span></p></li></ul></li></ul><h2 id="数据通信基础">数据通信基础</h2><h3 id="数据通信系统">数据通信系统</h3><p><strong>五大组成部分</strong></p><ol><li><strong>信源 (Source):</strong> 产生数据（如PC）。</li><li><strong>发送设备 (Transmitter):</strong> 编码/调制（如Modem），将数据转为信号。</li><li><strong>传输系统 (Transmission System):</strong> 线路或网络。</li><li><strong>接收设备 (Receiver):</strong> 解调/解码。</li><li><strong>信宿 (Destination):</strong> 接收数据。</li></ol><p><strong>核心术语</strong></p><ul><li><strong>数据 (Data):</strong> 运送信息的实体。</li><li><strong>信号 (Signal):</strong> 数据的电气或电磁表现。</li><li><strong>信道 (Channel):</strong> 信号传输的通道。</li><li><strong>比特率 (Bit Rate):</strong> 每秒传输的比特数 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>bps</mtext></mrow><annotation encoding="application/x-tex">\text{bps}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord text"><span class="mord">bps</span></span></span></span></span>)。</li><li><strong>波特率 (Baud Rate):</strong> 每秒传输的码元（信号状态）数 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Baud</mtext></mrow><annotation encoding="application/x-tex">\text{Baud}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord text"><span class="mord">Baud</span></span></span></span></span>)。</li></ul><h3 id="信号和数据编码">信号和数据编码</h3><p>包含两大定理和多种编码方式。</p><h4 id="信号基础与两大定理">信号基础与两大定理</h4><ul><li><strong>奈奎斯特 (Nyquist) 准则</strong> (无噪声环境):<ul><li><strong>公式:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mn>2</mn><mi>H</mi><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">C = 2H \times \log_2 N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.08125em">H</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.9386em;vertical-align:-.2441em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span></li><li><strong>含义:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span></span></span></span> 是最大数据传输率(bps)，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.08125em">H</span></span></span></span> 是信道带宽(Hz)，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span> 是一个码元所能携带的离散状态数（比如有4种电压值，N=4）。</li></ul></li><li><strong>香农 (Shannon) 定理 (有噪声环境):</strong><ul><li><strong>公式:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mi>H</mi><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">C = H \times \log_2(1 + S/N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.08125em">H</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mclose">)</span></span></span></span></li><li><strong>含义:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi></mrow><annotation encoding="application/x-tex">S/N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span> 是信噪比（功率比）。</li><li><strong>分贝 (dB) 换算:</strong> 题目通常给dB，必须先换算成数值比。<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>dB</mtext><mo>=</mo><mn>10</mn><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mo stretchy="false">(</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{dB} = 10 \times \log_{10}(S/N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord text"><span class="mord">dB</span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">10</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mclose">)</span></span></span></span></span></p>例如： <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>30</mn><mi>d</mi><mi>B</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mn>10</mn><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mo stretchy="false">(</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mn>30</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>10</mn></msub><mo stretchy="false">(</mo><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo><mo>=</mo><mn>3</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>S</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo>=</mo><msup><mn>10</mn><mn>3</mn></msup><mo>=</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">30dB \implies 10 \log_{10}(S/N) = 30 \implies \log_{10}(S/N) = 3 \implies S/N = 10^3 = 1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7184em;vertical-align:-.024em"></span><span class="mord">30</span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mspace" style="margin-right:.2778em"></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:.2778em"></span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">10</span><span class="mspace" style="margin-right:.1667em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6684em;vertical-align:-.024em"></span><span class="mord">30</span><span class="mspace" style="margin-right:.2778em"></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:.2778em"></span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6684em;vertical-align:-.024em"></span><span class="mord">3</span><span class="mspace" style="margin-right:.2778em"></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:.2778em"></span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1000</span></span></span></span>。<ul><li>例题: 带宽3kHz，信噪比30dB。</li><li>先算S/N=1000，带入公式 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mn>3000</mn><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mn>1000</mn><mo stretchy="false">)</mo><mo>≈</mo><mn>30</mn><mi>k</mi><mi>b</mi><mi>p</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">C = 3000 \times \log_2(1+1000) \approx 30kbps</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">3000</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1000</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≈</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord">30</span><span class="mord mathnormal">kb</span><span class="mord mathnormal">p</span><span class="mord mathnormal">s</span></span></span></span>。</li></ul></li></ul></li></ul><h4 id="编码技术">编码技术</h4><ul><li><strong>数字 -&gt; 数字编码</strong><ul><li><strong>单极性:</strong> 高电平1，低电平0。缺点：有直流分量，难同步。</li><li><strong>非归零 (NRZ):</strong> 也就是电平翻转。</li><li><strong>双相位编码 (Bi-phase):</strong><ul><li><strong>曼彻斯特编码 (Manchester):</strong> 每一位中间都有跳变。<ul><li><em>定义:</em> 负<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span>正 = 0，正<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span>负 = 1。（不同教材定义可能相反）。</li></ul></li><li><strong>差分曼彻斯特 (Differential Manchester):</strong> 位中间跳变仅用于同步。<ul><li><em>规则:</em> 每一位<strong>开始处</strong>，有跳变 = 0，无跳变 = 1。</li></ul></li></ul></li></ul></li></ul><p><img src="https://images.kisechan.space/20251220210317242.png" srcset="/img/loading.gif" lazyload alt=""></p><ul><li><strong>数字 -&gt; 模拟编码</strong><ul><li><strong>ASK (幅移):</strong> 调幅度。抗干扰差。</li><li><strong>FSK (频移):</strong> 调频率。抗干扰优于ASK。</li><li><strong>PSK (相移):</strong> 调相位。</li><li><strong>QAM (正交调幅):</strong> 结合幅度+相位。效率最高。</li><li><strong>重要公式 (Slide 40):</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>=</mo><mi>B</mi><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mi>N</mi></mrow><annotation encoding="application/x-tex">S = B \times \log_2 N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.9386em;vertical-align:-.2441em"></span><span class="mop"><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.207em"><span style="top:-2.4559em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2441em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>: 比特率，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>: 波特率，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span>: 码元状态数（例如16-QAM，N=16）。</li></ul></li></ul></li><li><strong>模拟 -&gt; 数字编码 (PCM) (Slides 51-53):</strong><ul><li><strong>过程:</strong> 采样 (Sampling) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span> 量化 (Quantization) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span> 编码 (Encoding)。</li><li><strong>采样定理:</strong> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>f</mi><mtext>采样</mtext></msub><mo>≥</mo><mn>2</mn><mo>×</mo><msub><mi>f</mi><mtext>信号最高频率</mtext></msub></mrow><annotation encoding="application/x-tex">f_{采样} \ge 2 \times f_{信号最高频率}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1076em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">采样</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">2</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.8889em;vertical-align:-.1944em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.10764em">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1076em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">信号最高频率</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>。</li></ul></li></ul><h3 id="线路配置与传输方式">线路配置与传输方式</h3><ul><li><strong>通信模式:</strong><ul><li><strong>单工:</strong> 单向（如广播）。</li><li><strong>半双工:</strong> 双向但不能同时（如对讲机）。</li><li><strong>全双工:</strong> 双向且同时（如手机）。</li></ul></li><li><strong>同步 vs 异步:</strong><ul><li><strong>异步:</strong> 一次传一个字符，带起始位/停止位。效率低，适合低速。</li><li><strong>同步:</strong> 一次传一帧，需要时钟同步。效率高。</li></ul></li></ul><h3 id="多路复用技术">多路复用技术</h3><ul><li><strong>FDM (频分复用):</strong> 分割带宽频率，用于模拟信号。</li><li><strong>TDM (时分复用):</strong> 分割时间片，用于数字信号。<ul><li><strong>同步TDM:</strong> 固定分配时间片，轮询，可能浪费。</li><li><strong>异步/统计TDM:</strong> 按需分配，需要发带地址信息，利用率高。</li></ul></li><li><strong>WDM (波分复用):</strong> 光纤上的FDM，不同波长的光。</li><li><strong>CDMA (码分复用):</strong> <strong>(计算题高频考点)</strong><ul><li><strong>原理:</strong> 不同用户使用正交的码片序列 (Chip Sequence)。</li><li><strong>规则:</strong> 发送1发原码，发送0发反码（补码）。</li><li><strong>计算:</strong> 接收方想听谁的数据，就用收到的总信号与该用户的码片序列做<strong>内积 (规格化内积)</strong>。<ul><li>结果 = 1 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span> 发送了1</li><li>结果 = -1 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span> 发送了0</li><li>结果 = 0 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span> 未发送数据</li></ul></li></ul></li></ul><h3 id="数据交换技术">数据交换技术</h3><p>比较三种交换方式。</p><ol><li><strong>电路交换 (Circuit Switching):</strong><ul><li><strong>特点:</strong> 建立独占物理通路 (建立<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span>传输<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span>拆除)。</li><li><strong>优点:</strong> 实时性好，传输时延小。</li><li><strong>缺点:</strong> 建立时间长，线路利用率低。</li></ul></li><li><strong>报文交换 (Message Switching):</strong><ul><li><strong>特点:</strong> 存储转发 (Store and Forward)。整个报文一起传。</li><li><strong>缺点:</strong> 时延大，对中间节点缓存要求高。</li></ul></li><li><strong>分组交换 (Packet Switching):</strong><ul><li><strong>特点:</strong> 报文切小块（分组），存储转发。</li><li><strong>优点:</strong> 线路利用率高，适合突发数据。</li><li><strong>分类:</strong><ul><li><strong>数据报 (Datagram):</strong> 无连接，每个包独立路由，可能乱序。</li><li><strong>虚电路 (Virtual Circuit):</strong> 逻辑连接，保序，包括SVC(交换)和PVC(永久)。</li></ul></li></ul></li></ol><h3 id="错误检测和控制">错误检测和控制</h3><ul><li><strong>基本概念:</strong> 检错 vs 纠错。码距 (Hamming Distance)。<ul><li>检错 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>≥</mo><mi>D</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">d \ge D+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8304em;vertical-align:-.136em"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.02778em">D</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>；纠错 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>≥</mo><mn>2</mn><mi>C</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">d \ge 2C+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8304em;vertical-align:-.136em"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>。</li></ul></li><li><strong>奇偶校验 (Parity):</strong><ul><li><strong>奇校验:</strong> 加上校验位后，1的个数为奇数。</li><li><strong>偶校验:</strong> 加上校验位后，1的个数为偶数。</li></ul></li><li><strong>CRC (循环冗余校验):</strong><ul><li><strong>步骤:</strong><ol><li>给定生成多项式 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span>，最高次幂为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">m</span></span></span></span>。</li><li>在数据 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">U(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.10903em">U</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 后面补 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">m</span></span></span></span> 个 0。</li><li>用<strong>模2除法</strong> (即XOR异或运算，不借位减法) 用补0后的数据除以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">G(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">G</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span> 对应的比特串。</li><li>余数即为 FCS (帧检验序列)。</li></ol></li><li>例子: 数据1101011，G(x)=11001 (4阶)。后面补4个0 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo></mrow><annotation encoding="application/x-tex">\to</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span></span></span></span> 11010110000。除以11001，余数1010。发送数据为 1101011<strong>1010</strong>。</li></ul></li><li><strong>校验和 (Checksum):</strong> 反码算术求和，取反。</li></ul><h2 id="物理层">物理层</h2><h3 id="传输介质">传输介质</h3><p>传输介质是信号传输的通道，主要分为<strong>有线介质</strong>和<strong>无线介质</strong>。</p><h4 id="双绞线">双绞线</h4><p>这是最常见的传输介质。</p><ul><li><strong>结构</strong>：两根绝缘铜导线按一定密度绞合在一起。绞合的目的是为了<strong>抵御外界电磁干扰</strong>并减少线对间的<strong>串扰</strong>。</li><li><strong>分类</strong>：<ul><li><strong>UTP (非屏蔽双绞线)</strong>：没有金属屏蔽层，便宜，常用。分为多类，性能指标如下：<ul><li>1、2类：4Mbps（老式语音/低速数据）。</li><li>3类：10Mbps。</li><li>4、5类：100Mbps。</li><li>超5类、6类：1Gbps。</li><li>超6类：10Gbps。</li></ul></li><li><strong>STP (屏蔽双绞线)</strong>：有金属屏蔽层，能有效防止噪声干扰，但价格更贵。</li></ul></li><li><strong>连接器</strong>：RJ-45插头（水晶头）和插座。</li><li><strong>线序标准</strong>：EIA/TIA规定了两种线序标准。<ul><li><strong>T568A标准</strong>：绿白、绿、橙白、蓝、蓝白、橙、棕白、棕。</li><li><strong>T568B标准</strong>：橙白、橙、绿白、蓝、蓝白、绿、棕白、棕。</li></ul></li><li><strong>线缆类型与用途</strong>：<ul><li><strong>直通线</strong>：两端线序相同（都用A或都用B）。用于连接<strong>不同类型</strong>设备（如：电脑连交换机、交换机连路由器）。</li><li><strong>交叉线</strong>：一端568A，一端568B。用于连接<strong>相同类型</strong>设备（如：电脑连电脑、交换机连交换机）。</li></ul></li></ul><h4 id="同轴电缆">同轴电缆</h4><ul><li><strong>结构</strong>：由内向外依次是：内层导体（铜芯）、绝缘层、网状导电屏蔽层、外层塑料皮。</li><li><strong>分类</strong>：粗缆（用于早期总线网络主干）、细缆。</li><li><strong>特点</strong>：用于总线型拓扑结构，抗干扰性较好，但现在局域网中已很少使用。</li></ul><h4 id="光纤">光纤</h4><ul><li><strong>结构</strong>：<ul><li><strong>纤芯 (Core)</strong>：高折射率。</li><li><strong>包层 (Cladding)</strong>：低折射率。</li><li><strong>保护层</strong>。</li></ul></li><li><strong>工作原理（物理原理）</strong>：利用<strong>全反射</strong>原理。光线从高折射率的纤芯射向低折射率的包层，只要入射角满足条件，光线就会在界面发生全反射，从而限制在纤芯内传输。</li><li><strong>分类（重点区分）</strong>：<ul><li><strong>多模光纤 (Multi-mode)</strong>：纤芯较粗，允许多束光线以不同反射角传输。输入脉冲在传输后会展宽（色散大），适合近距离传输。</li><li><strong>单模光纤 (Single-mode)</strong>：纤芯很细（波长级别），光线像沿着直线一样传播，几乎无反射干扰。损耗小，适合远距离、高速度传输。</li></ul></li><li><strong>优缺点</strong>：<ul><li>优点：传输速率高、距离远、抗电磁干扰（因为传的是光）、重量轻。</li><li>缺点：价格高、安装维护和熔接困难、易断。</li></ul></li></ul><h4 id="无线传输介质">无线传输介质</h4><ul><li><strong>信号类型</strong>：无线电波、微波、红外线、声波等。</li><li><strong>传播方式</strong>：定向传播（点对点）、全向传播（广播）。</li><li><strong>常见频段</strong>：WiFi常用的2.4GHz和5GHz频段（属于免授权频段）。</li></ul><h3 id="物理连接与协议特性">物理连接与协议特性</h3><p>物理层协议主要定义DTE和DCE之间的接口标准。</p><h4 id="DTE-与-DCE">DTE 与 DCE</h4><ul><li><strong>DTE (数据终端设备)</strong>：产生和处理数据的设备，如<strong>计算机 (PC)</strong>。</li><li><strong>DCE (数据电路终接设备)</strong>：负责信号变换（数模转换）和网络接入的设备，如<strong>调制解调器 (Modem)</strong>。</li><li><strong>连接关系</strong>：DTE —&gt; (接口) —&gt; DCE —&gt; 通信网络 —&gt; DCE —&gt; (接口) —&gt; DTE。</li></ul><h4 id="物理层协议的四大特性">物理层协议的四大特性</h4><p>物理层协议（如EIA-232）必须定义以下四个方面：</p><ol><li><strong>机械特性</strong>：规定接口的形状、尺寸、引脚数量、排列方式等（如DB-25连接器）。</li><li><strong>电气特性</strong>：规定信号线上电压的范围、阻抗匹配等（如多少伏代表1，多少伏代表0）。</li><li><strong>功能特性</strong>：规定每一根引脚的具体含义和功能（如哪根线是发数据的，哪根是控制信号的）。</li><li><strong>规程特性 (过程特性)</strong>：规定不同功能信号出现的先后顺序和时序关系（握手过程）。</li></ol><h3 id="EIA-232-接口标准-RS-232">EIA-232 接口标准 (RS-232)</h3><p>这是本章介绍最详细的接口标准，也是典型的DTE-DCE接口。</p><h4 id="机械特性">机械特性</h4><ul><li>使用 <strong>DB-25</strong> 连接器（25根针脚）。</li><li>规定电缆长度不能超过 <strong>25米</strong>。</li></ul><h4 id="电气特性">电气特性</h4><ul><li>采用 <strong>非归零电平编码 (NRZ-L)</strong>。</li><li><strong>逻辑 0</strong>：对应 <strong>正电平</strong> (+3V ~ +15V)。</li><li><strong>逻辑 1</strong>：对应 <strong>负电平</strong> (-3V ~ -15V)。</li><li><em>(注：与TTL电平相反，正电压反而是0)</em>。</li></ul><h4 id="功能特性（主要引脚定义）">功能特性（主要引脚定义）</h4><p>虽然有25根线，但常用的主要是以下几根（记住英文缩写和流向）：</p><ul><li><strong>Pin 2 (BA/TD) - 发送数据</strong>：DTE -&gt; DCE。</li><li><strong>Pin 3 (BB/RD) - 接收数据</strong>：DCE -&gt; DTE。</li><li><strong>Pin 4 (CA/RTS) - 请求发送</strong>：DTE -&gt; DCE（DTE问Modem：我能发吗？）。</li><li><strong>Pin 5 (CB/CTS) - 清除待发送</strong>：DCE -&gt; DTE（Modem回DTE：你可以发了）。</li><li><strong>Pin 6 (CC/DSR) - DCE准备好</strong>：DCE -&gt; DTE（Modem在线）。</li><li><strong>Pin 20 (CD/DTR) - DTE准备好</strong>：DTE -&gt; DCE（电脑在线）。</li><li><strong>Pin 7 (AB/GND) - 信号地</strong>。</li><li><strong>Pin 8 (CF/CD) - 载波检测</strong>：DCE -&gt; DTE（Modem检测到了对方发来的信号）。</li><li><strong>Pin 22 (CE/RI) - 振铃指示</strong>：DCE -&gt; DTE（有人呼叫）。</li></ul><h4 id="规程特性（通信步骤）">规程特性（通信步骤）</h4><p>这是一个典型的握手过程，分为五个阶段：</p><ol><li><strong>准备</strong>：保证设备加电并连接。</li><li><strong>就绪</strong>：<ul><li>DTE发送 <strong>DTR (20)</strong> -&gt; DCE。</li><li>DCE发送 <strong>DSR (6)</strong> -&gt; DTE。</li><li>双方确认对方都在线。</li></ul></li><li><strong>建立连接 (物理连接)</strong>：<ul><li>发送方DTE发送 <strong>RTS (4)</strong> 请求发送。</li><li>发送方DCE向对方发送载波，然后回送 <strong>CTS (5)</strong> 给DTE，表示允许发送。</li><li>接收方DCE检测到载波，激活 <strong>CD (8)</strong> 通知接收方DTE传输开始。</li></ul></li><li><strong>数据传输</strong>：<ul><li>DTE通过 <strong>TD (2)</strong> 发送数据给DCE。</li><li>DCE将数据调制后发到网络。</li><li>接收端DCE解调后通过 <strong>RD (3)</strong> 发给接收端DTE。</li><li><em>注：同步通信时还需要时钟信号线（Pin 15/17/24）配合。</em></li></ul></li><li><strong>清除 (断开)</strong>：<ul><li>DTE撤销 <strong>RTS (4)</strong>。</li><li>DCE撤销载波和 <strong>CTS (5)</strong>。</li><li>接收方检测到载波消失，断开连接。</li></ul></li></ol><h4 id="其他相关概念">其他相关概念</h4><ul><li><strong>EIA-232子集</strong>：实际应用（如PC串口）常用9针接口（DB-9），去掉了同步时钟线和辅助信道线，只保留核心的异步通信控制线。</li><li><strong>空调制解调器 (Null Modem)</strong>：<ul><li><strong>场景</strong>：两台DTE设备（如两台电脑）距离很近，不需要Modem直接相连。</li><li><strong>做法</strong>：使用交叉线连接。将一端的发送(TX)连到另一端的接收(RX)，一端的RTS连到另一端的CTS等，欺骗DTE以为连接了DCE。</li></ul></li><li><strong>X.21标准</strong>：ITU-T制定的数字接口标准，使用DB-15连接器，减少了控制线数量，更适合数字网络。</li></ul><h3 id="物理层网络互连设备">物理层网络互连设备</h3><h4 id="中继器-Repeater-集线器-Hub">中继器 (Repeater) / 集线器 (Hub)</h4><ul><li><strong>层级</strong>：工作在<strong>物理层</strong>。</li><li><strong>功能</strong>：<strong>再生（Regenerate）信号</strong>。接收衰减的信号，整形、放大后转发出去。</li><li><strong>作用</strong>：扩展局域网的地理覆盖范围。</li><li><strong>限制与问题</strong>：<ol><li><strong>不能隔离冲突</strong>：所有连接的设备在同一个冲突域，设备越多，冲突概率越大，性能越低。</li><li><strong>安全性差</strong>：数据会广播到所有端口。</li><li><strong>协议要求</strong>：连接的两端必须使用<strong>相同</strong>的物理层协议和速率（如都是10Mbps以太网）。</li></ol></li></ul><h2 id="数据链路层">数据链路层</h2><p>数据链路层位于物理层之上，它将物理层提供的比特流封装成<strong>帧 (Frame)</strong>。其核心任务是将不可靠的物理链路转变为可靠的数据链路。主要工作包括三个方面：<strong>线路规程</strong>、<strong>差错控制</strong>和<strong>流量控制</strong>。</p><h3 id="线路规程">线路规程</h3><p>线路规程主要解决“谁在什么时候有权发送数据”的问题，分为两种模式：</p><ol><li><p><strong>询问/确认模式 (ENQ/ACK)</strong></p><ul><li><p><strong>适用场景</strong>：点对点 (Point-to-Point) 的专用链路，两端设备地位平等。</p></li><li><p><strong>工作过程</strong>：</p><ol><li>发起方想发数据，先发一个 <strong>ENQ (询问帧)</strong> 问接收方：“你准备好了吗？”</li><li>接收方如果准备好，回 <strong>ACK (确认帧)</strong>；如果没准备好，回 <strong>NAK (否认帧)</strong>。</li><li>收到 ACK 后，发起方开始传数据。</li><li>数据传完，发 <strong>EOT (传输结束帧)</strong> 断开。</li></ol></li><li><p><strong>异常处理</strong>：如果发了 ENQ 后没收到回应，或者收到 NAK，或者传输中 ACK 丢失，都需要相应的超时重发或等待机制。</p></li></ul></li><li><p><strong>轮询/选择模式 (Poll/Select)</strong></p><ul><li><p><strong>适用场景</strong>：多点连接 (Multipoint)，即主从式结构（一个主设备，多个从设备）。</p></li><li><p><strong>工作方式</strong>：主设备控制链路，从设备只能响应。</p></li><li><p><strong>选择 (Select)</strong>：<strong>主设备 -&gt; 从设备</strong>。当主设备有数据要发给从设备时，发 <strong>SEL</strong> 帧。从设备回 <strong>ACK</strong> 表示准备好接收，回 <strong>NAK</strong> 表示拒绝。</p></li><li><p><strong>轮询 (Poll)</strong>：<strong>从设备 -&gt; 主设备</strong>。主设备想知道从设备有没有数据要发，逐个询问。</p><ul><li>主设备发 <strong>POLL</strong>。</li><li>如果从设备没数据，回 <strong>NAK</strong>。</li><li>如果从设备有数据，直接回 <strong>数据帧</strong>。</li></ul></li></ul></li></ol><h3 id="流量控制与差错控制">流量控制与差错控制</h3><p>流量控制防止发送方发太快把接收方淹没，差错控制（ARQ）处理帧的损坏或丢失。</p><h4 id="停止等待协议-Stop-and-Wait">停止等待协议 (Stop-and-Wait)</h4><ul><li><strong>原理</strong>：发一帧，等一个 ACK，再发下一帧。</li><li><strong>流量控制</strong>：每次只发一帧。效率低，特别是距离长时，大部分时间浪费在等待 ACK 上（半双工）。</li><li><strong>差错控制</strong>：<ul><li><strong>帧破坏</strong>：接收方收到坏帧，回 <strong>NAK</strong>，发送方重传。</li><li><strong>帧丢失</strong>：发送方设置<strong>定时器</strong>，超时未收到应答则重传。</li><li><strong>应答帧丢失</strong>：发送方超时重传，接收方通过<strong>帧编号 (0和1交替)</strong> 识别并丢弃重复帧。</li></ul></li></ul><hr><p><strong>发送一帧所需的最短总时间</strong> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>)：</p><p>完成一个数据帧的发送、传播以及收到确认帧所需的最小时间间隔通常记为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>（或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">t_W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>）。</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><msub><mi>t</mi><mi>I</mi></msub><mo>+</mo><mn>2</mn><msub><mi>t</mi><mi>p</mi></msub><mo>+</mo><mn>2</mn><msub><mi>t</mi><mtext>proc</mtext></msub><mo>+</mo><msub><mi>t</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">W_T = t_I + 2t_p + 2t_\text{proc} + t_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.9305em;vertical-align:-.2861em"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.9305em;vertical-align:-.2861em"></span><span class="mord">2</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">proc</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span></span></p><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：发送一帧所需的<strong>最短总时间</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>I</mi></msub></mrow><annotation encoding="application/x-tex">t_I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：<strong>发送数据帧的时间</strong>，计算公式为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>I</mi></msub><mo>=</mo><mfrac><mtext>帧长</mtext><mtext>接口速率</mtext></mfrac></mrow><annotation encoding="application/x-tex">t_I = \frac{\text{帧长}}{\text{接口速率}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8723em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">接口速率</span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">帧长</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">t_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>：<strong>信号传播时延</strong>，计算公式为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>p</mi></msub><mo>=</mo><mfrac><mtext>距离</mtext><mrow><mn>0.7</mn><mo>×</mo><mtext>光速</mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">t_p = \frac{\text{距离}}{0.7 \times \text{光速}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.2757em;vertical-align:-.4033em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8723em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0.7</span><span class="mbin mtight">×</span><span class="mord text mtight"><span class="mord cjk_fallback mtight">光速</span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">距离</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.4033em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mtext>proc</mtext></msub></mrow><annotation encoding="application/x-tex">t_\text{proc}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">proc</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>：<strong>节点处理数据的时间</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">t_S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：<strong>发送确认帧（ACK）的时间</strong>，计算公式为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>S</mi></msub><mo>=</mo><mfrac><mtext>确认帧长</mtext><mtext>接口速率</mtext></mfrac></mrow><annotation encoding="application/x-tex">t_S = \frac{\text{确认帧长}}{\text{接口速率}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.05764em">S</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8723em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">接口速率</span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.394em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">确认帧长</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>。</li></ul><hr><p><strong>信道利用率</strong> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span>)：</p><p>信道利用率定义为信道被有效占用的时间与总时间之比。</p><ul><li><strong>新版定义：</strong> $$F = \frac{t_I}{W_T}$$</li><li><strong>旧版定义（包含传播时延）：</strong> $$F = \frac{t_I + t_p}{W_T}$$</li></ul><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">F</span></span></span></span> 或 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span>：<strong>信道利用率</strong>。</li></ul><hr><p><strong>有效数据传输率</strong> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>)</p><p>单位时间内传输的有效数据位数。</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mo>=</mo><mfrac><msub><mi>D</mi><mn>1</mn></msub><msub><mi>W</mi><mi>T</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">S = \frac{D_1}{W_T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.1963em;vertical-align:-.836em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0278em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.836em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>：<strong>有效数据传输率</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">D_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.02778em">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3011em"><span style="top:-2.55em;margin-left:-.0278em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：一帧中的<strong>有效数据位数</strong>（不含首部和尾部开销）。</li></ul><hr><p><strong>存在差错时的平均传输时间</strong> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">t_V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>)</p><p>当考虑帧的出错率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span></span></span></span> 时，正确发送一帧所需的平均时间间隔为：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>t</mi><mi>V</mi></msub><mo>=</mo><mfrac><msub><mi>t</mi><mi>W</mi></msub><mrow><mn>1</mn><mo>−</mo><mi>p</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">t_V = \frac{t_W}{1 - p}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:2.1725em;vertical-align:-.8804em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2921em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord mathnormal">p</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.8804em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">t_V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：正确发送一帧的<strong>平均时间</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">t_W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：无差错情况下的最小时间间隔（等同于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span></span></span></span>：<strong>数据帧的出错率</strong>。</li></ul><hr><p><strong>系统吞吐量与传输效率</strong></p><ul><li><strong>最大吞吐量 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mi>max</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">\lambda_{\max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8444em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">m</span><span class="mtight">a</span><span class="mtight">x</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>)</strong>：每秒成功发送的帧数。 $$\lambda_{\max} = \frac{1}{t_V} = \frac{1 - p}{t_W}$$</li><li><strong>极限吞吐量 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi></mrow><annotation encoding="application/x-tex">M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">M</span></span></span></span>)</strong>： $$M = \frac{1}{t_I}$$</li><li><strong>系统的传输效率 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span>)</strong>：最大吞吐量与极限吞吐量之比。 $$\rho = \frac{1 - p}{a}$$ 其中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span></span></span></span> 为总时间与发送时间之比：<strong><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mfrac><msub><mi>t</mi><mi>W</mi></msub><msub><mi>t</mi><mi>I</mi></msub></mfrac></mrow><annotation encoding="application/x-tex">a = \frac{t_W}{t_I}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1.2862em;vertical-align:-.4453em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.8409em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3567em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.1433em"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.4103em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3567em;margin-left:0;margin-right:.0714em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.1433em"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.4453em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></strong> (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a &gt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>)。</li></ul><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span>：<strong>系统传输效率</strong>，其大小与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span></span></span></span> 成反比，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span></span></span></span> 越小（即等待时间越短），效率越高。</li></ul><h4 id="滑动窗口协议">滑动窗口协议</h4><ul><li><strong>原理</strong>：允许发送方在收到 ACK 前连续发送多个帧。</li><li><strong>窗口概念</strong>：<ul><li><strong>发送窗口</strong>：存放已发送但未确认的帧。</li><li><strong>接收窗口</strong>：存放已接收但未上交/未确认的帧。</li><li><strong>编号</strong>：帧使用模 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 编号（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0,1 \dots, n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8389em;vertical-align:-.1944em"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">1</span><span class="mspace" style="margin-right:.1667em"></span><span class="minner">…</span><span class="mspace" style="margin-right:.1667em"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>）。</li></ul></li><li><strong>差错控制策略 (ARQ)</strong>：<ol><li><strong>回退 N (Go-Back-N)</strong>：<ul><li>如果某一帧出错，接收方丢弃该帧及之后所有帧。发送方重传出错帧及之后的所有帧。</li><li><strong>窗口大小限制</strong>：发送窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\le n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7719em;vertical-align:-.136em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>。如果等于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span>，无法区分是新帧还是重传的旧帧（会产生歧义）。</li></ul></li><li><strong>选择拒绝 (Selective Reject)</strong>：<ul><li>接收方只拒收出错的那一帧，缓存后续正确的帧。发送方只重传出错的那一帧。</li><li>需排序和查找机制，复杂。</li><li><strong>窗口大小限制</strong>：发送窗口 + 接收窗口 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">\le n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7719em;vertical-align:-.136em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span>。通常设为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>发送窗口</mtext><mo>=</mo><mtext>接收窗口</mtext><mo>≤</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">发送窗口=接收窗口 \le n/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord cjk_fallback">发送窗口</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8193em;vertical-align:-.136em"></span><span class="mord cjk_fallback">接收窗口</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">n</span><span class="mord">/2</span></span></span></span>。</li></ul></li></ol></li></ul><hr><p><strong>窗口大小的选择</strong>：</p><p>为了使发送方能够不间断地发送数据（即达到极限吞吐量），窗口的大小 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 必须足够大，以覆盖信号在往返时间内能够传输的帧数。</p><ul><li><strong>基本条件：</strong> $$nt_I &gt; 2(t_I + t_p)$$</li><li><strong>考虑确认帧发送时间时：</strong> $$nt_I &gt; t_I + 2t_p + t_s$$</li></ul><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span>：<strong>窗口大小</strong>（允许连续发送的帧数）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>I</mi></msub></mrow><annotation encoding="application/x-tex">t_I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：<strong>发送一个数据帧的时间</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">t_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>：<strong>信号传播时延</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">t_s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：<strong>发送一个确认帧（ACK）的时间</strong>。</li></ul><hr><p><strong>回退 N 协议的效率分析</strong></p><p>在回退N协议中，若某一帧损坏或丢失，发送方必须重传该帧及其后续所有已发送但未确认的帧。</p><ul><li><strong>正确传送一帧所需的平均时间 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>V</mi></msub></mrow><annotation encoding="application/x-tex">t_V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.22222em">V</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>)：</strong> $$t_V = t_I + \frac{pt_W}{1 - p}$$</li><li><strong>系统最大吞吐量 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">\lambda_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8444em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>)：</strong> $$\lambda_{max} = \frac{1}{t_V} = \frac{1 - p}{t_I(1 + p(a - 1))}$$</li><li><strong>系统传输效率 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span>)：</strong> $$\rho = \frac{1 - p}{1 + p(a - 1)}$$</li></ul><p><strong>符号含义：</strong></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span></span></span></span>：<strong>数据帧的出错率</strong>。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>W</mi></msub></mrow><annotation encoding="application/x-tex">t_W</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：发送一帧并收到确认所需的<strong>最小时间间隔</strong>（在效率对比中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><msub><mi>t</mi><mi>W</mi></msub><mi mathvariant="normal">/</mi><msub><mi>t</mi><mi>I</mi></msub></mrow><annotation encoding="application/x-tex">a = t_W / t_I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">W</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span></span></span></span>：<strong>总时间与发送时间之比</strong>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a &gt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.5782em;vertical-align:-.0391em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi></mrow><annotation encoding="application/x-tex">\rho</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">ρ</span></span></span></span>：<strong>系统传输效率</strong>，其随 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span></span></span></span> 的增大而降低，但在相同条件下通常优于停止等待协议。</li></ul><hr><p><strong>窗口尺寸与编号范围的关系</strong></p><p>为了区分新帧和重复帧，协议对窗口尺寸有严格限制：</p><ul><li><strong>回退N协议：</strong> 若帧的编号范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>∼</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \sim n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">0</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>（模 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 编号），则<strong>发送窗口最大为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span></strong>。</li><li><strong>选择拒绝协议：</strong> 若帧的编号范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>∼</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 \sim n-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">0</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>，则发送窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>t</mi></msub></mrow><annotation encoding="application/x-tex">W_t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2806em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 和接收窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">W_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span> 必须满足： $$W_t + W_r \le n$$ 若要求 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>t</mi></msub><mo>=</mo><msub><mi>W</mi><mi>r</mi></msub></mrow><annotation encoding="application/x-tex">W_t = W_r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2806em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:-.1389em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.02778em">r</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>，则窗口尺寸最大为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">n/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal">n</span><span class="mord">/2</span></span></span></span>。</li></ul><hr><p><strong>例题</strong></p><p><strong>卫星通信下的窗口计算</strong></p><p><strong>已知：</strong> 卫星通信中，帧长为 1200 bit，信道速率为 4.8 kbit/s，传播延迟 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>p</mi></msub><mo>=</mo><mn>250</mn><mtext>&nbsp;ms</mtext></mrow><annotation encoding="application/x-tex">t_p = 250\text{ ms}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">250</span><span class="mord text"><span class="mord">&nbsp;ms</span></span></span></span></span>。 <strong>求：</strong> 在全双工通信中，窗口 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 至少应为多少？ <strong>解：</strong></p><ol><li>计算发送一帧的时间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>I</mi></msub></mrow><annotation encoding="application/x-tex">t_I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7651em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3283em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.07847em">I</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>： $$t_I = \frac{1200}{4.8 \times 10^3} = 0.25\text{ s} = 250\text{ ms}$$</li><li>根据窗口选择公式： $$n &gt; \frac{2(t_I + t_p)}{t_I} = \frac{2(250 + 250)}{250} = 4$$ <strong>结论：</strong> 窗口 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">n</span></span></span></span> 至少应大于 4。</li></ol><p><strong>不同协议的传输效率对比</strong></p><p><strong>已知：</strong> 数据帧差错率 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mn>0.01</mn></mrow><annotation encoding="application/x-tex">p = 0.01</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">0.01</span></span></span></span>，参数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mn>4</mn></mrow><annotation encoding="application/x-tex">a = 4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">4</span></span></span></span>。 <strong>比较：</strong> 停止等待协议与滑动窗口协议的效率。 <strong>解：</strong></p><ul><li><strong>停止等待协议：</strong> $$\rho = \frac{1 - p}{a} = \frac{0.99}{4} = 0.2475$$</li><li><strong>滑动窗口协议：</strong> $$\rho = \frac{1 - p}{1 + (a - 1)p} = \frac{0.99}{1 + 3 \times 0.01} = \frac{0.99}{1.03} \approx 0.96$$ <strong>结论：</strong> 即使出错率达到 1%，滑动窗口协议的效率（0.96）仍远高于停止等待协议（约 0.25）。</li></ul><h3 id="HDLC-通信协议">HDLC 通信协议</h3><p>HDLC (High-level Data Link Control) 是典型的<strong>面向比特</strong>的协议，不依赖字符集，通过比特填充实现透明传输。</p><h4 id="帧结构">帧结构</h4><ul><li><strong>标志 (Flag)</strong>：<code>01111110</code>，用于定界。</li><li><strong>位填充 (Bit Stuffing)</strong>：在数据中，只要发现连续 5 个 <code>1</code>，发送方自动插入一个 <code>0</code>；接收方接收时，发现 5 个 <code>1</code> 后面的 <code>0</code> 自动删除。确保数据中不会出现 <code>01111110</code>。</li><li><strong>地址 (Address)</strong>：全 1 为广播。</li><li><strong>控制 (Control)</strong>：决定帧类型（核心）。</li><li><strong>信息 (Info)</strong>：用户数据。</li><li><strong>FCS</strong>：CRC 校验。</li></ul><h4 id="三种帧类型-由控制字段决定">三种帧类型 (由控制字段决定)</h4><ol><li><strong>信息帧 (I-帧, Information)</strong>：<ul><li><strong>首位为 0</strong>。</li><li>用于传输用户数据，包含 <code>N(S)</code> (发送序号) 和 <code>N(R)</code> (期望接收的下一帧序号)。</li><li>支持<strong>捎带确认</strong>：在发数据的同时确认对方的数据。</li></ul></li><li><strong>监管帧 (S-帧, Supervisory)</strong>：<ul><li><strong>前两位为 10</strong>。</li><li>用于流量和差错控制，没有信息字段。</li><li>类型：<ul><li><strong>RR (Receive Ready)</strong>：准备好接收，相当于 ACK。</li><li><strong>RNR (Receive Not Ready)</strong>：忙，暂停发送。</li><li><strong>REJ (Reject)</strong>：拒绝，要求重发 (Go-Back-N)。</li><li><strong>SREJ (Selective Reject)</strong>：选择拒绝。</li></ul></li></ul></li><li><strong>无编号帧 (U-帧, Unnumbered)</strong>：<ul><li><strong>前两位为 11</strong>。</li><li>用于链路建立、断开和管理 (如 SABM 建立连接, DISC 断开连接, UA 确认)。</li></ul></li></ol><h3 id="数据链路层网络互连">数据链路层网络互连</h3><p>这一部分讨论如何扩展局域网，主要涉及网桥和交换机。</p><h4 id="网桥-Bridge">网桥 (Bridge)</h4><ul><li><strong>层级</strong>：工作在数据链路层 (MAC 子层)。</li><li><strong>功能</strong>：连接两个局域网，存储转发帧，进行<strong>地址过滤</strong>（隔离冲突域）。</li><li><strong>路由算法</strong>：<ol><li><strong>透明网桥 (Transparent Bridge)</strong>：<ul><li><strong>自学习</strong>：通过观察源 MAC 地址和入端口，建立转发表 (MAC地址 -&gt; 端口)。</li><li><strong>转发</strong>：查目的 MAC，如果在表中且端口不同则转发；如果在表中且端口相同则丢弃（隔离）；如果不在表中则<strong>泛洪</strong> (广播)。</li><li><strong>生成树协议</strong> (Spanning Tree Protocol, STP)：解决环路导致的广播风暴。通过选举<strong>根网桥 (Root Bridge)</strong>（ID 最小的），并在每个网段选出指定端口，禁用多余路径，将网络逻辑上变成无环树状结构。</li></ul></li><li><strong>源路由网桥</strong>：由发送源在帧中指定路由路径，网桥只照做。</li></ol></li></ul><h4 id="第二层交换机-L2-Switch">第二层交换机 (L2 Switch)</h4><ul><li><strong>本质</strong>：多端口的网桥。</li><li><strong>特点</strong>：每个端口独享带宽（并行工作），隔离<strong>冲突域</strong>，但不隔离<strong>广播域</strong>。</li><li><strong>交换方式</strong>：<ol><li><strong>直通式 (Cut-Through)</strong>：读到目的 MAC (前6字节) 就立即转发。速度快，延迟小，但无法检错，不能连接不同速率端口。</li><li><strong>存储转发 (Store-and-Forward)</strong>：收完整个帧，CRC 校验无误后再转发。最广泛使用，支持不同速率转换，但延迟大。</li></ol></li></ul><h4 id="VLAN-虚拟局域网">VLAN (虚拟局域网)</h4><ul><li><strong>定义</strong>：在物理交换机上逻辑划分网段。</li><li><strong>优点</strong>：<ol><li><strong>端口分隔</strong>：不同 VLAN 无法直接通信（逻辑隔离）。</li><li><strong>安全性</strong>：隔离了广播域，防止广播风暴，提升安全。</li><li><strong>灵活管理</strong>：不受物理位置限制，通过软件配置更改用户组。</li></ol></li><li><strong>实现</strong>：通常在帧中插入 VLAN Tag (如 802.1Q 标准)。不同 VLAN 间通信需要通过<strong>路由器</strong>或<strong>三层交换机</strong>。</li></ul><h2 id="网络层">网络层</h2><h3 id="网络层的功能与服务">网络层的功能与服务</h3><p>网络层的主要任务是将数据从源主机传输到目的主机。为了实现这一目标，它主要提供两个功能：<strong>路由（Routing）<strong>和</strong>交换（Switching）</strong>。</p><h4 id="逻辑寻址">逻辑寻址</h4><p><strong>IP地址</strong>：网络层使用逻辑地址（如IP地址）来标识信源和信宿。这与数据链路层的物理地址（MAC地址）不同。IP地址具有层次结构，有助于路由选择。</p><h4 id="两种服务模型">两种服务模型</h4><p>网络层向传输层提供的服务有两种主要模式，这直接影响了内部的交换方式。</p><ol><li><p><strong>面向连接的服务：虚电路 (Virtual Circuit, VC)</strong></p><ul><li><p><strong>核心思想</strong>：模仿电话系统。</p></li><li><p><strong>过程</strong>：</p><ol><li><strong>建立连接</strong>：发送方发送呼叫请求，建立一条逻辑路径（虚电路）。</li><li><strong>数据传输</strong>：所有分组沿着这条建立好的路径按序发送。分组头部只需要包含短的<strong>虚电路号 (VC ID)</strong>，不需要完整的目的地址。</li><li><strong>连接释放</strong>：传输结束，拆除电路。</li></ol></li><li><p><strong>优点</strong>：保证顺序、可靠性较高、头部开销小、支持预分配带宽。</p></li><li><p><strong>缺点</strong>：建立连接有延迟；若路径中某节点瘫痪，整个电路中断（脆弱性）。</p></li></ul></li><li><p><strong>无连接的服务：数据报 (Datagram)</strong></p><ul><li><p><strong>核心思想</strong>：模仿邮政系统。</p></li><li><p><strong>过程</strong>：每个分组（Packet）独立处理。每个分组都携带完整的源和目的地址。路由器根据当前网络状态为每个分组独立选择路径。</p><ul><li><strong>特点</strong>：<ul><li>分组可能乱序到达。</li><li>分组可能走不同的路径。</li><li>尽力而为的交付（不可靠）。</li></ul></li><li><strong>优点</strong>：灵活、健壮（某节点坏了可以绕路）、无建立连接延迟。</li><li><strong>缺点</strong>：头部开销大（每次都要带全地址）、不保证顺序和可靠性。</li></ul></li></ul></li></ol><h3 id="交换技术的时延计算">交换技术的时延计算</h3><table><thead><tr><th style="text-align:center">方式</th><th style="text-align:center">是否先建立连接</th><th style="text-align:center">是否分组</th><th style="text-align:center">是否存储转发</th></tr></thead><tbody><tr><td style="text-align:center">电路交换</td><td style="text-align:center">✅</td><td style="text-align:center">❌</td><td style="text-align:center">❌</td></tr><tr><td style="text-align:center">报文交换</td><td style="text-align:center">❌</td><td style="text-align:center">❌</td><td style="text-align:center">✅（整报）</td></tr><tr><td style="text-align:center">虚电路</td><td style="text-align:center">✅</td><td style="text-align:center">✅</td><td style="text-align:center">✅（分组）</td></tr><tr><td style="text-align:center">数据报</td><td style="text-align:center">❌</td><td style="text-align:center">✅</td><td style="text-align:center">✅（分组）</td></tr></tbody></table><p>例题，对比<strong>电路交换</strong>、<strong>报文交换</strong>、**分组交换（虚电路）<strong>和</strong>分组交换（数据报）**的端到端延迟。</p><p><strong>场景假设</strong>：</p><ul><li>路径：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>→</mo><mi>B</mi><mo>→</mo><mi>C</mi><mo>→</mo><mi>D</mi></mrow><annotation encoding="application/x-tex">A\to B\to C\to D</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.02778em">D</span></span></span></span>（3段链路）。</li><li>报文长度：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal">L</span></span></span></span> bit。</li><li>带宽（速率）：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span> bps。</li><li>传播延迟：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">t_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>（每段）。</li><li>分组大小：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span> bit（含头部）。</li><li>建立连接时间：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mtext>setup</mtext></msub></mrow><annotation encoding="application/x-tex">t_\text{setup}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2806em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">setup</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>。</li></ul><ol><li><p><strong>电路交换</strong> (Circuit Switching)</p><ul><li><p><strong>机制</strong>：物理链路直接连通，数据像水流一样过去。</p></li><li><p><strong>总时延</strong> = 建立时间 + 发送时延 + 传播时延</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo>=</mo><msub><mi>t</mi><mtext>setup</mtext></msub><mo>+</mo><mfrac><mi>L</mi><mi>R</mi></mfrac><mo>+</mo><mn>3</mn><mo>×</mo><msub><mi>t</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">T = t_\text{setup} + \frac{L}{R} + 3 \times t_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2806em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">setup</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">3</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span></span></p></li><li><p><em>注</em>：中间节点没有存储转发，所以发送时延只算一次（源头发出，终点几乎同时开始接收）。</p></li></ul></li><li><p><strong>报文交换</strong> (Message Switching)</p><ul><li><p><strong>机制</strong>：存储-转发。整个报文在每一跳都要收齐了再发。</p></li><li><p><strong>总时延</strong> = (发送时延 + 传播时延) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord">×</span></span></span></span> 跳数</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo>=</mo><mn>3</mn><mo>×</mo><mo stretchy="false">(</mo><mfrac><mrow><mi>L</mi><mo>+</mo><mtext>header</mtext></mrow><mi>R</mi></mfrac><mo>+</mo><msub><mi>t</mi><mi>p</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">T = 3 \times (\frac{L + \text{header}}{R} + t_p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">3</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-.686em"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span><span class="mord text"><span class="mord">header</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p></li><li><p><em>注</em>：每一跳都要完整的发送时间。</p></li></ul></li><li><p><strong>分组交换 - 虚电路</strong> (Packet Switching - Virtual Circuit)</p><ul><li><p><strong>机制</strong>：先建立连接，然后分组<strong>流水线</strong>（Pipeline）传输。</p></li><li><p><strong>时延组成</strong>：建立时间 + 第一个分组到达时间 + 剩余分组的发送时间。</p></li><li><p><strong>总时延</strong></p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo>=</mo><msub><mi>t</mi><mtext>setup</mtext></msub><mo>+</mo><mo stretchy="false">[</mo><mn>3</mn><mo>×</mo><mo stretchy="false">(</mo><mfrac><mi>P</mi><mi>R</mi></mfrac><mo>+</mo><msub><mi>t</mi><mi>p</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>+</mo><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mfrac><mi>P</mi><mi>R</mi></mfrac></mrow><annotation encoding="application/x-tex">T=t_\text{setup} + [3 \times (\frac{P}{R} + t_p)] + (N-1) \times \frac{P}{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2806em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord text mtight"><span class="mord mtight">setup</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord">3</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-.686em"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mclose">)]</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><ul><li>其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span> 是分组数量。</li><li>第一部分是建立连接。</li><li>第二部分是<strong>第一个分组</strong>完整走完3跳到达终点的时间。</li><li>第三部分是<strong>后续分组</strong>紧接着从源头出来的时间（因为是流水线，当第1个分组在链路2时，第2个分组在链路1，以此类推，终点每隔 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi mathvariant="normal">/</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">P/R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.13889em">P</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span> 就收到一个包）。</li></ul></li></ul></li><li><p><strong>分组交换 - 数据报</strong> (Packet Switching - Datagram)</p><ul><li><p><strong>机制</strong>：无连接，直接分组流水线传输。</p></li><li><p><strong>总时延</strong> = (第一个分组到达时间) + (剩余分组发送时间)</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>T</mi><mo>=</mo><mo stretchy="false">[</mo><mn>3</mn><mo>×</mo><mo stretchy="false">(</mo><mfrac><mi>P</mi><mi>R</mi></mfrac><mo>+</mo><msub><mi>t</mi><mi>p</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>+</mo><mo stretchy="false">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>×</mo><mfrac><mi>P</mi><mi>R</mi></mfrac></mrow><annotation encoding="application/x-tex">T = [3 \times (\frac{P}{R} + t_p)] + (N-1) \times \frac{P}{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.13889em">T</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord">3</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-.686em"></span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.1514em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span><span class="mclose">)]</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:2.0463em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em"><span style="top:-2.314em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.677em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.13889em">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p></li><li><p><em>区别</em>：相比虚电路，仅仅少了一个 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi>s</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>p</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{setup}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9012em;vertical-align:-.2861em"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.2806em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">p</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.2861em"><span></span></span></span></span></span></span></span></span></span>。</p></li></ul></li></ol><hr><h3 id="路由算法">路由算法</h3><p>路由算法分为<strong>非适应性（静态）<strong>和</strong>适应性（动态）</strong>。重点掌握动态路由算法。</p><h4 id="距离向量路由-Distance-Vector-DV">距离向量路由 (Distance Vector, DV)</h4><ul><li><strong>典型协议</strong>：RIP (Routing Information Protocol)。</li><li><strong>算法基础</strong>：Bellman-Ford 算法。</li><li><strong>工作原理</strong>：<ul><li><strong>"谣言"传播</strong>：每个路由器只和<strong>邻居</strong>交换信息。</li><li><strong>交换内容</strong>：自己的<strong>整个路由表</strong>（我去哪里需要多远）。</li><li><strong>更新策略</strong>：周期性（如30秒）更新。</li><li><strong>计算逻辑</strong>：如果邻居到目标X的距离 + 我到邻居的距离 &lt; 我当前到X的距离，则更新路由表。</li></ul></li><li><strong>特点</strong>：实现简单，但<strong>收敛慢</strong>，存在**计数到无穷大（Count-to-Infinity）**问题（好消息传得快，坏消息传得慢）。</li></ul><h4 id="链路状态路由-Link-State-LS">链路状态路由 (Link State, LS)</h4><ul><li><strong>典型协议</strong>：OSPF (Open Shortest Path First)。</li><li><strong>算法基础</strong>：Dijkstra 算法 (SPF)。</li><li><strong>工作原理</strong>：<ol><li><strong>发现邻居</strong>：发送 Hello 包。</li><li><strong>测量开销</strong>：测算到邻居的 metric（如带宽、延迟）。</li><li><strong>构造LSP (链路状态包)</strong>：包含“我是谁，我的邻居是谁，费用多少”。</li><li><strong>广播 (Flooding)</strong>：将LSP发送给网络中<strong>所有</strong>路由器（不仅仅是邻居）。</li><li><strong>计算</strong>：每个路由器拥有全网一致的拓扑图（链路状态数据库），独立运行 Dijkstra 算法计算以自己为根的最短路径树。</li></ol></li><li><strong>特点</strong>：收敛快，不易产生环路，CPU消耗较高。</li></ul><p><strong>Dijkstra 算法计算步骤（必考操作）：</strong><br>给定一个图和起点（如A）：</p><ol><li><strong>初始化</strong>：集合 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mo stretchy="false">{</mo><mi>A</mi><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">N=\{A\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">{</span><span class="mord mathnormal">A</span><span class="mclose">}</span></span></span></span>。列出A到直接邻居的距离，其他为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord">∞</span></span></span></span>。</li><li><strong>找最小</strong>：在不在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span> 中的节点里，找一个距离A最近的节点（比如B），加入 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span>。</li><li><strong>更新（松弛）</strong>：以新加入的节点B为跳板，检查能不能缩短A到其他节点的距离。如果 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">)</mo><mo>+</mo><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>B</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mi>D</mi><mi>i</mi><mi>s</mi><mi>t</mi><mo stretchy="false">(</mo><mi>A</mi><mo separator="true">,</mo><mi>C</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Dist(A, B) + Dist(B, C) &lt; Dist(A, C)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">D</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">D</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathnormal" style="margin-right:.02778em">D</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mopen">(</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span><span class="mclose">)</span></span></span></span>，则更新 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span></span></span></span> 的距离。</li><li><strong>重复</strong>：直到所有节点都加入 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.10903em">N</span></span></span></span>。</li></ol><h3 id="路由协议体系">路由协议体系</h3><p>互联网路由协议分为两大类：</p><ol><li><p><strong>IGP (内部网关协议)</strong>：在同一个<strong>自治系统 (AS)</strong> 内部使用。</p><ul><li><strong>RIP</strong>：基于距离向量，跳数作为度量，最大15跳，<strong>适合小网络</strong>。</li><li><strong>OSPF</strong>：基于链路状态，度量值通常与带宽成反比，<strong>支持大规模网络</strong>，分区域 (Area) 管理。</li></ul></li><li><p><strong>EGP (外部网关协议)</strong>：在不同的自治系统 (AS) 之间使用。</p><ul><li><strong>BGP (Border Gateway Protocol)</strong>：<ul><li>路径向量协议 (Path Vector)。</li><li>不仅考虑最短路径，还考虑<strong>策略</strong>（如政治、经济因素）。</li><li>避免环路：通过记录经过的 AS 序列。</li></ul></li></ul></li></ol><h3 id="网络层互连设备">网络层互连设备</h3><ul><li><strong>路由器 (Router)</strong>：<ul><li>工作在网络层。</li><li>根据 IP 地址转发。</li><li>隔离广播域。</li><li>主要功能：路由选择、分组转发。</li></ul></li><li><strong>第三层交换机 (L3 Switch)</strong>：<ul><li>本质是“带有路由功能的交换机”。</li><li><strong>一次路由，多次交换</strong>：第一个包通过CPU软件路由，建立流表后，后续包通过硬件ASIC芯片快速转发。</li><li>速度快，常用于局域网核心层。</li></ul></li></ul><h3 id="拥塞控制与流量控制">拥塞控制与流量控制</h3><ul><li><strong>拥塞 (Congestion)</strong>：是一个<strong>全局性</strong>问题。网络中数据包太多，超过了处理能力，导致性能下降（吞吐量下降，延迟急剧增加）。</li><li><strong>流量控制 (Flow Control)</strong>：是<strong>点对点</strong>问题。发送方发太快，接收方来不及收。</li><li><strong>拥塞控制方法</strong>：<ul><li><strong>开环控制（预防）</strong>：设计时就决定好，如限制入网流量。</li><li><strong>闭环控制（反馈）</strong>：基于反馈调节。<ul><li><strong>抑制包 (Choke Packet)</strong>：路由器拥塞时直接发包告诉源主机“慢点发”。</li><li><strong>丢弃分组</strong>：缓冲区满了就丢包（TCP会将其视为拥塞信号）。</li></ul></li></ul></li><li><strong>死锁</strong>：<ul><li><strong>存储转发死锁</strong>：缓冲区满了，这就形成了互锁。</li><li><strong>重装死锁</strong>：接收端无法重组分片，这就占着缓冲区不释放。</li></ul></li></ul><h2 id="网络层专题：网络互联设备">网络层专题：网络互联设备</h2><h3 id="物理层互联设备">物理层互联设备</h3><p>物理层设备只负责处理<strong>信号</strong>（比特流），不理解帧结构或IP地址，因此它们也是“傻瓜”设备。</p><h4 id="中继器-Repeater">中继器 (Repeater)</h4><ul><li><p><strong>功能</strong>：对衰减的信号进行<strong>再生、整形和放大</strong>，然后转发出去。</p></li><li><p><strong>目的</strong>：扩展局域网的物理覆盖范围（克服信号衰减限制）。</p></li><li><p><strong>限制</strong>：</p><ul><li>连接的两端必须是<strong>相同</strong>的物理层和MAC协议（例如都是10Mbps以太网）。<ul><li><strong>不能隔离冲突</strong>：它会将一端的冲突和噪声复制到另一端。</li><li><strong>性能影响</strong>：连接的站点越多，流量越大，冲突概率越高，导致网络性能下降。</li></ul></li></ul></li></ul><h4 id="集线器-Hub">集线器 (Hub)</h4><ul><li><p><strong>本质</strong>：<strong>多端口的中继器</strong>。</p></li><li><p><strong>工作方式</strong>：从一个端口收到的信号，经过再生放大后，向<strong>除输入端口外的所有其他端口</strong>转发（广播式转发）。</p><ul><li><strong>特性</strong>：<ul><li><strong>物理星型，逻辑总线</strong>：物理上看是星型连接，但逻辑上所有设备共享同一条介质。</li><li><strong>共享带宽</strong>：所有端口共享总带宽（如10Mbps的Hub，10个端口同时工作，每个平均只有1Mbps）。</li><li><strong>安全性差</strong>：所有数据发往所有端口，容易被窃听（Sniffing）。</li></ul></li><li><strong>冲突域</strong>：Hub连接的所有设备属于<strong>同一个冲突域</strong>（Collision Domain）。</li></ul></li></ul><h3 id="数据链路层互联设备">数据链路层互联设备</h3><p>链路层设备能识别<strong>MAC地址</strong>（帧），具备存储转发和寻址能力。</p><h4 id="网桥-Bridge-2">网桥 (Bridge)</h4><ul><li><p><strong>功能</strong>：连接两个或多个局域网网段，基于MAC地址表进行帧的<strong>存储和转发</strong>。</p><ul><li><strong>核心作用</strong>：<ul><li><strong>隔离冲突域</strong>：网桥的每个端口是一个独立的冲突域。端口A的冲突不会传到端口B。</li><li><strong>过滤通信</strong>：根据目的MAC地址决定是转发到另一端，还是丢弃（如果在同一侧）。</li></ul></li></ul></li><li><p><strong>优点</strong>：扩展网络范围，减少冲突，提高性能和安全性。</p></li></ul><h4 id="二层交换机-L2-Switch">二层交换机 (L2 Switch)</h4><ul><li><strong>本质</strong>：<strong>多端口的网桥</strong>。<ul><li><strong>工作原理</strong>：<ul><li><strong>MAC地址表</strong>：自动学习源MAC地址与端口的映射关系。</li><li><strong>独占带宽</strong>：每个端口独享带宽（如10个100Mbps端口，总背板带宽需大于1000Mbps），支持<strong>全双工</strong>通信。</li><li><strong>硬件转发</strong>：使用ASIC芯片实现线速交换，速度极快。</li></ul></li></ul></li></ul><hr><h4 id="三种典型的交换技术">三种典型的交换技术</h4><ol><li><strong>直通式 (Cut-Through)</strong>：<ul><li>机制：一读到目的MAC地址（前6字节）就立即查找转发表并转发。</li><li>优点：<strong>延迟极小</strong>，速度快。</li><li>缺点：<strong>无法检错</strong>（CRC校验在帧尾），坏帧也会被转发；不能连接不同速率的端口。</li></ul></li><li><strong>存储转发 (Store-and-Forward)</strong>：<ul><li>机制：收完整个帧，进行CRC校验，无误后再转发。</li><li>优点：<strong>检错能力强</strong>，可靠性高；支持<strong>不同速率</strong>端口转换（如10M转100M）。</li><li>缺点：<strong>延迟大</strong>（尤其是长帧）。</li><li><em>注：这是目前最广泛使用的方式。</em></li></ul></li><li><strong>免碎片转发 (Fragment Free)</strong>：<ul><li>机制：接收前64字节（最小帧长）后开始转发。</li><li>折中方案：过滤掉了因冲突产生的碎片（通常小于64字节），速度介于前两者之间。</li></ul></li></ol><h3 id="冲突域与广播域">冲突域与广播域</h3><ul><li><strong>冲突域 (Collision Domain)</strong>：<ul><li>定义：同一物理网段上，可能发生信号碰撞的节点集合。</li><li><strong>Hub</strong>：所有端口在同一个冲突域。</li><li><strong>Switch/Bridge</strong>：<strong>每个端口</strong>是一个独立的冲突域（隔离了冲突）。</li></ul></li><li><strong>广播域 (Broadcast Domain)</strong>：<ul><li>定义：能接收到同一个广播帧（MAC全1）的节点集合。</li><li><strong>Hub/Switch/Bridge</strong>：默认情况下，连接的所有设备都在<strong>同一个广播域</strong>（广播帧会穿透交换机）。</li><li><strong>Router/VLAN</strong>：可以<strong>隔离广播域</strong>。</li></ul></li></ul><h3 id="VLAN-虚拟局域网-2">VLAN (虚拟局域网)</h3><ul><li><strong>定义</strong>：在二层交换机上，通过软件逻辑地将设备划分为不同的广播域，而不受物理位置限制。</li><li><strong>优点</strong>：<ol><li><strong>控制广播风暴</strong>：广播帧只在VLAN内部传播，不会扩散到全网。</li><li><strong>安全性</strong>：不同VLAN的用户默认无法直接通信。</li><li><strong>灵活管理</strong>：更改用户所属组只需修改软件配置，无需物理换线。</li></ol></li><li><strong>划分方式</strong>：最常用的是基于<strong>端口</strong>划分，也有基于MAC地址划分。</li><li><strong>通信限制</strong>：不同VLAN之间属于不同的逻辑网络，<strong>二层交换机无法实现跨VLAN通信</strong>，必须借助路由器或三层交换机。</li></ul><h3 id="网络层互联设备">网络层互联设备</h3><p><strong>路由器 (Router)</strong></p><ul><li><strong>层级</strong>：工作在<strong>网络层</strong>。</li><li><strong>功能</strong>：<ul><li><strong>异构网络互联</strong>：连接不同的网络（如以太网和广域网）。</li><li><strong>路由选择</strong>：基于IP地址，利用路由表选择最佳路径。</li><li><strong>隔离广播</strong>：路由器<strong>不转发广播包</strong>，因此每个端口都是一个独立的广播域。</li></ul></li><li><strong>与网桥/交换机的区别</strong>：<ul><li>交换机看MAC地址，路由器看IP地址。</li><li>交换机（二层）不需要IP地址即可转发数据；路由器每个接口都必须配置IP地址。</li></ul></li></ul><p><strong>三层交换机 (L3 Switch)</strong></p><ul><li><strong>产生背景</strong>：VLAN隔离了广播域，但VLAN间通信如果全靠单臂路由器（Router-on-a-stick），速度慢且有瓶颈。</li><li><strong>本质</strong>：<strong>二层交换机 + 路由模块</strong>（通常是硬件路由）。</li><li><strong>工作原理</strong>：<strong>“一次路由，多次交换”</strong>。<ul><li>首个数据流的第一个包通过路由模块（CPU软件查找）处理，确定路径。</li><li>系统生成硬件转发表。</li><li>后续数据包直接由底层硬件（ASIC）高速转发，不再经过CPU。</li></ul></li><li><strong>应用</strong>：用于局域网核心层，实现VLAN间的高速互访。</li></ul><h3 id="高层互联设备">高层互联设备</h3><p><strong>网关 (Gateway)</strong></p><ul><li><strong>定义</strong>：一个笼统的概念，指<strong>协议转换器</strong>。</li><li><strong>功能</strong>：用于连接两个体系结构完全不同的网络（如TCP/IP网络和SNA网络），通常工作在应用层或高层。</li><li><strong>注意</strong>：在日常PC配置中提到的“默认网关”，实际上通常指的是局域网出口<strong>路由器</strong>的IP地址。</li></ul><hr><table><thead><tr><th style="text-align:left">设备</th><th style="text-align:left">所在层次</th><th style="text-align:left">隔离冲突域?</th><th style="text-align:left">隔离广播域?</th><th style="text-align:left">寻址依据</th><th style="text-align:left">核心功能</th></tr></thead><tbody><tr><td style="text-align:left"><strong>中继器/集线器</strong></td><td style="text-align:left">物理层</td><td style="text-align:left"><strong>否</strong></td><td style="text-align:left"><strong>否</strong></td><td style="text-align:left">无</td><td style="text-align:left">信号再生、放大</td></tr><tr><td style="text-align:left"><strong>网桥/二层交换机</strong></td><td style="text-align:left">数据链路层</td><td style="text-align:left"><strong>是</strong> (每端口)</td><td style="text-align:left"><strong>否</strong> (VLAN除外)</td><td style="text-align:left">MAC地址</td><td style="text-align:left">帧过滤、转发</td></tr><tr><td style="text-align:left"><strong>路由器</strong></td><td style="text-align:left">网络层</td><td style="text-align:left"><strong>是</strong></td><td style="text-align:left"><strong>是</strong> (每接口)</td><td style="text-align:left">IP地址</td><td style="text-align:left">路由选择、网络互联</td></tr><tr><td style="text-align:left"><strong>三层交换机</strong></td><td style="text-align:left">网络层+链路层</td><td style="text-align:left"><strong>是</strong></td><td style="text-align:left"><strong>是</strong> (VLAN间)</td><td style="text-align:left">IP+MAC</td><td style="text-align:left">VLAN间高速路由</td></tr></tbody></table><h2 id="传输层">传输层</h2><h3 id="传输层的功能与服务">传输层的功能与服务</h3><ul><li><strong>位置</strong>：位于通信子网（下三层）和资源子网（上三层）之间。</li><li><strong>对象</strong>：网络层负责“主机到主机”的通信，而传输层负责<strong>源主机进程到目的主机进程</strong>（端到端）的通信。</li><li><strong>目标</strong>：提供<strong>可靠的、透明的</strong>数据传输。</li></ul><p><strong>主要功能</strong>：</p><ul><li><strong>端到端报文传递</strong>：确保数据从发送进程准确到达接收进程。</li><li><strong>服务点寻址</strong>：<ul><li><strong>NSAP (网络服务访问点)</strong>：即<strong>IP地址</strong>，用于定位主机。</li><li><strong>TSAP (传输服务访问点)</strong>：即<strong>端口号</strong>，用于定位主机上的具体进程。</li></ul></li><li><strong>复用与分用</strong>：<ul><li><strong>向上复用</strong>：多个传输层连接共享一个网络层连接（IP）。它们用不同的端口。</li><li><strong>向下复用</strong>：一个传输层连接使用多个网络层连接（以增加带宽或可靠性）。把一个传输连接复用到多个IP，例如在流量较⼤时，使⽤多个⽹卡将流量拆分。</li></ul></li><li><strong>差错控制</strong>：传输层需要进⾏差错处理以保证端到端的可靠性。例如，当包在路由器内部处理时可能引⼊差错，这些差错不会被数据链路层发现，因此传输层必须进⾏⾃⼰的端到端检查。</li><li><strong>拆分与组装</strong>：将长报文切分成适合网络传输的数据段，<strong>标上序号</strong>，并在接收端重组。</li><li><strong>丢失控制</strong>：通过丢失重传来确保数据包正确到达。</li><li><strong>重复控制</strong>：通过序列编号使接收⽅可以识别并丢弃重复的段。</li></ul><hr><p><strong>两种服务类型</strong>：</p><ul><li><strong>面向连接的服务</strong>：建立连接 -&gt; 传输数据 -&gt; 释放连接（如 TCP）。</li><li><strong>无连接的服务</strong>：直接发送数据，不保证到达（如 UDP）。</li></ul><h4 id="传输服务原语">传输服务原语</h4><p>ISO定义了四类基本的交互动作：</p><ul><li><strong>请求 (Request)</strong>：用户（上层）发给服务提供者（传输层），请求某项工作（如建立连接）。</li><li><strong>指示 (Indication)</strong>：服务提供者通知用户发生了某事（如收到连接请求）。</li><li><strong>响应 (Response)</strong>：用户对“指示”的回复。</li><li><strong>确认 (Confirm)</strong>：服务提供者告诉用户，刚才的“请求”已经完成了。</li><li><em>具体的原语包括：T-CONNECT（连接）、T-DISCONNECT（断开）、T-DATA（数据）、T-UNITDATA（无连接数据）。</em></li></ul><h3 id="传输协议要素">传输协议要素</h3><p>为了在不可靠的网络上实现可靠传输，传输层协议必须解决以下问题：</p><ol><li><p><strong>差错控制</strong> (Error Control)</p><ul><li><p><strong>范围</strong>：不仅检查数据，还检查控制信息。</p></li><li><p><strong>机制</strong>：</p><ul><li><strong>校验和 (Checksum)</strong>：检测数据是否损坏。</li><li><strong>ARQ (自动重传请求)</strong>：接收方发送确认 (ACK) 或 否认 (NAK)，发送方超时重传。</li><li><strong>区分错误</strong>：需要区分是“数据链路层没检查出来的错误”还是“传输层引入的错误”。</li></ul></li></ul></li><li><p><strong>序列控制</strong> (Sequence Control)</p><ul><li><p><strong>分段</strong>：将大块数据切分。</p></li><li><p><strong>编号</strong>：给每个数据段分配序列号。</p></li><li><p><strong>功能</strong>：解决数据包的<strong>丢失</strong>、<strong>重复</strong>和<strong>乱序</strong>问题。接收方根据序列号去重并重新排序。</p></li></ul></li><li><p><strong>流量控制</strong> (Flow Control)</p><ul><li><p><strong>区别</strong>：数据链路层的流量控制是相邻节点间的，传输层是<strong>端到端</strong>的。</p></li><li><p><strong>机制</strong>：<strong>可变大小</strong>的滑动窗口协议。</p></li><li><p><strong>动态调整</strong>：窗口大小不是固定的，而是根据接收端的缓冲区大小（接收能力）动态变化的。发送窗口 = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mtext>拥塞窗口</mtext><mo separator="true">,</mo><mtext>接收端通告窗口</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\min(\text{拥塞窗口}, \text{接收端通告窗口})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord text"><span class="mord cjk_fallback">拥塞窗口</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord text"><span class="mord cjk_fallback">接收端通告窗口</span></span><span class="mclose">)</span></span></span></span>。</p></li></ul></li></ol><h3 id="传输层拥塞控制">传输层拥塞控制</h3><p>拥塞控制是为了防止过多的数据注入到网络中，导致网络核心负载过大。TCP 采用了四种核心算法。</p><p><strong>关键变量</strong>：</p><ul><li><p><strong>Cwnd (Congestion Window)</strong>：拥塞窗口，发送方估算的当前网络能承受的数据量。</p></li><li><p><strong>Rwnd (Receiver Window)</strong>：接收端窗口，接收方通知的自己缓冲区的剩余空间。</p></li><li><p><strong>ssthresh (Slow Start Threshold)</strong>：慢启动阈值，用于切换算法。</p></li><li><p><strong>SMSS</strong>：发送端最大数据段尺寸（单位通常是字节或报文段个数）。</p></li></ul><p><strong>四大算法</strong></p><ol><li><p><strong>慢启动</strong> (Slow Start)</p><ul><li><p><strong>初始状态</strong>：Cwnd = 1 个 SMSS。</p></li><li><p><strong>增长规则</strong>：每收到一个 ACK，Cwnd 加 1。即每经过一个传输轮次（RTT），Cwnd <strong>加倍</strong>（指数增长：1, 2, 4, 8…）。</p></li><li><p><strong>停止条件</strong>：当 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Cwnd</mtext><mo>≥</mo><mtext>ssthresh</mtext></mrow><annotation encoding="application/x-tex">\text{Cwnd} \ge \text{ssthresh}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8304em;vertical-align:-.136em"></span><span class="mord text"><span class="mord">Cwnd</span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord text"><span class="mord">ssthresh</span></span></span></span></span> 时，停止慢启动，转入<strong>拥塞避免</strong>。</p></li></ul></li><li><p><strong>拥塞避免</strong> (Congestion Avoidance)</p><ul><li><p><strong>触发条件</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>Cwnd</mtext><mo>≥</mo><mtext>ssthresh</mtext></mrow><annotation encoding="application/x-tex">\text{Cwnd} \ge \text{ssthresh}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8304em;vertical-align:-.136em"></span><span class="mord text"><span class="mord">Cwnd</span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord text"><span class="mord">ssthresh</span></span></span></span></span>。</p></li><li><p><strong>增长规则</strong>：每经过一个 RTT，Cwnd 增加 1 个 SMSS。即<strong>线性增长</strong>（加法增大），让窗口缓慢变大，试探网络极限。</p></li></ul></li><li><p><strong>超时处理</strong> (Severe Congestion)</p><ul><li>如果发生<strong>超时 (Timeout)</strong>（说明网络堵塞严重）：<ol><li><strong>新的 ssthresh</strong> = 当前 Cwnd / 2。</li><li><strong>新的 Cwnd</strong> = 1。</li><li><strong>重新进入慢启动</strong>。</li></ol></li></ul></li><li><p><strong>快速重传与快速恢复</strong> (Fast Retransmit / Fast Recovery)</p><ul><li><p><strong>触发条件</strong>：发送方连续收到 <strong>3个重复的 ACK</strong>（即共收到4个相同的ACK）。这通常意味着某个报文段丢了，但网络还没完全瘫痪（还能传回ACK）。</p></li><li><p><strong>快速重传</strong>：立即重传丢失的报文段，不等超时定时器。</p></li><li><p><strong>快速恢复</strong>：</p><ol><li><strong>新的 ssthresh</strong> = 当前 Cwnd / 2。</li><li><strong>新的 Cwnd</strong> = 新的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>ssthresh</mtext><mo>+</mo><mn>3</mn><mo>×</mo><mtext>SMSS</mtext></mrow><annotation encoding="application/x-tex">\text{ssthresh} + 3 \times \text{SMSS}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.7778em;vertical-align:-.0833em"></span><span class="mord text"><span class="mord">ssthresh</span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.7278em;vertical-align:-.0833em"></span><span class="mord">3</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord text"><span class="mord">SMSS</span></span></span></span></span>（这3个是为了抵消那3个重复ACK带来的窗口占用）。</li><li>之后进入<strong>拥塞避免</strong>（线性增长），而不是慢启动。</li></ol></li></ul></li></ol><h4 id="拥塞控制图解与计算例题">拥塞控制图解与计算例题</h4><p><img src="https://images.kisechan.space/20251220202410381.png" srcset="/img/loading.gif" lazyload alt=""></p><p><strong>图解逻辑</strong>：</p><ol><li><strong>指数上升</strong>：慢启动阶段。</li><li><strong>拐点</strong>：达到 ssthresh，变为线性上升。</li><li><strong>大跌</strong>：遇到超时，降为1，阈值减半。</li><li><strong>小跌</strong>：遇到3个重复ACK，降为一半，阈值减半（快速恢复）。</li></ol><p><strong>计算例题解析</strong>：</p><ul><li><strong>题目</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>M</mi><mi>S</mi><mi>S</mi><mo>=</mo><mn>1</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">MSS = 1KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">MSS</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。当前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi><mo>=</mo><mn>18</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">Cwnd = 18KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">18</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。发生<strong>超时</strong>。问：接着4个传输并发量也是成功的，该窗口将是多少？</li><li><strong>解析步骤</strong>：<ol><li><strong>发生超时</strong>：<ul><li>新 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>=</mo><mtext>当前&nbsp;</mtext><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mn>18</mn><mi mathvariant="normal">/</mi><mn>2</mn><mo>=</mo><mn>9</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">ssthresh = \text{当前 } Cwnd / 2 = 18 / 2 = 9KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal">ss</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord cjk_fallback">当前</span><span class="mord">&nbsp;</span></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span><span class="mord">/2</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">18/2</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">9</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。</li><li>新 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">Cwnd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 重置为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">1KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。</li><li>进入<strong>慢启动</strong>。</li></ul></li><li><strong>第1次传输</strong>：发送1KB。成功收到ACK。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">Cwnd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 翻倍 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo><mn>2</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">\to 2KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。</li><li><strong>第2次传输</strong>：发送2KB。成功收到ACK。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">Cwnd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 翻倍 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo><mn>4</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">\to 4KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">4</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。</li><li><strong>第3次传输</strong>：发送4KB。成功收到ACK。<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">Cwnd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 翻倍 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>→</mo><mn>8</mn><mi>K</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">\to 8KB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.3669em"></span><span class="mrel">→</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord">8</span><span class="mord mathnormal" style="margin-right:.07153em">K</span><span class="mord mathnormal" style="margin-right:.05017em">B</span></span></span></span>。</li><li><strong>第4次传输</strong>：此时窗口为8KB，发送8KB数据。<ul><li><em>注意</em>：如果是问第4次传输<strong>后</strong>的窗口大小：下次理论翻倍是16，但 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>s</mi><mi>t</mi><mi>h</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>h</mi><mo>=</mo><mn>9</mn></mrow><annotation encoding="application/x-tex">ssthresh=9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal">ss</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">9</span></span></span></span>。所以 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>w</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">Cwnd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.02691em">Cw</span><span class="mord mathnormal">n</span><span class="mord mathnormal">d</span></span></span></span> 会变成 9（到达阈值），余下的按线性增长。但根据PPT的简略答案，它问的是“接着4个…传输”，通常指这4次传输所使用的窗口序列是 1, 2, 4, 8。所以第4次传输时的窗口是 <strong>8KB</strong>。</li></ul></li></ol></li></ul><h3 id="传输连接管理（三次握手）">传输连接管理（三次握手）</h3><h4 id="连接建立">连接建立</h4><p><img src="https://images.kisechan.space/20251220202811488.png" srcset="/img/loading.gif" lazyload alt=""></p><p>即著名的<strong>三次握手</strong>：</p><ol><li><strong>A -&gt; B</strong>: 发送 <strong>CR (Connection Request)</strong> 或 SYN。携带初始序号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal">x</span></span></span></span>。</li><li><strong>B -&gt; A</strong>: 发送 <strong>CC (Connection Confirm)</strong> 或 SYN+ACK。确认号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>c</mi><mi>k</mi><mo>=</mo><mi>x</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">ack=x+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>，携带B的初始序号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.625em;vertical-align:-.1944em"></span><span class="mord mathnormal" style="margin-right:.03588em">y</span></span></span></span>。</li><li><strong>A -&gt; B</strong>: 发送 <strong>AK (Acknowledgment)</strong> 或 ACK。确认号 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>c</mi><mi>k</mi><mo>=</mo><mi>y</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">ack=y+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">c</span><span class="mord mathnormal" style="margin-right:.03148em">k</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7778em;vertical-align:-.1944em"></span><span class="mord mathnormal" style="margin-right:.03588em">y</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1</span></span></span></span>。<ul><li><em>异常处理</em>：如果出现重复的CR（延迟到达的旧请求），接收方会发送相关确认，发送方收到后发现是无效的，会发送 REJ (Reject) 或 RST 来终止错误连接。</li></ul></li></ol><h4 id="连接终止">连接终止</h4><p><img src="https://images.kisechan.space/20251220202832018.png" srcset="/img/loading.gif" lazyload alt=""></p><ul><li>通常采用“四次挥手”或对称释放模型。</li><li>发送方发 DR (Disconnect Request)，接收方回 DC (Disconnect Confirm)。</li></ul><h2 id="局域网和广域网技术">局域网和广域网技术</h2><h3 id="IEEE-局域网通信协议体系">IEEE 局域网通信协议体系</h3><p><strong>局域网 (LAN) 定义</strong><br>局域网是在有限的地理范围内连接许多独立设备，使它们相互直接通信的系统。为了解决设备互连的兼容性，IEEE 802委员会制定了一系列标准。</p><p><strong>IEEE 802 参考模型与 OSI 的关系</strong><br>IEEE 802 标准主要对应 OSI 参考模型的<strong>物理层</strong>和<strong>数据链路层</strong>。为了适应不同的物理传输介质，IEEE 802 将数据链路层拆分为两个子层：</p><ul><li><strong>逻辑链路控制子层 (LLC, 802.2)</strong>：位于上层。对所有局域网标准都是通用的，负责向网络层提供统一的服务接口（如数据报、虚电路服务）。</li><li><strong>媒体访问控制子层 (MAC)</strong>：位于下层。与具体的物理传输介质相关，负责解决**“谁在什么时候使用信道”**（即介质争用）的问题。</li></ul><p><strong>常见的 802 标准</strong></p><ul><li><strong>802.3</strong>：以太网（CSMA/CD）。</li><li><strong>802.5</strong>：令牌环。</li><li><strong>802.11</strong>：无线局域网（WLAN）。</li><li><strong>FDDI</strong>：光纤分布式数据接口（ANSI标准，但也常被归入此类讨论）。</li></ul><h3 id="以太网">以太网</h3><p>以太网是应用最广泛的局域网技术，其核心在于它如何解决多设备共享同一条总线的冲突问题。</p><h4 id="介质访问控制：CSMA-CD-协议">介质访问控制：CSMA/CD 协议</h4><p>全称是<strong>载波侦听多路访问/冲突检测 (Carrier Sense Multiple Access with Collision Detection)</strong>。</p><p>注意，这里也有一个MAC的概念，但是跟MAC地址不是一个东西。</p><table><thead><tr><th style="text-align:center">控制方式</th><th style="text-align:center">描述</th><th style="text-align:center">应用</th></tr></thead><tbody><tr><td style="text-align:center">循环式</td><td style="text-align:center">每个站轮流得到发送机会，若一段时间内有多站发送 数据，则该方式很有效；若只有少数站发送数据时， 会增加不必要的开销。</td><td style="text-align:center">令牌环网、令牌总线 网、FDDI</td></tr><tr><td style="text-align:center">预约式</td><td style="text-align:center">将传输介质的使用时间划分为时间槽，而预约管理可 以集中控制，也可以是分布控制。</td><td style="text-align:center">DQDB</td></tr><tr><td style="text-align:center">竞争式</td><td style="text-align:center">不对各个工作站的发送权限进行控制，而是自由竞争， 它适合于分布控制，轻负载时效率较高。</td><td style="text-align:center">CSMA/CD</td></tr></tbody></table><p>三⼤类多路访问协议及⼩分类</p><ol><li>随机访问协议<br>特点：冲突不可避免。</li><li>受控访问协议<br>特点：克服了冲突。</li><li>有限竞争协议<br>特点：利⽤上述⼆者的优势。</li></ol><p><img src="https://images.kisechan.space/20251220204224949.png" srcset="/img/loading.gif" lazyload alt=""></p><p>在LAN中，多个⽤⼾在没有任何控制的情况下同时访问⼀条线路时，会存在由于不同信号叠加⽽相互破坏的情<br>况。这就是冲突。为了使冲突发⽣的可能性最⼩，需要有⼀种机制来协调通信。<br>以太⽹的媒体访问控制机制称为带有冲突检测的载波侦听多路访问(CSMA/CD)<br>CSMA/CD的发展：MA-〉CSMA-〉CSMA/CD</p><p><strong>演进逻辑</strong></p><ul><li><strong>ALOHA 协议</strong>：<ul><li><strong>纯ALOHA</strong>：想发就发。冲突严重，效率极低。</li><li><strong>分隙ALOHA</strong>：只能在时间片开始时发送。效率提升，但仍有冲突。</li></ul></li><li><strong>CSMA (载波侦听)</strong>：先听后发。<ul><li><strong>非坚持</strong>：忙则等待随机时间。</li><li><strong>1-坚持</strong>：忙则一直听，空闲立即发（以太网采用，利用率高但冲突几率也高）。</li><li><strong>P-坚持</strong>：空闲时以概率P发送。</li></ul></li><li><strong>CSMA/CD (带冲突检测)</strong>：边发边听。一旦检测到冲突，立即停止发送并发送干扰信号（Jam）。</li></ul><p><strong>CSMA/CD 工作流程</strong></p><ol><li><strong>侦听</strong>：如果信道空闲，立即发送；如果忙，继续侦听直到空闲。</li><li><strong>发送与检测</strong>：边发送数据边检测信道电平。</li><li><strong>冲突处理</strong>：如果检测到冲突（电平叠加），立即停止发送当前帧，发送<strong>阻塞信号 (Jam signal)</strong> 强化冲突，让所有站点都知道。</li><li><strong>退避重传</strong>：等待一段随机时间后，重新尝试发送。</li></ol><p><strong>二进制指数退避算法 (Binary Exponential Backoff)</strong><br>这是解决冲突后何时重传的关键算法。</p><ul><li><strong>规则</strong>：发生第 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span> 次冲突后，从整数集合 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msup><mn>2</mn><mi>k</mi></msup><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 1, ..., 2^k - 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0991em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.1667em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8491em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:.03148em">k</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> 中随机取出一个数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.4306em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span></span></span></span>。</li><li><strong>等待时间</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>r</mi><mo>×</mo><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">t = r \times 2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6151em"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.02778em">r</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.1132em">τ</span></span></span></span>（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.1132em">τ</span></span></span></span> 为争用期，即两倍的端到端传播时延）。</li><li><strong>限制</strong>：<ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6944em"></span><span class="mord mathnormal" style="margin-right:.03148em">k</span></span></span></span> 最大取 10（即超过10次冲突，集合不再扩大，固定为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>∼</mo><mn>1023</mn></mrow><annotation encoding="application/x-tex">0 \sim 1023</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">0</span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">∼</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">1023</span></span></span></span>）。</li><li>重传次数超过 16 次，丢弃该帧并报错。</li></ul></li></ul><h4 id="最短帧长计算">最短帧长计算</h4><p>为了保证发送方在停止发送前能检测到可能发生的冲突，<strong>帧的发送时间必须大于等于两倍的信号传播时延（RTT）</strong>。</p><ul><li><p><strong>计算公式</strong>：</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mi>min</mi><mo>⁡</mo></msub><mo>=</mo><mi>R</mi><mo>×</mo><mn>2</mn><mi>S</mi><mi mathvariant="normal">/</mi><mi>V</mi></mrow><annotation encoding="application/x-tex">L_{\min} = R \times 2S / V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3175em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">m</span><span class="mtight">i</span><span class="mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2778em"></span></span><span class="base"><span class="strut" style="height:.7667em;vertical-align:-.0833em"></span><span class="mord mathnormal" style="margin-right:.00773em">R</span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.22222em">V</span></span></span></span></span></p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mi>min</mi><mo>⁡</mo></msub></mrow><annotation encoding="application/x-tex">L_{\min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8333em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3175em"><span style="top:-2.55em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight"><span class="mtight">m</span><span class="mtight">i</span><span class="mtight">n</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>：最短帧长（bit）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi></mrow><annotation encoding="application/x-tex">R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.00773em">R</span></span></span></span>：数据传输速率（bps）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.05764em">S</span></span></span></span>：两站点间最大距离（m）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi></mrow><annotation encoding="application/x-tex">V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6833em"></span><span class="mord mathnormal" style="margin-right:.22222em">V</span></span></span></span>：信号传播速度（m/s，通常光速的2/3，约 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200</mn><mtext>m</mtext><mi mathvariant="normal">/</mi><mi>μ</mi><mtext>s</mtext></mrow><annotation encoding="application/x-tex">200\text m/\mu \text s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">200</span><span class="mord text"><span class="mord">m</span></span><span class="mord">/</span><span class="mord mathnormal">μ</span><span class="mord text"><span class="mord">s</span></span></span></span></span>）。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>S</mi><mi mathvariant="normal">/</mi><mi>V</mi></mrow><annotation encoding="application/x-tex">2S/V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.05764em">S</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:.22222em">V</span></span></span></span>：往返传播时延 (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>τ</mi></mrow><annotation encoding="application/x-tex">2\tau</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:.1132em">τ</span></span></span></span>)。</li></ul></li><li><p><strong>以太网标准值</strong>：</p><ul><li>10Mbps以太网，规定最短帧长为 <strong>64字节 (512 bit)</strong>。</li><li>凡是长度小于64字节的帧，都被视为由于冲突而异常终止的“碎片帧”，直接丢弃。</li></ul></li><li><p><strong>系统跨距的计算方法与上面相同</strong></p></li></ul><h4 id="MAC-帧格式">MAC 帧格式</h4><p><img src="https://images.kisechan.space/20251220210127981.png" srcset="/img/loading.gif" lazyload alt=""></p><ul><li><strong>DIX Ethernet V2</strong>（最常用）：包含<strong>类型 (Type)</strong> 字段，用于标识上层协议（如IP、ARP）。</li><li><strong>IEEE 802.3</strong>：包含<strong>长度 (Length)</strong> 字段。</li><li><strong>兼容性</strong>：如果该字段值大于 1500 (0x05DC)，解释为类型（V2）；如果小于等于 1500，解释为长度（802.3）。</li><li><strong>MAC地址</strong>：6字节（48位），全球唯一。前3字节为厂商代码，后3字节为序列号。</li></ul><h4 id="以太网的发展">以太网的发展</h4><ul><li><strong>10Base-T</strong>：使用双绞线，物理星型拓扑（集线器Hub），逻辑总线。</li><li><strong>100Base-T (快速以太网)</strong>：速率100Mbps，帧格式不变，但为了维持CSMA/CD，<strong>网络直径（最大距离）减小了</strong>（约为100m）。</li><li><strong>Gigabit Ethernet (千兆)</strong>：1Gbps。支持全双工（不使用CSMA/CD）和半双工（使用CSMA/CD，但需通过“载波扩充”增加短帧长度）。</li><li><strong>10G/40G/100G</strong>：通常只支持全双工，不再受CSMA/CD距离限制。</li></ul><h3 id="其他局域网技术">其他局域网技术</h3><h4 id="令牌环网-Token-Ring-IEEE-802-5">令牌环网 (Token Ring, IEEE 802.5)</h4><ul><li><strong>机制</strong>：<strong>令牌传递</strong>。只有持有“令牌”的站点才能发送数据。</li><li><strong>流程</strong>：令牌在环上流动 -&gt; 站点截获令牌 -&gt; 修改令牌状态为忙 -&gt; 附加上数据发送 -&gt; 数据绕环一周被接收方复制 -&gt; 回到发送方 -&gt; 发送方检查状态（是否被接收） -&gt; 释放新令牌。</li><li><strong>优点</strong>：无冲突，确定性延迟，适合重负载。</li><li><strong>帧结构</strong>：包含 SD (起始定界符), AC (访问控制), ED (结束), FS (帧状态) 等。FS域中的A位和C位用于确认地址识别和数据复制。</li></ul><h4 id="FDDI-光纤分布式数据接口">FDDI (光纤分布式数据接口)</h4><ul><li><strong>特点</strong>：双环结构（容错），100Mbps，使用光纤。</li><li><strong>编码</strong>：<strong>4B/5B 编码</strong>（将4比特数据编码为5比特信号，防止全0导致同步丢失，效率80%）。</li><li><strong>访问控制</strong>：<strong>定时令牌协议</strong>。<ul><li>引入 <strong>TTRT (目标令牌循环时间)</strong>。</li><li><strong>同步帧</strong>：保证带宽，收到令牌即可发送。</li><li><strong>异步帧</strong>：只有当令牌提前到达（实际循环时间 &lt; TTRT，说明网络不忙）时才能发送。</li></ul></li></ul><h3 id="无线局域网-WLAN-IEEE-802-11">无线局域网 (WLAN, IEEE 802.11)</h3><p>无线环境比有线复杂，主要体现在<strong>隐蔽终端</strong>、<strong>暴露终端</strong>问题以及<strong>信号衰减</strong>。</p><h4 id="介质访问控制：CSMA-CA">介质访问控制：CSMA/CA</h4><p>无线网络不能简单使用CSMA/CD，因为：</p><ol><li><strong>检测困难</strong>：发送功率远大于接收功率，难以边发边听。</li><li><strong>隐蔽终端</strong>：A和C都想发给B，但A听不到C，直接发会导致在B处冲突。</li></ol><p><img src="https://images.kisechan.space/20251220210852918.png" srcset="/img/loading.gif" lazyload alt=""></p><ol start="3"><li><strong>暴露终端</strong>：由于侦听到其他站点的发送⽽误以为信道忙导致不能发送。暴露站点能侦听到发送端但不会⼲扰接收端</li></ol><p><img src="https://images.kisechan.space/20251220210915141.png" srcset="/img/loading.gif" lazyload alt=""></p><p>因此，802.11 采用了 <strong>CSMA/CA (带冲突避免)</strong> 机制：</p><ul><li><strong>IFS (帧间间隔)</strong>：发送前必须等待的一段时间。优先级越高，等待时间（IFS）越短。<ul><li><strong>SIFS (短)</strong>：最高优先级，用于ACK、CTS。</li><li><strong>PIFS</strong>：中等，用于轮询。</li><li><strong>DIFS (分布)</strong>：最低，用于普通数据。</li></ul></li><li><strong>退避算法</strong>：信道忙时，挂起倒计时；信道空闲时，继续倒计时。</li><li><strong>ACK确认</strong>：由于无线传输不可靠，必须使用<strong>停止-等待协议</strong>，每发一个数据帧都要等一个ACK。</li></ul><p>思考：采⽤停等机制的原因？为什么不采⽤流⽔线机制？</p><ol><li><strong>⽆线环境中的冲突和⼲扰</strong><br>⽆线环境中信号容易受到各种因素的影响，如⼲扰、噪声和信号衰减。在这种环境下，确保每个帧的可靠传<br>输显得尤为重要。停等机制能够在每帧传输后⽴即等待接收确认，确保帧已成功接收或在检测到错误时进⾏<br>重传，从⽽提⾼了传输的可靠性。</li><li><strong>隐藏终端和暴露终端问题</strong><br>⽆线局域⽹中存在隐藏终端和暴露终端问题，这使得冲突检测变得复杂。使⽤停等机制可以减⼩这些问题的<br>影响，因为每次发送后都要等待接收确认，从⽽可以及时发现并处理冲突。</li><li><strong>资源有限和复杂性</strong><br>⽆线通信资源有限，停等机制相对简单，容易实现和管理。⽽流⽔线机制需要更多的缓冲和复杂的管理策<br>略，容易导致在⽆线环境中增加系统的复杂性和资源开销。</li></ol><h4 id="RTS-CTS-机制-解决隐蔽终端">RTS/CTS 机制 (解决隐蔽终端)</h4><p>这是一个可选机制，用于预约信道。</p><ul><li><strong>RTS (请求发送)</strong>：发送方广播“我要发数据，需占用多长时间”。</li><li><strong>CTS (允许发送)</strong>：接收方广播“允许发送，大家都闭嘴”。</li><li><strong>NAV (网络分配矢量)</strong>：收到RTS或CTS的第三方站点，会设置自己的NAV计时器，在此期间不尝试发送。</li><li><strong>作用</strong>：虽然会有RTS冲突，但RTS很短，代价小；一旦CTS发送成功，长数据帧的传输就有了保障。</li></ul><h4 id="组网模式">组网模式</h4><ul><li><strong>Ad Hoc</strong>：自组织，无AP，点对点直接通信。</li><li><strong>Infrastructure (基础架构)</strong>：所有通信通过 <strong>AP (访问点)</strong> 转发。包含 BSS (基本服务集) 和 ESS (扩展服务集)。</li></ul><h3 id="广域网技术">广域网技术</h3><h4 id="ATM-异步传输模式">ATM (异步传输模式)</h4><p>一种面向连接的、基于信元（Cell）的交换技术，曾试图统一局域网和广域网。</p><ul><li><strong>信元结构</strong>：固定 <strong>53字节</strong>（5字节信头 + 48字节数据/净荷）。</li><li><strong>连接方式</strong>：虚电路。使用 <strong>VPI (虚通路标识)</strong> 和 <strong>VCI (虚通道标识)</strong> 进行路由。<ul><li>交换机通过查找映射表，修改进入信元的VPI/VCI和端口号，转发到输出端口。</li></ul></li><li><strong>特点</strong>：硬件转发快，延迟低，支持QoS（服务质量），适合语音、视频、数据综合传输。</li></ul><h4 id="帧中继-Frame-Relay">帧中继 (Frame Relay)</h4><ul><li><strong>背景</strong>：随着光纤普及，链路误码率极低，X.25那种逐段复杂的差错控制变得多余。</li><li><strong>特点</strong>：<ul><li><strong>简化</strong>：只工作在物理层和链路层。</li><li><strong>无逐段纠错</strong>：中间节点发现错误直接丢弃，由端到端（高层）负责重传。</li><li><strong>面向连接</strong>：使用 <strong>DLCI (数据链路连接标识)</strong> 标识虚电路（主要是永久虚电路 PVC）。</li><li><strong>拥塞控制</strong>：简单地丢弃超额数据包。</li></ul></li></ul><h2 id="TCP-IP基础">TCP/IP基础</h2><h3 id="TCP-IP-网络体系结构">TCP/IP 网络体系结构</h3><p><img src="https://images.kisechan.space/20251220212415703.png" srcset="/img/loading.gif" lazyload alt=""></p><p>TCP/IP 是事实上的工业标准，不同于 OSI 的七层理论模型，TCP/IP 实际上由四层组成，运⾏TCP/IP协议的⽹络通常由五层构成，将接口层拆分）。</p><ul><li><strong>网络接口层</strong>：对应 OSI 的<strong>物理层和数据链路层</strong>。</li><li><strong>网络层</strong>：核心协议是 <strong>IP</strong>，辅助协议包括 ICMP、IGMP、ARP、RARP。</li><li><strong>传输层</strong>：提供端到端的通信，主要协议是 <strong>TCP</strong> (可靠) 和 <strong>UDP</strong> (不可靠)。</li><li><strong>应用层</strong>：对应 OSI 的会话、表示、应用层。</li></ul><h3 id="网际协议-IP-Internet-Protocol">网际协议 IP (Internet Protocol)</h3><p>IP 是 TCP/IP 的核心，所有的TCP、UDP、ICMP和IGMP数据都是以IP数据报格式进⾏传输。</p><p>提供<strong>不可靠</strong>、<strong>无连接</strong>的数据报服务。</p><ul><li>不可靠：<br>IP协议不能保证IP数据报能成功到达⽬的地。任何对数据传输可靠性的要求必须由上层协议（如TCP）来提供。</li><li>⽆连接：<br>IP协议不维护任何关于后续数据报的状态信息。每个数据报的处理是相互独⽴的，IP数据报可以不按发送顺序接收。</li></ul><h4 id="IP-地址-IPv4">IP 地址 (IPv4)</h4><ul><li><strong>长度</strong>：32位（4字节），通常用点分十进制表示（如 192.168.1.1）。</li><li><strong>分类编址</strong>：<ul><li><strong>A类</strong>：0开头，范围 1.0.0.0 - 127.x.x.x（用于超大型网络）。</li><li><strong>B类</strong>：10开头，范围 128.0.0.0 - 191.x.x.x（用于中型网络）。</li><li><strong>C类</strong>：110开头，范围 192.0.0.0 - 223.x.x.x（用于小型网络）。</li><li><strong>D类</strong>：1110开头，范围 224.0.0.0 - 239.x.x.x（<strong>组播/多播地址</strong>）。</li><li><strong>E类</strong>：11110开头，保留。</li></ul></li><li><strong>特殊地址</strong>：<ul><li><strong>主机位全0</strong>：代表网络本身（<strong>网络地址</strong>）。</li><li><strong>主机位全1</strong>：本网段的<strong>广播地址</strong>。</li><li><strong>127.x.x.x</strong>：环回地址（Loopback），用于本机测试。</li><li><strong>私有地址</strong>：10.x.x.x, 172.16-31.x.x, 192.168.x.x（企业内部使用，不可在公网路由）。</li></ul></li></ul><p><img src="https://images.kisechan.space/20251219202456784.png" srcset="/img/loading.gif" lazyload alt=""></p><h4 id="子网划分与-VLSM-计算重点">子网划分与 VLSM (计算重点)</h4><p>为了解决 IP 地址浪费，引入了子网掩码。</p><table><thead><tr><th style="text-align:center">子网掩码</th><th style="text-align:center">前缀</th></tr></thead><tbody><tr><td style="text-align:center"><code>255.255.255.0</code></td><td style="text-align:center"><code>/24</code></td></tr><tr><td style="text-align:center"><code>255.255.255.128</code></td><td style="text-align:center"><code>/25</code></td></tr><tr><td style="text-align:center"><code>255.255.255.192</code></td><td style="text-align:center"><code>/26</code></td></tr><tr><td style="text-align:center"><code>255.255.255.224</code></td><td style="text-align:center"><code>/27</code></td></tr><tr><td style="text-align:center"><code>255.255.255.240</code></td><td style="text-align:center"><code>/28</code></td></tr><tr><td style="text-align:center"><code>255.255.255.248</code></td><td style="text-align:center"><code>/29</code></td></tr><tr><td style="text-align:center"><code>255.255.255.252</code></td><td style="text-align:center"><code>/30</code></td></tr></tbody></table><ul><li><strong>子网掩码 (Subnet Mask)</strong>：32位，网络位和子网位全为1，主机位全0。</li><li><strong>计算公式</strong>：<ul><li><strong>网络地址</strong> = IP地址 <strong>AND</strong> 子网掩码 (二进制按位与)。</li><li>主机位全 1 得到<strong>广播地址</strong></li><li>可用地址范围：<ul><li>第一个主机 = 网络地址 + 1</li><li>最后一个主机 = 广播地址 − 1</li></ul></li><li><strong>主机数</strong> = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mtext>主机位数</mtext></msup><mo>−</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">2^{\text{主机位数}} - 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.9247em;vertical-align:-.0833em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8413em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord cjk_fallback mtight">主机位数</span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222em"></span></span><span class="base"><span class="strut" style="height:.6444em"></span><span class="mord">2</span></span></span></span> (减去全0的网络号和全1的广播号)。</li></ul></li><li><strong>VLSM (可变长子网掩码)</strong>：允许在一个网络中使用不同长度的子网掩码，提高利用率。<strong>先分大的再分小的</strong>。</li><li><strong>CIDR (无类别域间路由)</strong>：消除A/B/C类界限，使用斜线记法（如 /24, /30）。支持<strong>路由聚合（超网）</strong>，路由表中采用<strong>最长前缀匹配</strong>原则转发数据。</li></ul><p>IPv4 地址不够 + 网络规模变大 ➡️ A/B/C 类地址浪费严重 ➡️ 引入 CIDR（取消分类） ➡️ 允许 VLSM（内部精细划分） ➡️ 允许路由聚合（外部减少路由条目） ➡️ 路由器路由表规模可控 ➡️ 使用最长前缀匹配保证转发正确</p><h4 id="IP-数据报格式与分片">IP 数据报格式与分片</h4><p><img src="https://images.kisechan.space/20251219205645577.png" srcset="/img/loading.gif" lazyload alt=""></p><ol><li><p>版本号 (Version) [4 bit]：<br>⽬前IP协议的版本号为4（IPv4），它正在逐渐被IPv6版本所替代。</p></li><li><p>报头⻓度 (Header Length) [4 bit]：<br>报头⻓度指的是报头占32位字的数量（⼀般是20字节，即5⾏，对应的报头⻓度的字段值为5【1字段值对应4B】）。<br>报头包括可选项，报头⻓度字段值最⼤是15，对应报头最⻓为60B</p></li><li><p>服务类型 (Type of Service, TOS) [8 bit]：<br>4个⽐特的TOS分别表⽰：最⼩延迟、最⼤吞吐量、最⾼可靠性和最⼩费⽤。【4位中只能有1位为1】⾼3位和末位未使⽤。最新的RFC2474重新定义为区分服务，⽤来映射⼀个底层的服务。</p></li><li><p>总⻓度 (Total Length) [16 bit]：<br>该字段以字节为单位定义IP数据报的总⻓度（报头加上数据）。【1字段值对应1B，所以IP数据报的最⼤⻓度为65536B】太⻓的报⽂会进⾏分段，⼀般不会超过576B</p></li><li><p>标识 (Identification) [16 bit]：<br>标识字段唯⼀地标识主机发送的每⼀个数据报。通常每发送⼀个报⽂，其值⾃动加1。如果数据报被分⽚，每个分⽚都设置相同的标识号码。【在分段中使⽤】</p></li><li><p>标志 (Flags) [3 bit]：第1位未使⽤，DF位（第2位）置1表⽰不要分段，MF位（第3位）置1表⽰分段后还有进⼀步的分段，最后⼀个分段MF位为0。</p></li><li><p>⽚偏移 (Fragment Offset) [13 bit]：<br>分段偏移说明该分段在数据报中的位置。以8字节为单位，如偏移量1对应字节号8，偏移量2对应字节号16。</p></li><li><p>⽣存时间 (Time to Live, TTL) [8 bit]：<br>TTL字段设置数据报可以经过的最多路由器数量。每经过⼀个路由器，值减1，值为0时数据报被丢弃（并发送ICMP报⽂通知源主机）。防⽌数据报在⽹络中⽆限循环。【通常⽣存时间的起始值是32、64、128】</p></li><li><p>协议 (Protocol) [8 bit]：<br>IP数据报的上层协议。常⻅的协议值包括ICMP（1）、IGMP（2）、TCP（6）、UDP（17）、IPv6（41）、OSPF（89）。</p></li><li><p>报头校验和 (Header Checksum) [16 bit]：<br>根据IP报头计算的校验和，⽤于检测报头在传输过程中是否出现差错。采⽤16位反码求和算法。IP数据报每经过⼀个路由器，路由器都要重新计算⾸部检验和，因为某些字段（⽣存时间、标志、⽚偏移等）的取值可能发⽣变化。由于IP层本⾝并不提供可靠传输的服务，并且计算⾸部校验和是⼀项耗时的操作，因此在IPv6中，路由器不再计算⾸部校验和，从⽽更快转发IP数据报。</p></li><li><p>源IP地址 (Source IP Address)：<br>每个数据报都包含源IP地址。</p></li><li><p>⽬的IP地址 (Destination IP Address)：<br>每个数据报都包含⽬的IP地址。</p></li></ol><p>可变部分（选项、数据）</p><ol><li>选项：可选字段，⽤于携带额外的信息。【最⼤40B】</li><li>数据：实际传输的数据部分。</li></ol><hr><p>最⼤传送单元(MTU)： MTU（Maximum Transmission Unit）是指在⽹络上传输的最⼤数据帧的⼤⼩，通常以字节为单位。MTU限制了IP数据报在传输链路上的最⼤⻓度。MTU的⼤⼩包括IP报头和数据部分。当数据报的⼤⼩超过MTU时，需要进⾏分⽚（Fragmentation）。</p><p><img src="https://images.kisechan.space/20251220213346919.png" srcset="/img/loading.gif" lazyload alt=""></p><p><img src="https://images.kisechan.space/20251220213404483.png" srcset="/img/loading.gif" lazyload alt=""></p><h4 id="ARP-地址解析协议">ARP (地址解析协议)</h4><ul><li><strong>功能</strong>：<strong>将 IP 地址（逻辑地址）解析为 MAC 地址（物理地址）</strong>。</li><li><strong>工作流程</strong>：ARP协议的请求包是以⼴播⽅式发送的。⽹段中的所有主机都会接收到这个包，如果⼀个主机的IP地址和ARP请求中的⽬的IP地址相同，该主机会对这个请求数据包作出ARP应答，将其MAC地址发送给源端。<ol><li><strong>广播请求</strong>：发送方在局域网广播 ARP Request（“谁是 IP x.x.x.x？请告诉我你的 MAC”）。</li><li><strong>单播响应</strong>：目标主机收到后，单播回复 ARP Reply。</li><li><strong>缓存</strong>：双方将映射关系存入 ARP 高速缓存。</li></ol></li><li><strong>ARP 代理</strong>：路由器代替处于另一网段的主机回答 ARP 请求。</li></ul><h4 id="DHCP-动态主机配置协议">DHCP (动态主机配置协议)</h4><ul><li><strong>功能</strong>：自动分配 IP 地址、网关、DNS 等。</li><li><strong>流程</strong>：<ol><li><strong>Discover</strong>：客户机广播寻找服务器。</li><li><strong>Offer</strong>：服务器提供 IP 地址。</li><li><strong>Request</strong>：客户机选择并请求使用该 IP。</li><li><strong>Ack</strong>：服务器确认。</li></ol></li></ul><h3 id="ICMP-Internet-控制报文协议">ICMP (Internet 控制报文协议)</h3><p>ICMP 封装在 IP 数据报中，用于报错和查询。</p><ul><li><strong>差错报文</strong>：<ul><li><strong>终点不可达</strong>：路由找不到目标。</li><li><strong>源点抑制</strong>：网络拥塞，让发送方慢点发（流量控制）。</li><li><strong>超时</strong>：TTL 耗尽（Traceroute 利用此原理）。</li><li><strong>重定向</strong>：告诉主机有更好的路由路径。</li></ul></li><li><strong>查询报文</strong>：<ul><li><strong>回送请求/回答</strong>：即 <strong>Ping</strong> 命令的原理，测试连通性。</li><li>时间戳请求/回答、地址掩码请求/回答。</li></ul></li></ul><h3 id="IGMP-Internet-组管理协议">IGMP (Internet 组管理协议)</h3><ul><li><strong>功能</strong>：管理多播组成员。</li><li><strong>地址映射</strong>：组播 IP (Class D) 映射到 MAC 地址时，IP 的低 23 位直接映射到 MAC 的低 23 位，MAC 高位固定为 <code>01-00-5E</code>。由于 IP 多播地址有 28 位有效，映射时会丢弃 5 位，导致 <strong>32 个不同的 IP 组播地址可能映射到同一个 MAC 地址</strong>（需在 IP 层进一步过滤）。</li></ul><h3 id="传输层协议：UDP-与-TCP">传输层协议：UDP 与 TCP</h3><h4 id="UDP-用户数据报协议">UDP (用户数据报协议)</h4><ul><li><strong>特点</strong>：无连接、不可靠、面向报文、无拥塞控制、首部开销小（仅 8 字节）。</li><li><strong>首部</strong>：源端口、目的端口、长度、校验和。</li><li><strong>适用</strong>：实时应用（视频、语音）、DNS、DHCP。</li></ul><h4 id="TCP-传输控制协议">TCP (传输控制协议)</h4><ul><li><strong>特点</strong>：面向连接、可靠、字节流、全双工。</li><li><strong>首部格式</strong>：<ul><li><strong>序号 (Seq)</strong>：本报文段第一个字节的编号。</li><li><strong>确认号 (Ack)</strong>：期望收到对方下一个报文段的第一个字节序号。</li><li><strong>标志位</strong>：<strong>SYN</strong> (建立连接), <strong>ACK</strong> (确认有效), <strong>FIN</strong> (断开连接), <strong>RST</strong> (复位), <strong>URG</strong> (紧急), <strong>PSH</strong> (推送)。</li><li><strong>窗口</strong>：接收方通知发送方自己的缓存大小（用于流量控制）。</li></ul></li></ul><h4 id="TCP-连接管理">TCP 连接管理</h4><ul><li><strong>三次握手 (建立连接)</strong>：<ol><li>A -&gt; B: <strong>SYN=1, Seq=x</strong> (A 请求连接)。</li><li>B -&gt; A: <strong>SYN=1, ACK=1, Seq=y, Ack=x+1</strong> (B 同意并请求连接)。</li><li>A -&gt; B: <strong>ACK=1, Seq=x+1, Ack=y+1</strong> (A 确认 B 的请求)。</li></ol></li><li><strong>四次挥手 (释放连接)</strong>：<ol><li>A -&gt; B: <strong>FIN=1, Seq=u</strong> (A 说我发完了)。</li><li>B -&gt; A: <strong>ACK=1, Seq=v, Ack=u+1</strong> (B 说知道了，但 B 可能还有数据要发)。</li><li>… (B 继续发送数据) …</li><li>B -&gt; A: <strong>FIN=1, ACK=1, Seq=w, Ack=u+1</strong> (B 也发完了)。</li><li>A -&gt; B: <strong>ACK=1, Seq=u+1, Ack=w+1</strong> (A 确认，等待 2MSL 后彻底关闭)。</li></ol></li></ul><h4 id="TCP-拥塞控制">TCP 拥塞控制</h4><p>拥塞控制是防止网络过载，不同于流量控制（点对点）。包含四个算法：</p><ol><li><p><strong>慢启动 (Slow Start)</strong>：</p><ul><li>初始拥塞窗口 <strong>cwnd = 1</strong> (MSS)。</li><li>每收到一个 ACK，cwnd 加 1。</li><li>效果：每经过一个传输轮次 (RTT)，<strong>cwnd 加倍</strong> (1, 2, 4, 8…)，呈指数增长。</li><li>直到 cwnd 达到 <strong>慢启动阈值 (ssthresh)</strong>。</li></ul></li><li><p><strong>拥塞避免 (Congestion Avoidance)</strong>：</p><ul><li>当 cwnd &gt;= ssthresh 时进入此阶段。</li><li>每经过一个 RTT，<strong>cwnd 加 1</strong> (线性增长)。</li></ul></li><li><p><strong>超时处理 (Timeout)</strong>：</p><ul><li>若发生超时（严重拥塞）：<ul><li><strong>ssthresh = 当前 cwnd / 2</strong>。</li><li><strong>cwnd = 1</strong>。</li><li>重新进入<strong>慢启动</strong>。</li></ul></li></ul></li><li><p><strong>快速重传与快速恢复 (Fast Retransmit / Fast Recovery)</strong>：</p><ul><li>若收到 <strong>3个重复的 ACK</strong>（轻度拥塞）：<ul><li>立即重传丢失的报文（快速重传）。</li><li><strong>ssthresh = 当前 cwnd / 2</strong>。</li><li><strong>cwnd = 新的 ssthresh + 3</strong> (加上3个重复ACK的量)。</li><li>进入<strong>拥塞避免</strong>（线性增长）。</li></ul></li></ul></li></ol><p><strong>计算例题解析 (Slide 30-31):</strong></p><ul><li><strong>题目</strong>：MSS=1KB，当前拥塞窗口 18KB，发生超时。接着 4 个传输并发量都成功。求窗口大小？</li><li><strong>解析</strong>：<ol><li>发生超时：<strong>ssthresh = 18 / 2 = 9KB</strong>，<strong>cwnd = 1KB</strong>。</li><li>第1次传输成功（慢启动）：cwnd = 1 * 2 = 2KB。</li><li>第2次传输成功：cwnd = 2 * 2 = 4KB。</li><li>第3次传输成功：cwnd = 4 * 2 = 8KB。</li><li>第4次传输：此时窗口为8KB。</li></ol><ul><li><em>注意</em>：若问第4次传输<strong>后</strong>的窗口：理论上 8*2=16，但 ssthresh=9。所以 cwnd 会先变成 9，然后进入拥塞避免线性增长。</li></ul></li></ul><h3 id="IPv6-基础">IPv6 基础</h3><ul><li><strong>地址长度</strong>：128位（16字节），冒号十六进制表示。</li><li><strong>改进</strong>：<ul><li>简化的固定首部（40字节），提高路由器处理效率。</li><li>取消了首部校验和（依赖链路层和传输层）。</li><li>不允许路由器分片（源主机负责分片）。</li><li>支持即插即用（自动配置）。</li></ul></li><li><strong>过渡技术</strong>：双协议栈、隧道技术。</li></ul><h2 id="Internet-服务">Internet 服务</h2><h3 id="DNS-服务-Domain-Name-System">DNS 服务 (Domain Name System)</h3><p>DNS 是互联网的基础设施，解决了“人类好记的域名”与“机器好用的IP地址”之间的转换问题。</p><p><strong>核心概念</strong></p><ul><li><strong>功能</strong>：实现<strong>域名 &lt;–&gt; IP地址</strong>的相互映射。</li><li><strong>特性</strong>：是一个<strong>分布式数据库</strong>系统，具有层次结构。相比于早期的HOSTS文件（集中式、无法缩放），DNS通过分层管理解决了网络规模扩展的问题。</li></ul><p><strong>域名空间结构 (Tree Structure)</strong><br>DNS 使用倒树状的层次结构：</p><ul><li><strong>根域 (Root)</strong>：树的顶端，通常用点号 <code>.</code> 表示。</li><li><strong>顶级域 (TLD)</strong>：<ul><li><strong>通用顶级域 (gTLD)</strong>：<code>.com</code> (商业), <code>.edu</code> (教育), <code>.org</code> (非盈利), <code>.net</code> (网络服务) 等。</li><li><strong>国家/地区顶级域 (ccTLD)</strong>：<code>.cn</code> (中国), <code>.us</code> (美国), <code>.uk</code> (英国), <code>.hk</code> (香港) 等。</li></ul></li><li><strong>二级/三级域</strong>：如 <code>jlu.edu.cn</code> (吉林大学), <code>pku.edu.cn</code> (北大)。</li><li><strong>完全限定域名 (FQDN)</strong>：从叶子节点到根节点的完整路径，如 <code>www.jlu.edu.cn.</code>。</li></ul><p><strong>域名服务器体系</strong></p><ul><li><strong>根域名服务器</strong>：全球共有13套（A-M），知道所有顶级域服务器的地址。</li><li><strong>顶级域名服务器</strong>：负责管理 com, org, cn 等顶级域。</li><li><strong>权限域名服务器</strong>：负责管理某个具体区域（Zone）的解析，如吉林大学的DNS服务器管理 <code>jlu.edu.cn</code>。</li><li><strong>本地域名服务器 (Local DNS)</strong>：电脑上网时默认配置的DNS（如ISP提供的），负责代理用户进行查询。</li></ul><p><strong>解析过程 (重点)</strong></p><ul><li><strong>递归查询 (Recursive)</strong>：主机向本地域名服务器发起。要求“必须给我一个结果”（如果不知道，你去帮我问）。</li><li><strong>迭代查询 (Iterative)</strong>：本地域名服务器向根/顶级/权限服务器发起。答复通常是“我不知道具体IP，但你可以去问下一级的某某服务器”。</li><li><strong>流程示例</strong>：<ol><li>主机询问本地DNS：<code>www.mcgraw.com</code> 是多少？</li><li>本地DNS问根服务器：<code>.com</code> 归谁管？ -&gt; 根回复：去找 <code>.com</code> 服务器。</li><li>本地DNS问 <code>.com</code> 服务器：<code>mcgraw.com</code> 归谁管？ -&gt; 回复：去找 <code>mcgraw.com</code> 的权限服务器。</li><li>本地DNS问 <code>mcgraw.com</code> 服务器：<code>www</code> 是多少？ -&gt; 回复：是 <code>x.x.x.x</code>。</li><li>本地DNS将结果返回给主机。</li></ol></li></ul><p><strong>缓存 (Caching)</strong><br>为了减轻服务器负担，解析结果（包括“查无此人”的否定结果）会在本地DNS和主机中<strong>缓存</strong>一段时间（TTL）。</p><p><strong>常用工具</strong></p><ul><li><code>nslookup &lt;域名&gt;</code>：查询域名解析。</li><li><code>ipconfig /displaydns</code>：查看本地DNS缓存。</li></ul><h3 id="电子邮件服务-E-mail">电子邮件服务 (E-mail)</h3><p>电子邮件是互联网最早、最广泛的应用之一。</p><p><strong>系统组成</strong></p><ul><li><strong>用户代理 (User Agent, UA)</strong>：用户使用的客户端软件（如Outlook, Foxmail），负责撰写、阅读、管理邮件。</li><li><strong>邮件服务器 (Mail Server)</strong>：负责发送和接收邮件，维护用户邮箱。</li><li><strong>协议</strong>：<ul><li><strong>发送协议</strong>：<strong>SMTP</strong> (推模式)。</li><li><strong>接收协议</strong>：<strong>POP3</strong> 或 <strong>IMAP</strong> (拉模式)。</li></ul></li></ul><p><strong>SMTP (简单邮件传输协议)</strong></p><ul><li><strong>功能</strong>：用于将邮件从发送方UA推送到发送方服务器，以及从发送方服务器中继到接收方服务器。</li><li><strong>特点</strong>：<ul><li>使用 <strong>TCP</strong> 连接，端口 <strong>25</strong>。</li><li>纯文本协议，命令/响应模式（如 <code>HELO</code>, <code>MAIL FROM</code>, <code>RCPT TO</code>, <code>DATA</code>）。</li><li><strong>限制</strong>：只能传输 7位 ASCII 码。</li></ul></li></ul><p><strong>MIME (通用互联网邮件扩充)</strong></p><ul><li><strong>背景</strong>：为了解决SMTP只能传纯文本、无法传非英语字符/二进制文件（图片、视频）的问题。</li><li><strong>机制</strong>：在邮件首部增加额外的域（如 <code>Content-Type</code>, <code>Content-Transfer-Encoding</code>），将非ASCII数据编码为ASCII字符串传输（常用 <strong>Base64</strong> 编码）。</li><li><strong>复合类型</strong>：<code>Multipart</code> 类型允许一封邮件包含正文、附件等多个部分。</li></ul><p><strong>接收协议 (POP3 vs IMAP)</strong></p><ul><li><strong>POP3 (邮局协议 v3)</strong>：<ul><li><strong>脱机模型</strong>。用户下载邮件到本地，通常会从服务器删除（虽可配置保留，但同步性差）。</li><li>操作简单，端口 <strong>110</strong>。</li></ul></li><li><strong>IMAP (互联网邮件访问协议)</strong>：<ul><li><strong>联机模型</strong>。邮件保存在服务器上，客户端只是一个“窗口”。</li><li>支持在服务器上建文件夹、标记状态，适合多终端同步使用。端口 <strong>143</strong>。</li></ul></li></ul><h3 id="FTP-服务-File-Transfer-Protocol">FTP 服务 (File Transfer Protocol)</h3><p>FTP 用于在异构网络（不同操作系统）之间可靠地传输文件。</p><p><strong>工作原理 (双连接模式)</strong><br>FTP 不同于 HTTP，它同时使用<strong>两个</strong> TCP 连接：</p><ul><li><strong>控制连接 (Control Connection)</strong>：<ul><li>端口 <strong>21</strong>。</li><li>用于发送命令（如 <code>LIST</code>, <code>RETR</code>, <code>STOR</code>）和响应。</li><li>在整个会话期间一直保持。</li></ul></li><li><strong>数据连接 (Data Connection)</strong>：<ul><li>端口 <strong>20</strong>（主动模式下）。</li><li>用于传输实际的文件内容或目录列表。</li><li><strong>非持续</strong>：每传一个文件，建立一个新连接，传完即断开。</li></ul></li></ul><p><strong>两种工作模式 (常考区别)</strong></p><ul><li><strong>主动模式 (PORT / Active)</strong>：<ul><li>客户端告诉服务器：“我打开了端口X，你来连我”。</li><li>服务器从 <strong>20端口</strong> 主动发起连接到客户端的X端口。</li><li><em>问题</em>：客户端如果有防火墙，可能会拦截服务器的主动连接。</li></ul></li><li><strong>被动模式 (PASV / Passive)</strong>：<ul><li>客户端告诉服务器：“我准备好了，你开个端口等我连”。</li><li>服务器开启一个随机端口P，通知客户端。</li><li>客户端主动发起连接到服务器的P端口。</li><li><em>优势</em>：对客户端防火墙友好。</li></ul></li></ul><h3 id="Web-服务-World-Wide-Web">Web 服务 (World Wide Web)</h3><p>万维网是一个分布式的超媒体系统。</p><p><strong>核心组件</strong></p><ul><li><strong>URL (统一资源定位符)</strong>：标识网络资源的地址。格式：<code>&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</code>。</li><li><strong>HTML (超文本标记语言)</strong>：用于描述网页结构和内容。</li><li><strong>HTTP (超文本传输协议)</strong>：浏览器和服务器之间的通信规则。</li></ul><p><strong>HTTP 协议</strong></p><ul><li><strong>特点</strong>：<ul><li>基于 <strong>TCP</strong>，默认端口 <strong>80</strong>。</li><li><strong>无状态 (Stateless)</strong>：服务器不记得以前来过这台客户端（需用 Cookie/Session 维持状态）。</li><li><strong>请求/响应模型</strong>。</li></ul></li><li><strong>连接方式</strong>：<ul><li><strong>非持久连接 (HTTP/1.0)</strong>：每请求一个对象（如网页里的一张图），都要新建一个TCP连接。效率低，延迟高。</li><li><strong>持久连接 (HTTP/1.1)</strong>：Keep-Alive。建立一次TCP连接后，可以传输多个对象，减少握手开销。</li></ul></li></ul><p><strong>Web 代理 / 缓存</strong></p><ul><li>为了加快访问速度，通常在局域网出口设置代理服务器（Proxy）。</li><li>浏览器先问代理：“你有这个网页吗？”</li><li>如果有（命中），直接返回；如果没有，代理由去源服务器取，取回后发给用户并保存在本地缓存中。</li></ul><h2 id="参考和注解">参考和注解</h2></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/%E8%AF%BE%E7%A8%8B%E7%AC%94%E8%AE%B0/" class="category-chain-item">课程笔记</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="print-no-link">#计算机网络</a></div></div><div class="license-box my-3"><div class="license-title"><div>计算机网络课程笔记</div><div>https://blog.kisechan.space/2025/notes-networks/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Kisechan</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年9月27日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年12月21日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2025/site-pwa/" title="为博客增添 PWA 支持"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">为博客增添 PWA 支持</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2025/shuodedaoli-deskpet/" title="制作一只非常可爱的说的道理桌宠"><span class="hidden-mobile">制作一只非常可爱的说的道理桌宠</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="gitalk-container"></div><script type="text/javascript">Fluid.utils.loadComments("#gitalk-container",function(){Fluid.utils.createCssLink("/css/gitalk.css"),Fluid.utils.createScript("https://lib.baomitu.com/gitalk/1.8.0/gitalk.min.js",function(){var e=Object.assign({clientID:"Ov23liWYIiu2jxReIEhB",clientSecret:"d7b44817ae2553b2175fdecfde9718b582bdc653",repo:"Comment-Kisechan",owner:"Kisechan",admin:["Kisechan"],language:"zh-CN",labels:["Gitalk"],perPage:10,pagerDirection:"last",distractionFreeMode:!1,createIssueManually:!0,proxy:"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token",enabled:!0},{id:"9f4ade83eadaaac3bae21de307286c51"});new Gitalk(e).render("gitalk-container")})})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><div><span>Frame by <a href="https://hexo.io" target="_blank" rel="nofollow noopener">Hexo</a></span> <span>| Theme <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></span></div><div style="font-size:.85rem"><span><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></span><span><script async src="https://views.kisechan.space/views.js"></script><br><span id="my-site-view">本站总访问量：加载中...</span><br><br><span>&copy; 2024 - 2025 By <a href="https://github.com/Kisechan" target="_blank" rel="nofollow noopener"><strong>Kisechan</strong></a><br></span><span>今天也很喜欢你！</span><br><a href="https://icp.gov.moe/?keyword=20251453" target="_blank">萌ICP备20251453号</a></span></div></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!0,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>var relativeDate=function(){var t,e,i,n,m=document.getElementById("updated-time");m&&(e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:Z|[+-]\d{2}:\d{2})/,(i=(t=m.textContent).match(e))&&(n=moment(i[0]).fromNow(),m.textContent=t.replace(e,n)),m.style.display="")};Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/moment.min.js",function(){"zh-cn".startsWith("en")?relativeDate():Fluid.utils.createScript("https://lib.baomitu.com/moment.js/2.29.4/locale/zh-cn.min.js",function(){relativeDate()})})</script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-t},CONFIG.toc)),0<o.find(".toc-list-item").length&&o.css("visibility","visible"),Fluid.events.registerRefreshCallback(function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;0<t.find(".toc-list-item").length&&t.css("visibility","visible")}}))})</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/linkcard.js"></script><script src="/js/cursor.js"></script><script src="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="//cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="/js/boot.js"></script><script type="text/javascript">var originalTitle=document.title;window.onblur=function(){document.title="等你回来哦"},window.onfocus=function(){document.title=originalTitle}</script><div id="tooltip-rightmenu" class="tooltip-rightmenu">如果需要使用原始右键菜单请按下 <strong>Ctrl+右键</strong></div><div id="tooltip-clipboard" class="tooltip-rightmenu">链接复制成功！</div><div id="rightmenu-wrapper"><ul class="list-v rightmenu" id="rightmenu-content"><li class="navigation menuNavigation-Content"><a class="nav icon-only fix-cursor-default" onclick="history.back()"><i class="fa fa-arrow-left rightmenu-icon"></i></a> <a class="nav icon-only fix-cursor-default" onclick="history.forward()"><i class="fa fa-arrow-right rightmenu-icon"></i></a> <a class="nav icon-only fix-cursor-default" onclick="window.location.reload()"><i class="fa fa-refresh rightmenu-icon"></i></a> <a aria-label="TOP" href="#" role="button"><i class="fa fa-arrow-up rightmenu-icon"></i></a></li><hr class="menuLoad-Content" style="display:block"><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><span><i class="fa fa-search rightmenu-icon"></i> 站内搜索</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="toggleFullScreen()"><span><i class="fa fa-arrows-alt rightmenu-icon"></i> 切换全屏</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="copyPageUrl()"><span><i class="fa fa-clipboard rightmenu-icon"></i> 复制链接</span></a></li><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" href="javascript:;" onclick="scrollToComments()"><span><i class="fa fa-commenting rightmenu-icon"></i> 立即评论</span></a></li><hr class="menuLoad-Content" style="display:block"><li class="menuLoad-Content" style="display:block"><a class="vlts-menu fix-cursor-default" target="_blank" rel="noopener" href="https://www.kisechan.space/" data-group="link"><span><i class="fa fa-info-circle rightmenu-icon"></i> 关于本站</span></a></li></ul></div><link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"><link href="/css/custom_right_menu_icons.css" type="text/css" rel="stylesheet"><script src="/js/right_menu.js" type="text/javascript"></script><link href="/css/right_menu.css" type="text/css" rel="stylesheet"><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/koharu.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1})</script></body></html>